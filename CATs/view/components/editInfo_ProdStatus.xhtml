<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:dui="http://openorganize.com/platform/dui">

	<h2><h:outputText value="#{editCmptProductionStatusWizard.wizardTitle}" /></h2>

	<div id="step1">
		<ul class="steps">
			<li class="selected">1. Edit</li>
			<li class="disabled">2. Results</li>
		</ul>
		<div class="cluster smart">
			<div class="title change">
				<h1>Edit</h1>
				<p>Fill out required information to change the Backfile Onboarding Status for your component(s).</p>
			</div>
			<s:div rendered="#{not empty editCmptProductionStatusWizard.errorMsg}" styleClass="alert">
					<p><h:outputText value="#{editCmptProductionStatusWizard.errorMsg}" /></p>
			</s:div>
			            
            
			<s:decorate template="../layout/edit.xhtml">
				<ui:define name="label">Backfile Production Status</ui:define>
				<h:selectOneMenu name="catProductionStatus"
					value="#{editCmptProductionStatusWizard.cmptInstance.catProductionStatus}"
					required="true">
					<s:selectItems
						value="#{editCmptProductionStatusWizard.possibleProdStatusValues}"
						var="i" itemValue="#{i}" label="#{i.label}"
						noSelectionLabel="Choose..." />
					<a:support event="onchange"
                    	eventsQueue="prodStatusQueue"
                    	status="globalWaitStatus"
                        reRender="acqStartedLayout, acqCompletedLayout, sigStartedLayout, sigCompletedLayout, 
                        		  sentToVendorLayout, schedToReleaseLayout, releasedLayout" 
                        ajaxSingle="true"/>
				</h:selectOneMenu>
				<span class="comments">
					Choose the new Backfile Production Status for your component(s). 
					You can only move the Backfile Production Status forward; 
					if you need to move it backwards please cancel this wizard and file a JIRA ticket with CM Support. 
				</span>
			</s:decorate>
			
			<a:outputPanel layout="none" id="acqStartedLayout">
				<s:div rendered="#{editCmptProductionStatusWizard.isAcqStarted or editCmptProductionStatusWizard.isAcqCompleted}">
					<s:decorate template="../layout/edit.xhtml">
						<ui:define name="label">Acquisition Started</ui:define>
						<span class="read_only">
						<rich:calendar enableManualInput="true"  datePattern="yyyy/MM/dd"
							inputClass="datestyle"
							value="#{editCmptProductionStatusWizard.cmptInstance.catAcqDateStarted}" 
							required="true"/>
						</span>
						<span class="comments">
							Date when Content Management began print acquisition for this component. 
							If this date is already filled out for any of your component(s), the system will leave it as-is.
						</span>
					</s:decorate>
				</s:div>
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="acqCompletedLayout">
				<s:div rendered="#{editCmptProductionStatusWizard.isAcqCompleted}">
					<s:decorate template="../layout/edit.xhtml">
						<ui:define name="label">Acquisition Completed</ui:define>
						<span class="read_only">
						<rich:calendar enableManualInput="true"  datePattern="yyyy/MM/dd"
							id="catAcqCompletedWiz" inputClass="datestyle"
							value="#{editCmptProductionStatusWizard.cmptInstance.catAcqDateCompleted}" 
							required="true"/>
						</span>
						<span class="comments">
							Date when Content Management completed print acquisition for enough of this component 
							to schedule it for digitization. If this date is already filled out for any of 
							your components, the system will leave it as-is.
						</span>
					</s:decorate>
				</s:div>
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="sigStartedLayout">
				<s:div rendered="#{editCmptProductionStatusWizard.isSigStarted}">
					<s:decorate template="../layout/edit.xhtml">
						<ui:define name="label">SIG Author</ui:define>
						<h:selectOneMenu name="catPrimarySigAuthor"
							value="#{editCmptProductionStatusWizard.cmptInstance.catPrimarySigAuthor}"
							required="true">
							<s:selectItems
								value="#{roler.getUsersInRole(editCmptProductionStatusWizard.librariansRoleValue)}"
								var="i" itemValue="#{i}" label="#{i}"
								noSelectionLabel="Choose..." />
						</h:selectOneMenu>
						<span class="comments">
							Metadata Librarian assigned to write Specific Indexing Guidelines for your component(s).
						</span>
					</s:decorate>
				</s:div>
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="sigCompletedLayout">
				<s:div rendered="#{editCmptProductionStatusWizard.isSigCompleted}">
					<s:decorate template="../layout/edit.xhtml">
						<ui:define name="label">SIG Author</ui:define>
						<h:selectOneMenu name="catPrimarySigAuthor1"
							value="#{editCmptProductionStatusWizard.cmptInstance.catPrimarySigAuthor}"
							required="true">
							<s:selectItems
								value="#{roler.getUsersInRole(editCmptProductionStatusWizard.librariansRoleValue)}"
								var="i" itemValue="#{i}" label="#{i}"
								noSelectionLabel="Choose..." />
						</h:selectOneMenu>
						<span class="comments">
							Metadata Librarian assigned to write Specific Indexing Guidelines for your component(s). 
							If <b>SIG Date Completed</b> is already filled out for this component, 
							the system will leave <b>SIG Author</b> as-is for that component.
						</span>
					</s:decorate>
					<s:decorate template="../layout/edit.xhtml">
						<ui:define name="label">SIG Date Completed</ui:define>
						<span class="read_only">
						<rich:calendar enableManualInput="true"  datePattern="yyyy/MM/dd"
							id="catSigCompleted" inputClass="datestyle"
							value="#{editCmptProductionStatusWizard.cmptInstance.catPrimarySigDateCompleted}" 
							required="true"/>
						</span>
						<span class="comments">
							Date when the Metadata Librarian completed the SIG. 
							If this date is already filled out for any of your components, 
							the system will leave it as-is for those components.
						</span>
					</s:decorate>
				</s:div>
				
				<s:div rendered="#{editCmptProductionStatusWizard.isSigCompleted and !editCmptProductionStatusWizard.bulkOp}">
					<s:decorate template="../layout/edit.xhtml">
						<ui:define name="label">Literatum Journal Code</ui:define>
						<h:inputText id="catLtmJournalCode" maxlength="16" size="25"
							value="#{editCmptProductionStatusWizard.cmptInstance.catLtmJournalCode}" 
							required="true"/>
						<span class="comments">
							<b>Literatum Journal Code</b> for this component.
						</span>
					</s:decorate>
				</s:div>
				
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="sentToVendorLayout">
				<s:div rendered="#{editCmptProductionStatusWizard.isSentToVendor}">
					<s:decorate template="../layout/edit.xhtml">
						<ui:define name="label">Vendor</ui:define>
						<h:selectOneMenu name="catDigiVendorList"
							value="#{editCmptProductionStatusWizard.cmptInstance.catDigiVendorList}"
							required="true">
							<s:selectItems itemValue="#{i}" label="#{i.catName}"
								noSelectionLabel="Choose..."
								value="#{catDigiVendorListList.completeResultList}" var="i" />
							<s:convertEntity />
						</h:selectOneMenu>
						<span class="comments">
							Digitization vendor. If the <b>Backfile Onboarding Status</b> is already past <b>Sent to Vendor</b> 
							for any of your components, the system will leave vendor as-is for those components.
						</span>
					</s:decorate>
					
					<s:decorate template="../layout/edit.xhtml">
						<ui:define name="label">Date Sent to Vendor</ui:define>
						<span class="read_only">
						<rich:calendar enableManualInput="true"  datePattern="yyyy/MM/dd"
							inputClass="datestyle"
							value="#{editCmptProductionStatusWizard.cmptInstance.catDateSentToVendor}"
							required="true"/>
						</span>
						<span class="comments">
							Date when content was shipped to the digitization vendor for production. 
							If this date is already filled out for any of your component(s), the system will leave it as-is.
						</span>
					</s:decorate>
					
				</s:div>
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="schedToReleaseLayout">
				<s:div rendered="#{editCmptProductionStatusWizard.isSchedToRelease}">
					<s:decorate template="../layout/edit.xhtml">
						<ui:define name="label">Scheduled Release Date</ui:define>
						<span class="read_only">
						<rich:calendar enableManualInput="true"  datePattern="yyyy/MM/dd"
							id="catIniReleaseDatePrjd" inputClass="datestyle"
							value="#{editCmptProductionStatusWizard.cmptInstance.catIniReleaseDatePrjd}" 
							required="false"/>
						</span>
						<span class="comments">
							<b>Scheduled Release date</b>. The system will overwrite any <b>Scheduled Release Date</b> you already input for these components, 
							except for components that were previously <b>Released</b>, which the system will leave as-is.
						</span>
					</s:decorate>
				</s:div>
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="releasedLayout">
				<s:div rendered="#{editCmptProductionStatusWizard.isReleased}">
					<s:decorate template="../layout/edit.xhtml">
						<ui:define name="label">Initial Release Date</ui:define>
						<span class="read_only">
						<rich:calendar enableManualInput="true"  datePattern="yyyy/MM/dd"
							id="catIniReleaseDateActl" inputClass="datestyle"
							value="#{editCmptProductionStatusWizard.cmptInstance.catIniReleaseDateActl}" 
							required="true"/>
						</span>
						<span class="comments">
							<b>Release date</b>. The system will leave <b>Release Date</b> as-is for any component 
							that was previously <b>Released</b>.
						</span>
					</s:decorate>
				</s:div>
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="noLayoutHasDups">
				<s:div styleClass="title">
				 	<h1>Your Components (#{editCmptProductionStatusWizard.selectedCmptsList.size})</h1>
                  	<p>You are attempting to change the <b>Backfile Onboarding Status</b> for the following components:</p>
				</s:div>
				<s:fragment rendered="#{not empty editCmptProductionStatusWizard.selectedCmptsList}">
					<div class="scroller">
			   			<rich:dataTable id="catCmptsListPStatus"
			                var="_catCmpts"
			              	value="#{editCmptProductionStatusWizard.selectedCmptsList}"
			              	rowClasses="odd,even">
			           
				        	<rich:column id="col2">
					        	<f:facet name="header">
					        		<h:outputText value="Set Name" id="setname" />
					        	</f:facet>
								<h:outputText value="#{_catCmpts.setsValue}" />        		
				        	</rich:column>
				        	
				        	<rich:column id="col3">
					        	<f:facet name="header">
					        		<h:outputText value="Component Name" id="cmptname" />
					        	</f:facet>
								<h:outputText value="#{_catCmpts.catName}" />        		
				        	</rich:column>
				        	
				        	<rich:column id="col11">
					        	<f:facet name="header">
					        		<h:outputText value="Backfile Onboarding Status" id="prodStatus" />
					        	</f:facet>
								<h:outputText value="#{_catCmpts.catProductionStatus.label}" />        		
				        	</rich:column>
				        	
				        	<rich:column>
					        	<f:facet name="header">
					        		<h:outputText value="CSP Onboarding Status" id="cspOnboardingStatus" />
					        	</f:facet>
								<h:outputText value="#{_catCmpts.catCspOnboardingStatus.label}" />        		
				        	</rich:column>
				        	
				        	<rich:column id="col6">
					        	<f:facet name="header">
					        		<h:outputText value="Print ISSN" id="cmptissn" />
					        	</f:facet>
								<h:outputText value="#{_catCmpts.catPrintIssn}" />        		
				        	</rich:column>
				        	
				        	<rich:column id="col7">
					        	<f:facet name="header">
					        		<h:outputText value="Extent (Pub Units)" id="cmptpurange" />
					        	</f:facet>
								<h:outputText value="#{_catCmpts.catPublctnUnitRange}" />        		
				        	</rich:column>
				        	
				        	<rich:column id="col8">
					        	<f:facet name="header">
					        		<h:outputText value="Extent (Dates)" id="cmptdateRange" />
					        	</f:facet>
								<h:outputText value="#{_catCmpts.catDateRange}" />        		
				        	</rich:column>
				        	
			        	</rich:dataTable>
		        	</div>
	        	</s:fragment>
			</a:outputPanel>
			
		</div>
		
		
		
		<div class="push"></div>
	
		<a:commandLink styleClass="button" value="Quit"
			rendered="#{empty editCmptProductionStatusWizard.errorMsg}"
			oncomplete="#{rich:component('editProdStatusQuit')}.show(); return false;"
			ajaxSingle="true"
			eventsQueue="prodStatusQueue"
			status="globalWaitStatus"
			reRender="editProdStatusQuit"/>
		
		<a:commandLink styleClass="button right" value="Continue"
			rendered="#{empty editCmptProductionStatusWizard.errorMsg}"
			action="#{editCmptProductionStatusWizard.updateProductionStatus}"
			reRender="editProdStatusForm"
			eventsQueue="prodStatusQueue"
			status="globalWaitStatus"/>
		
		<a:commandLink styleClass="button right" value="Return"
			rendered="#{not empty editCmptProductionStatusWizard.errorMsg}"
			action="#{editCmptProductionStatusWizard.reset}"
			oncomplete="#{rich:component('editProdStatusWizardModal')}.hide(); #{rich:component('editProdStatusQuit')}.hide(); javascript:location.reload(true);"
			eventsQueue="prodStatusQueue"
			status="globalWaitStatus"/>
		
	</div>
</ui:composition>
