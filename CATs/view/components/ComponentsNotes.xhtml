<s:div id="notes" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:cats="http://www.ithaka.org/cats"
    xmlns:rich="http://richfaces.org/rich">

<a:form>
	<s:div id="neededSrc1" rendered="#{not empty catCmptsHome.instance.catNeededSourceList}">
		<div class="note">
	    	<p class="title museo">Needed Source: <i>#{catCmptsHome.instance.catName}</i></p>
	    	<pre>#{catCmptsHome.instance.catNeededSourceList}</pre>
			<p class="sig">by #{catCmptsHome.instance.catNeededSourceChangeBy} at #{catCmptsHome.instance.catNeededSourceDateChange}
				<span class="editbutton"><a:commandLink ignoreDupResponses="true"
			   		value=""
			   		action="#{editCmptNeededSource.prepareEdit()}"
					reRender="editNeededSourceWizardModal" 
					oncomplete="#{rich:component('editNeededSourceWizardModal')}.show();"
					styleClass="button wizard2 #{!s:hasPermission(catCmptsHome.instance, 'modify catNeededSourceList') ? 'disabled' : ''}"
					disabled="#{!s:hasPermission(catCmptsHome.instance, 'modify catNeededSourceList')}"
					status="globalWaitStatus"
					eventsQueue="cmptsEditQueue"
					ajaxSingle="true"
					onclick="if ( ! checkForSave() ) { return false ; }"/>
				</span>
			</p>
		</div>
	</s:div>
	<s:div id="neededSrc2" rendered="#{empty catCmptsHome.instance.catNeededSourceList}">
		<div class="note">
	    	<p class="title museo">Needed Source: <i>#{catCmptsHome.instance.catName}</i></p>
	    	<p>None Listed
	    		<a:commandLink ignoreDupResponses="true"
			   		value=""
			   		action="#{editCmptNeededSource.prepareEdit()}"
					reRender="editNeededSourceWizardModal" 
					oncomplete="#{rich:component('editNeededSourceWizardModal')}.show();"
					styleClass="button wizard2 #{!s:hasPermission(catCmptsHome.instance, 'modify catNeededSourceList') ? 'disabled' : ''}"
					disabled="#{!s:hasPermission(catCmptsHome.instance, 'modify catNeededSourceList')}"
					status="globalWaitStatus"
					eventsQueue="cmptsEditQueue"
					ajaxSingle="true"
					onclick="if ( ! checkForSave() ) { return false ; }"/>
	    	</p>		
		</div>
	</s:div>
</a:form>	
<s:div id="tagsComponents">
<a:form>
<h2>Component Tags</h2>
<a:commandLink  reRender="cmptBulkOperationsPanels"
	action="#{catCmptsHome.addTags}"
	oncomplete="#{rich:component('cmptBulkUpdatePanel')}.show();"
	styleClass="button wizard #{!(s:hasPermission(catCmptsHome.instance, 'modify catComponentsTags') or s:hasPermission(catCmptsHome.instance, 'add_reln catComponentsTags')) ? 'disabled':''}"
	disabled="#{!(s:hasPermission(catCmptsHome.instance, 'modify catComponentsTags') or s:hasPermission(catCmptsHome.instance, 'add_reln catComponentsTags'))}"
	status="globalWaitStatus"
	eventsQueue="cmptsEditQueue"
	ajaxSingle="true"
	onclick="if ( ! checkForSave() ) { return false ; }"/>

<div class="push"></div>
	    <div class="note">
	    	<p>#{catCmptsHome.getCmptTagsDisplayValue()}</p>
	   </div>
</a:form>
</s:div>

<s:div id="notesComponents">
	<a:form>
   <h2>Notes</h2>
    <a:commandLink 
		ignoreDupResponses="true"
   		value="Add Note"
   		action="#{createNeededSourceNoteWizard.prepareCreate()}"
		reRender="createNeededSourceNoteWizardModal" 
		oncomplete="#{rich:component('createNeededSourceNoteWizardModal')}.show(); return false;"
		styleClass="button wizard #{!s:hasPermission(catCmptsHome.instance, 'add_reln catNeededSourceNotes') ? 'disabled' : ''}"
		disabled="#{!s:hasPermission(catCmptsHome.instance, 'add_reln catNeededSourceNotes')}"
		status="globalWaitStatus"
		eventsQueue="cmptsEditQueue"
		ajaxSingle="true"
		onclick="if ( ! checkForSave() ) { return false ; }"/>
		
    <div class="push"></div>
    
	   	<s:div id="tadDivId">
	    <ul class="tab">
	      <li>
	      	<a:commandLink  styleClass="#{catCmptsHome.notesSortOrder=='desc' ? 'selected' : ''}" reRender="tadDivId,notesId" ajaxSingle="true" eventsQueue="cmptsEditQueue">
	      		<f:param name="notesSortOrder" value="desc"/>
	      		<h:outputText value="Newest First" /> 
	    	</a:commandLink>
	      </li>
	      <li>
	      	<a:commandLink styleClass="#{catCmptsHome.notesSortOrder=='asc' ? 'selected' : ''}" reRender="tadDivId,notesId" ajaxSingle="true" eventsQueue="cmptsEditQueue">
	      		<f:param name="notesSortOrder" value="asc"/>
	      		<h:outputText value="Oldest First" />
	    	</a:commandLink>
	      </li>
		</ul>
	    </s:div>	   	

	    <div id="newnote"></div>
	    
	    <a:outputPanel id="notesId" styleClass="allnotes">
		    <rich:dataList var="_cdNotes" value="#{catCmptsHome.allNotes}" rows="10" id="notesList1">
		    	<div class="note">
		        <p class="title museo">#{_cdNotes.catTitlePart1}<i>#{_cdNotes.catTitlePart2}</i>#{_cdNotes.catTitlePart3}</p>
		        <pre>#{_cdNotes.catNote}</pre>
		        <p class="sig">by #{_cdNotes.catCreator} at #{_cdNotes.catDateCreated}
		        <span class="editbutton"><a:commandLink ignoreDupResponses="true"
			   		value="Edit"
			   		action="#{createNeededSourceNoteWizard.prepareEdit(_cdNotes)}"
					reRender="createNeededSourceNoteWizardModal" 
					oncomplete="#{rich:component('createNeededSourceNoteWizardModal')}.show();"
					styleClass="button wizard2 #{(_cdNotes.parentType ne 'COMPONENT' or !roler.haveOverlappingRoles(identity.credentials.username, _cdNotes.catCreator)) ? 'disabled' : ''}"
					disabled="#{_cdNotes.parentType ne 'COMPONENT' or !roler.haveOverlappingRoles(identity.credentials.username, _cdNotes.catCreator)}"
					status="globalWaitStatus"
					eventsQueue="cmptsEditQueue"
					ajaxSingle="true"
					onclick="if ( ! checkForSave() ) { return false ; }"/>
		        </span>
		        </p>
		
		      </div>
		    </rich:dataList>
		    <rich:datascroller for="notesList1" maxPages="4" renderIfSinglePage="false">
		          <f:facet name="first">
		                    <h:outputText value="First"/>
		          </f:facet>
		          <f:facet name="last">
		                    <h:outputText value="Last"/>
		          </f:facet>
			</rich:datascroller>
		</a:outputPanel>
		
    </a:form>
   
   
  
   </s:div>
  
		
</s:div>
