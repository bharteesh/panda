<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="../layout/template.xhtml">

	<ui:param name="entityType" value="cmpt" />
	<ui:define name="badge">
		<ui:include src="ComponentsBadge.xhtml" />
	</ui:define>

	<ui:define name="body">
		

		<h:form id="componentsEditForm">
		<!-- Shows hour glass when the table is loading -->
			<div id="globalStatusDiv" style="display: none;" ><img
				src="../img/loading.gif" /></div>
			<a:status id="globalWaitStatus" forceId="true" layout="none"
				onstart="jQuery('#globalStatusDiv').fadeIn('fast')"
				onstop="jQuery('#globalStatusDiv').fadeOut('slow')" />
			<a:outputPanel layout="none" id="noLayoutFatalMsgs">
				<s:div styleClass="alert">
					<s:div rendered="#{not empty catCmptsHome.fatalMsgs}" id="fatalMsgsDiv">
						<a:repeat value="#{catCmptsHome.fatalMsgs}" var="_fatalMsg">
							<p>#{_fatalMsg}</p>
						</a:repeat>
					</s:div>
				</s:div>
			</a:outputPanel>
			<a:outputPanel layout="none" id="noLayoutWarningMsgs">
				<s:div styleClass="alert">
					<s:div rendered="#{not empty catCmptsHome.warningMsgs}" id="warningMsgsDiv">
						<a:repeat value="#{catCmptsHome.warningMsgs}" var="_warningMsg">
							<p>#{_warningMsg}</p>
						</a:repeat>
					</s:div>
				</s:div>
			</a:outputPanel>	
			<rich:tabPanel 
				id="maintab" 
			   switchType="ajax"
				styleClass="tab"
				contentClass="tab_content"
				selectedTab="#{catCmptsHome.selectedTab}"
				>

				<rich:tab label="Title History" id="tab1" name="tab1" eventsQueue="cmptsEditQueue" status="globalWaitStatus" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
					reRender="thLayout,rightsLayout, acqLayout, checkinSrcLayout, digiLayout, repositoryLayout" 
					action="#{catCmptsHome.updateUserTabPreferences('tab1')}">
					<ui:include src="ComponentsTitleHistoryTab.xhtml" />
				</rich:tab>
				<rich:tab label="Rights" id="tab2" name="tab2" eventsQueue="cmptsEditQueue" status="globalWaitStatus" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
					reRender="thLayout,rightsLayout, acqLayout, checkinSrcLayout, digiLayout, repositoryLayout"
					action="#{catCmptsHome.updateUserTabPreferences('tab2')}">
					<ui:include src="ComponentsRightsTab.xhtml" />
				</rich:tab>
				<rich:tab label="Acquisitions" id="tab3" name="tab3" eventsQueue="cmptsEditQueue" status="globalWaitStatus" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
					reRender="thLayout,rightsLayout, acqLayout, checkinSrcLayout, digiLayout, repositoryLayout"
					action="#{catCmptsHome.updateUserTabPreferences('tab3')}">
					<ui:include src="ComponentsAcquisitionsTab.xhtml" />
				</rich:tab>
				<rich:tab label="Check-In Source" id="tab4" name="tab4" eventsQueue="cmptsEditQueue" status="globalWaitStatus" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
					reRender="thLayout,rightsLayout, acqLayout, checkinSrcLayout, digiLayout, repositoryLayout"
					action="#{catCmptsHome.updateUserTabPreferences('tab4')}">
					<ui:include src="ComponentsCheckInSourceTab.xhtml" />
				</rich:tab>
				<rich:tab label="Digitization" id="tab5" name="tab5" eventsQueue="cmptsEditQueue" status="globalWaitStatus" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
					reRender="thLayout,rightsLayout, acqLayout, checkinSrcLayout, digiLayout, repositoryLayout"
					action="#{catCmptsHome.updateUserTabPreferences('tab5')}">
					<ui:include src="ComponentsDigitizationTab.xhtml" />
				</rich:tab>
				<rich:tab label="Repository" id="tab6" name="tab6" eventsQueue="cmptsEditQueue" status="globalWaitStatus" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
					reRender="thLayout,rightsLayout, acqLayout, checkinSrcLayout, digiLayout, repositoryLayout"
					action="#{catCmptsHome.updateUserTabPreferences('tab6')}">
					<ui:include src="ComponentsRepositoryTab.xhtml" />
				</rich:tab>
				<rich:tab label="Audit" id="tab7" name="tab7" eventsQueue="cmptsEditQueue" status="globalWaitStatus" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
					reRender="thLayout,rightsLayout, acqLayout, checkinSrcLayout, digiLayout, repositoryLayout"
					action="#{catCmptsHome.updateUserTabPreferences('tab7')}">
					<ui:include src="ComponentsAuditTab.xhtml" />
				</rich:tab>
			</rich:tabPanel>
			<div id="functions">
		    	<a:commandLink action="#{catCmptsHome.update}" 
		    		onclick=" if ( jQuery(this).hasClass('disabled') ) { return false; } " 
		    		ignoreDupResponses="true" styleClass="button saveOrCancel disabled" 
		    		value="Save"
		    		reRender="componentsEditForm"
		    		eventsQueue="cmptsEditQueue" status="globalWaitStatus"/>
		    	<a:commandLink action="#{catCmptsHome.cancel}" 
		    		onclick=" if ( jQuery(this).hasClass('disabled') ) { return false; } " 
		    		ignoreDupResponses="true" ajaxSingle="true" styleClass="button saveOrCancel disabled" 
		    		value="Cancel"
		    		eventsQueue="cmptsEditQueue" status="globalWaitStatus"/>
			</div>
		</h:form>
		
		<a:form>
			<a:outputPanel layout="none" id="thLayout">
				<s:div id="TitleHistoryTables" rendered="#{empty catCmptsHome.selectedTab or catCmptsHome.selectedTab eq 'tab1'}">
					<ui:include src="ComponentsTitleRltnshpsTable.xhtml">
						<ui:param name="divId" value="thTitleTableDiv"/>
					  	<ui:param name="tableId" value="thTitleTable"/>
					  	<ui:param name="titleRelationshipsList" value="#{catCmptsHome.titleRltnshpList}" />
					</ui:include>
				</s:div>
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="rightsLayout">
				<s:div id="RightsTables" rendered="#{catCmptsHome.selectedTab eq 'tab2'}">
					<ui:include src="ComponentsContractDetailsTable.xhtml">
			    	<ui:param name="divId" value="rightsCDTableDiv"/>
					<ui:param name="tableId" value="rightsCDTable"/>
				</ui:include>
				
				<ui:include src="ComponentsPubRolesTable.xhtml">
				  	<ui:param name="divId" value="rightsPubRoleTableDiv"/>
				  	<ui:param name="tableId" value="rightsPubRoleTable"/>
				  	<ui:param name="publisherRolesList" value="#{catCmptsHome.catPublishersToCmptses}" />
				</ui:include>
				</s:div>
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="acqLayout">
				<s:div id="AcqTables" rendered="#{catCmptsHome.selectedTab eq 'tab3'}">
					<ui:include src="ComponentsAcqOrdersTable.xhtml">
						<ui:param name="divId" value="acqOrdersTableDiv"/>
					  	<ui:param name="tableId" value="acqOrdersTable"/>
					  	<ui:param name="acqOrdersList" value="#{catCmptsHome.acqOrdersList}" />
					</ui:include>
					
					<ui:include src="ComponentsIssueShipmentsTable.xhtml">
					  	<ui:param name="divId" value="acqShipmentsTableDiv"/>
					  	<ui:param name="tableId" value="acqShipmentsTable"/>
					  	
					  	<ui:param name="issueShipmentsList" value="#{catCmptsHome.catIssueShipmentses}" />
					</ui:include>
				</s:div>
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="checkinSrcLayout">
				<s:div id="CheckinSrcTables" rendered="#{catCmptsHome.selectedTab eq 'tab4'}">
					<ui:include src="ComponentsAcqOrdersTable.xhtml">
						<ui:param name="divId" value="checkinAcqOrdersTableDiv"/>
					  	<ui:param name="tableId" value="checkinAcqOrdersTable"/>
					  	<ui:param name="acqOrdersList" value="#{catCmptsHome.newOrOrderedAcqOrdersList}" />
					</ui:include>
					
					<ui:include src="ComponentsIssueShipmentsTable.xhtml">
					  	<ui:param name="divId" value="checkinShipmentsTableDiv"/>
					  	<ui:param name="tableId" value="checkinShipmentsTable"/>
					  	<ui:param name="issueShipmentsList" value="#{catCmptsHome.newOrExpectedIssueShipmentsList}" />
					</ui:include>
				</s:div>
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="digiLayout">
				<s:div id="DigiTables" rendered="#{catCmptsHome.selectedTab eq 'tab5'}">
					<ui:include src="ComponentsMovingWallFlipsTable.xhtml">
						<ui:param name="divId" value="digiMVFlipsTableDiv"/>
					  	<ui:param name="tableId" value="digiMVFlipsTable"/>
					  	<ui:param name="movingWallFlipsList" value="#{catCmptsHome.catMovingWallFlipses}" />
					  	<ui:param name="cmpts" value="#{catCmptsHome.instance}"/>
					</ui:include>
				
					<ui:include src="ComponentsAcqOrdersTable.xhtml">
						<ui:param name="divId" value="digiAcqOrdersTableDiv"/>
					  	<ui:param name="tableId" value="digiAcqOrdersTable"/>
					  	<ui:param name="acqOrdersList" value="#{catCmptsHome.acqOrdersList}" />
					</ui:include>
					
					<ui:include src="ComponentsIssueShipmentsTable.xhtml">
					  	<ui:param name="divId" value="digiShipmentsTableDiv"/>
					  	<ui:param name="tableId" value="digiShipmentsTable"/>
					  	<ui:param name="issueShipmentsList" value="#{catCmptsHome.catIssueShipmentses}" />
					</ui:include>
				</s:div>
			</a:outputPanel>
			
			<a:outputPanel layout="none" id="repositoryLayout">
				<s:div id="RepositoryTables" rendered="#{catCmptsHome.selectedTab eq 'tab6'}">
					<ui:include src="ComponentsHCLShipmentsTable.xhtml">
						<ui:param name="divId" value="repHCLShipTableDiv"/>
					  	<ui:param name="tableId" value="repHCLShipTable"/>
					  	<ui:param name="hclShipmentsList" value="#{catCmptsHome.catSourceSentToHcls}" />
					</ui:include>
				</s:div>
			</a:outputPanel>
			
		</a:form>
		
		
		<ui:include src="bulkm_Components.xhtml">
			<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
		</ui:include>
		
		<ui:include src="addDiscToCmpts_modal.xhtml" >
			<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
		</ui:include>
		
		<ui:include src="editm_NeededSource.xhtml">
			<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
		</ui:include>
		
		<ui:include src="/movingwallflips/bulkm_MovingWallFlips.xhtml">
			<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
		</ui:include>
    
	    <ui:include src="/movingwallflips/createm_MovingWallFlips.xhtml">
	      <ui:param name="reRenderMe" value="catMovingWallFlipsList"/>
	      <ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
	    </ui:include>
	   	
	   	<ui:include src="/titlerelationships/createm_TitleRelationships.xhtml">
	   		<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
	   	</ui:include>
		<ui:include src="../publisherRoles/createm_PublisherRoles.xhtml">
		   <ui:param name="divParam" value="publishersToCmptsList"/>
		   <ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
  		</ui:include>

	   	
	   	<ui:include src="/contractdetails/changeAttrbContractDtls_modal.xhtml">
	   		<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
	   	</ui:include>
    	<ui:include src="/contractdetails/advLifecycleContractDtls_modal.xhtml">
    		<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
    	</ui:include>
    	<ui:include src="/contractdetails/addContractDetails_modal.xhtml">
    		<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
    	</ui:include>
    	
    	<ui:include src="../acqorders/bulkm_CatAcqOrders.xhtml">
  		   <ui:param name="divParam" value="AcqOrdersList"/>
  		   <ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
  		</ui:include>
  		<ui:include src="../acqorders/createm_AcqOrders.xhtml">
		   <ui:param name="reRenderMe" value="catAcqOrdersListCmpt"/>
		   <ui:param name="divParam" value="acqOrdersListCmpt"/>
		   <ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
		</ui:include>
		
		<ui:include src="../issueshipments/createm_IssueShipments.xhtml">
		   <ui:param name="reRenderMe" value="catIssueShipCmpt"/>
		   <ui:param name="divParam" value="issueShipCmpt"/>
		   <ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
		</ui:include>
		
		<ui:include src="../sourcesenttohcl/createm_SourceSentToHcl.xhtml">
        	<ui:param name="divParam" value="ComponentsEditcreatem_SourceSentToHcl"/>
        	<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
        </ui:include>
		
		
	 <ui:include src="/sets/delinkm_Component.xhtml">
	 	<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
	 </ui:include>
		
	<ui:include src="/issueshipments/bulkm_IssueShipments.xhtml">
		   <ui:param name="divParam" value="IssueShipmentsEditbulkm_IssueShipments"/>
		   <ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
	</ui:include>
	
	<ui:include src="/issueshipments/duplicatem_IssueShipments.xhtml">
		   <ui:param name="divParam" value="CatIssueShipmentsListduplicatem_IssueShipments"/>
		   <ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
	</ui:include>
	
    <ui:include src="/onholdreason/updateOnHoldReason_modal.xhtml">
    	<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
    </ui:include>
	
	<ui:include src="editm_ProdStatus.xhtml">
    	<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
    </ui:include>
    
    <ui:include src="editm_CspOnboardingStatus.xhtml">
    	<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
    </ui:include>
			<ui:include src="newJournalId_m.xhtml">
		<ui:param name="pageURL" value="/books/BooksEdit.xhtml"/>
	</ui:include>			
	</ui:define>

	<ui:define name="notes">
		<ui:include src="ComponentsNotes.xhtml" />
		<ui:include src="createm_NeededSourceNote.xhtml">
			<ui:param name="pageURL" value="/components/ComponentsEdit.xhtml"/>
		</ui:include>
	</ui:define>
			
</ui:composition>
