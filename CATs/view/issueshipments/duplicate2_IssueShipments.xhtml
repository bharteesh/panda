<ui:composition
xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
>

	<h2><h:outputText value="#{duplicateIssueShipmentsWizard.duplicateTitle}" /></h2>
	
		<div id="step1">
		<ul class="steps many">
			<!-- 	<li class="">1. Permissions</li>  -->
				<li class="selected">1. Parent</li>
				<li class="disabled">2. Change</li>
				<li class="disabled">3. Additional</li>
				<li class="disabled">4. Results</li>
		</ul>
	
		<div class="cluster smart">
		<p><h:outputText
			value="You have selected  #{duplicateIssueShipmentsWizard.duplicateInvalid.size() + duplicateIssueShipmentsWizard.duplicateSelection.size()} record to be copied." /></p>
		
		<p>Use the original shipment parent component as the parent for the new shipment or select a different component as the parent for the new shipment.</p>


<s:fragment rendered="#{not empty duplicateIssueShipmentsWizard.duplicateSelection and duplicateIssueShipmentsWizard.duplicateSelection.size() == 1}">
<s:div rendered="#{duplicateIssueShipmentsWizard.duplicateTransientInstance.catCmpts != null}">
<s:decorate id="catCmptsNameDiv" template="../layout/edit.xhtml">
<ui:define name="label">Component name of the original record:</ui:define>
<h:outputText value="#{duplicateIssueShipmentsWizard.duplicateTransientInstance.catCmpts.catName}"/>
<h:outputText value=" ("/>
<h:outputText value="#{duplicateIssueShipmentsWizard.duplicateTransientInstance.catCmpts.id}"/>
<h:outputText value=")"/>
</s:decorate>
</s:div>

<s:div id="chooseCmptsFragment">
		  <h:inputText id="default_search_catCmptsList" value="#{catCmptsList.catCmpts.catName}" size="60" onchange="return false;"/>
		  <a:commandLink 
		  		 styleClass="button filter"
				 value="Filter list on Component Name"
				 action="#{duplicateIssueShipmentsWizard.narrowList(rich:findComponent('default_search_catCmptsList').value)}"
				 reRender="chooseCmptsFragment"
				 status="globalWaitStatus"
				 />

			<div class="scroller">
				<rich:panel>
					<f:facet name="header">
						<h:outputText value="Components (#{catCmptsList.resultCount})" />
					</f:facet>
				</rich:panel>

			  <rich:dataTable id="cmpts"
				value="#{catCmptsList.resultList}" var="_catCmpts">
				<rich:column styleClass="checkBoxes" headerClass="checkBoxes">
					<h:selectBooleanCheckbox styleClass="entity_checkbox"
						value="#{duplicateIssueShipmentsWizard.selectionsForEntities[_catCmpts]}"
						onclick="emulateRadios(this, 'entity_checkbox');" />
				</rich:column>

		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="ID"
			propertyName="id"
			propertyPath="catCmpts.id"
			propertyValue="#{catCmptsList.catCmpts.id}"
			reRender="cmpts"
			value="#{_catCmpts.id}"
		/>
		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Name"
			propertyName="catName"
			propertyPath="catCmpts.catName"
			propertyValue="#{catCmptsList.catCmpts.catName}"
			reRender="cmpts"
			value="#{_catCmpts.catName}"
		/>
		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Lifecycle"
			propertyName="catLifecycle"
			propertyPath="catCmpts.catLifecycle"
			propertyValue="#{catCmptsList.catLifecycle}"
			reRender="cmpts"
			value="#{_catCmpts.catLifecycle}"
		/>

		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Sets Name"
			propertyName="setsValue"
			propertyPath="catCmpts.setsValue"
			propertyValue="#{catCmptsList.catCmpts.setsValue}"
			reRender="cmpts"
			value="#{_catCmpts.setsValue}"
		/>
		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Publication Unit Range"
			propertyName="catPublctnUnitRange"
			propertyPath="catCmpts.catPublctnUnitRange"
			propertyValue="#{catCmptsList.catCmpts.catPublctnUnitRange}"
			reRender="cmpts"
			value="#{_catCmpts.catPublctnUnitRange}"
		/>
		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Date Range"
			propertyName="catDateRange"
			propertyPath="catCmpts.catDateRange"
			propertyValue="#{catCmptsList.catCmpts.catDateRange}"
			reRender="cmpts"
			value="#{_catCmpts.catDateRange}"
		/>
		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Print ISSN"
			propertyName="catPrintIssn"
			propertyPath="catCmpts.catPrintIssn"
			propertyValue="#{catCmptsList.catCmpts.catPrintIssn}"
			reRender="cmpts"
			value="#{_catCmpts.catPrintIssn}"
		/>
		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="On Hold"
			propertyName="catOnHold"
			propertyPath="catCmpts.catOnHold"
			propertyValue="#{catCmptsList.catCmpts.catOnHold}"
			reRender="cmpts"
			value="#{_catCmpts.catOnHold}"
		/>






			</rich:dataTable>
			</div>
	</s:div>





</s:fragment>
<s:fragment rendered="#{empty duplicateIssueShipmentsWizard.duplicateSelection or duplicateIssueShipmentsWizard.duplicateSelection.size() != 1}">
<div class="scroller">
	<p>Issue Shipments can be copied for only 1 record selection, please select just 1 record for this operation.</p>
</div>
</s:fragment>

			</div>

		<div class="push"></div>

<a:commandLink styleClass="button" value="Quit"
			eventsQueue="#{divParam}eventsQueue"
			status="globalWaitStatus"
			reRender="issueshipmentsduplicatewizard" oncomplete="#{rich:component('issueshipmentsduplicateUpdateQuit')}.show(); return false;">
			</a:commandLink> 

		<a:commandLink id="continueWithoutOnclickValidation"
		rendered="#{not empty duplicateIssueShipmentsWizard.duplicateSelection and duplicateIssueShipmentsWizard.duplicateSelection.size() == 1}"
		styleClass="button right" value="Continue"
		eventsQueue="#{divParam}eventsQueue"
		status="globalWaitStatus"
		action="#{duplicateIssueShipmentsWizard.duplicateNext}"
		reRender="issueshipmentsduplicatewizard" />
			</div>
	
</ui:composition>
