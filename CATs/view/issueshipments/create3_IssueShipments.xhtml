<ui:composition
xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
      xmlns:dui="http://openorganize.com/platform/dui"
>

	<h2><h:outputText value="#{createIssueShipmentsWizard.createTitle}" /></h2>
	
		<div id="step1">
		<s:div rendered="#{createIssueShipmentsWizard.checkIfCreateIssueShipmentLifecycleCompletable() == true}">
		<ul class="steps">
				<li class="">1. Choose</li>
				<li class="">2. Main</li>
				<li class="selected">3. Parent</li>
				<li class="disabled">4. Additional</li>
				<li class="disabled">5. Results</li>
		</ul>
		</s:div>
		<s:div rendered="#{createIssueShipmentsWizard.checkIfCreateIssueShipmentLifecycleCompletable() == false}">
		<ul class="steps">
				<li class="">1. Choose</li>
				<li class="">2. Main</li>
				<li class="selected">3. Parent</li>
				<li class="disabled">4. Results</li>
		</ul>
		</s:div>
		
		<div class="cluster smart">

<s:div id="displayActionPhraseChooseOrUse" rendered="#{createIssueShipmentsWizard.createTransientInstance.catCmpts != null}">
		<p>Choose OR use the existing component as the parent of this shipment.</p>
</s:div>
<s:div id="displayActionPhraseChoose" rendered="#{createIssueShipmentsWizard.createTransientInstance.catCmpts == null}">
		<p>Choose a component to use as the parent of this shipment.</p>
</s:div>

<s:fragment rendered="#{createIssueShipmentsWizard.createTransientInstance.catCmpts != null}">
<s:decorate id="catCmptsNameDiv" template="../layout/edit.xhtml">
<ui:define name="label">Component of the parent order:</ui:define>
<h:outputText value="#{createIssueShipmentsWizard.createTransientInstance.catCmpts.catName}"/>
</s:decorate>
</s:fragment>

<s:fragment>
<s:div id="chooseCmptsFragment">
		  <h:inputText id="default_search_catCmptsList" value="#{catCmptsList.catCmpts.catName}" size="60" onchange="return false;"/>
		  <a:commandLink 
		  		 styleClass="button filter"
				 value="Filter list on Component Name"
				 action="#{createIssueShipmentsWizard.narrowCmptsList(rich:findComponent('default_search_catCmptsList').value)}"
				 reRender="chooseCmptsFragment"
				 status="globalWaitStatus"
				 />

			<div class="scroller">
				<rich:panel>
					<f:facet name="header">
						<h:outputText value="Components (#{catCmptsList.resultCount})" />
					</f:facet>
				</rich:panel>


			  <rich:dataTable id="cmpts"
				value="#{catCmptsList.resultList}" var="_catCmpts">
				<rich:column styleClass="checkBoxes" headerClass="checkBoxes">
					<h:selectBooleanCheckbox styleClass="entity_checkbox"
						value="#{createIssueShipmentsWizard.selectionsForEntities[_catCmpts]}"
						onclick="emulateRadios(this, 'entity_checkbox');" />
				</rich:column>

		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="ID"
			propertyName="id"
			propertyPath="catCmpts.id"
			propertyValue="#{catCmptsList.catCmpts.id}"
			reRender="cmpts"
			value="#{_catCmpts.id}"
		/>
		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Name"
			propertyName="catName"
			propertyPath="catCmpts.catName"
			propertyValue="#{catCmptsList.catCmpts.catName}"
			reRender="cmpts"
			value="#{_catCmpts.catName}"
		/>
		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Lifecycle"
			propertyName="catLifecycle"
			propertyPath="catCmpts.catLifecycle"
			propertyValue="#{catCmptsList.catLifecycle}"
			reRender="cmpts"
			value="#{_catCmpts.catLifecycle}"
		/>

		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Sets Name"
			propertyName="setsValue"
			propertyPath="catCmpts.setsValue"
			propertyValue="#{catCmptsList.catCmpts.setsValue}"
			reRender="cmpts"
			value="#{_catCmpts.setsValue}"
		/>

		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Date Range"
			propertyName="catDateRange"
			propertyPath="catCmpts.catDateRange"
			propertyValue="#{catCmptsList.catCmpts.catDateRange}"
			reRender="cmpts"
			value="#{_catCmpts.catDateRange}"
		/>
		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Publication Unit Range"
			propertyName="catPublctnUnitRange"
			propertyPath="catCmpts.catPublctnUnitRange"
			propertyValue="#{catCmptsList.catCmpts.catPublctnUnitRange}"
			reRender="cmpts"
			value="#{_catCmpts.catPublctnUnitRange}"
		/>
		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="Print ISSN"
			propertyName="catPrintIssn"
			propertyPath="catCmpts.catPrintIssn"
			propertyValue="#{catCmptsList.catCmpts.catPrintIssn}"
			reRender="cmpts"
			value="#{_catCmpts.catPrintIssn}"
		/>
		<cats:wizardColumn
			entityList="#{catCmptsList}"
			propertyLabel="On Hold"
			propertyName="catOnHold"
			propertyPath="catCmpts.catOnHold"
			propertyValue="#{catCmptsList.catCmpts.catOnHold}"
			reRender="cmpts"
			value="#{_catCmpts.catOnHold}"
		/>






			</rich:dataTable>
			</div>
	</s:div>

</s:fragment>


			</div>

		<div class="push"></div>

            <a:commandLink styleClass="button" value="Quit"
       			eventsQueue="#{divParam}eventsQueue"
    			status="globalWaitStatus"
			    reRender="createIssueShipmentswizard" oncomplete="#{rich:component('createIssueShipmentsQuit')}.show(); return false;">
			</a:commandLink> 
 
			<a:commandLink id="continueWithOnclickValidation"
			rendered="#{createIssueShipmentsWizard.createTransientInstance.catCmpts == null and createIssueShipmentsWizard.checkIfCreateIssueShipmentLifecycleCompletable() == true}"
			onclick="if(checkRadios('entity_checkbox', 'Please select an entry') == false) {return false}"
			styleClass="button right" value="Continue"
			eventsQueue="#{divParam}eventsQueue"
			status="globalWaitStatus"
			action="#{createIssueShipmentsWizard.createNext}" 
			reRender="createIssueShipmentswizard" />

			<a:commandLink id="continueWithoutOnclickValidation"
			rendered="#{createIssueShipmentsWizard.createTransientInstance.catCmpts != null and createIssueShipmentsWizard.checkIfCreateIssueShipmentLifecycleCompletable() == true}"
			styleClass="button right" value="Continue"
			eventsQueue="#{divParam}eventsQueue"
			status="globalWaitStatus"
			action="#{createIssueShipmentsWizard.createNext}" 
			reRender="createIssueShipmentswizard" />
			

			<a:commandLink id="saveWithOnclickValidation"
			rendered="#{createIssueShipmentsWizard.createTransientInstance.catCmpts == null and createIssueShipmentsWizard.checkIfCreateIssueShipmentLifecycleCompletable() == false}"
			onclick="if(checkRadios('entity_checkbox', 'Please select an entry') == false) {return false}"
			styleClass="button right" value="Save"
			eventsQueue="#{divParam}eventsQueue"
			status="globalWaitStatus"
			action="#{createIssueShipmentsWizard.performCreateOperation}" 
			reRender="createIssueShipmentswizard" />

			<a:commandLink id="saveWithoutOnclickValidation"
			rendered="#{createIssueShipmentsWizard.createTransientInstance.catCmpts != null and createIssueShipmentsWizard.checkIfCreateIssueShipmentLifecycleCompletable() == false}"
			styleClass="button right" value="Save"
			eventsQueue="#{divParam}eventsQueue"
			status="globalWaitStatus"
			action="#{createIssueShipmentsWizard.performCreateOperation}" 
			reRender="createIssueShipmentswizard" />

			</div>
</ui:composition>

