<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib">
	
	<h2><h:outputText value="#{createIssueShipmentsWizard.createTitle}" /></h2>
	<div id="step1">
		<ul class="steps">
			<li class="">1. Info</li>
			<li class="selected">2. Results</li>
		</ul>
		
		<div class="cluster smart">
			<div class="title eligible">
	            <h1>Shipments (1)</h1>
	            <p>You successfully created one shipment and set the lifecycle to <strong> #{catIssueShipmentsHome.instance.catLifecycle.label}</strong>.</p>
	        </div>
	        <div>
	        	<rich:dataTable value="#{createIssueShipmentsWizard.createdShipments}"
					var="_catIssueShipments">
					<rich:column>
						<f:facet name="header">Set Name</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catCmpts.setsValue}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">Component Name</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catCmpts.catName}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">ISSN</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catCmpts.catPrintIssn}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">BF Prod Status</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catCmpts.catProductionStatus}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">Set CSP</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catCmpts.setCspValue}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">Set CIL</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catCmpts.setCilValue}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">Wall Type</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catCmpts.wallValue}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">Wall Year</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catCmpts.wallYearValue}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">Supplier</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catAcqOrders.catSupplier}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">Shipment Lifecycle</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catLifecycle.label}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">Extent (Pub Units)</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catPublctnUnitRange}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">Extent (Dates)</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catCoverDateRange}" />
						</s:link>
					</rich:column>
					<rich:column>
						<f:facet name="header">Obligation</f:facet>
						<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
							<f:param name="id" value="#{_catIssueShipments.id}"/>
							<h:outputText value="#{_catIssueShipments.catReturnObligation.label}" />
						</s:link>
					</rich:column>
					
				</rich:dataTable>
	        </div>
	        
	        <s:fragment rendered="#{createIssueShipmentsWizard.isShipmentCompleted}">
	        	<s:div styleClass="title eligible" rendered="#{createIssueShipmentsWizard.isOrderPersisted}">
		            <h1>Order (1)</h1>
		            <p>You successfully completed one order and set the outcome to <strong>#{createIssueShipmentsWizard.orderOutcome.label}</strong>.</p>
		        </s:div>
		        <s:div styleClass="title ineligible" rendered="#{!createIssueShipmentsWizard.isOrderPersisted}">
		            <h1>Order (1)</h1>
		            <p>You are not able to complete the order because it's a subscription, it was on hold, had other open shipments, or had open problems.</p>
		        </s:div>
				<div class="push"></div>
				<div>
					<rich:dataTable id="catCreatedOrdersTable"
						var="_order"
			        	value="#{createIssueShipmentsWizard.updatedOrders}">
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Set Name"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.catSets.catCurrentTitle.catName}" />
							</s:link>        		
			        	</rich:column>
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Component Name"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.catCmpts.catName}" />
							</s:link>        		
			        	</rich:column>
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Lifecycle"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.catLifecycle.label}" />
							</s:link>        		
			        	</rich:column>
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Extent (Pub Units)"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.catPublctnUnitRange}" />
							</s:link>        		
			        	</rich:column>
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Extent (Dates)"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.catCoverDateRange}" />
							</s:link>        		
			        	</rich:column>
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Supplier"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.catSupplier}" />
							</s:link>        		
			        	</rich:column>
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Obligation"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.catReturnObligation.label}" />
							</s:link>        		
			        	</rich:column>
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Type"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.catType.label}" />
							</s:link>        		
			        	</rich:column>
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Open Problems"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.openProblemsCount}" />
							</s:link>        		
			        	</rich:column>
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Open Ships"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.openShipmentsCount}" />
							</s:link>        		
			        	</rich:column>
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Hold"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.catOnHold?'Yes':'No'}" />
							</s:link>        		
			        	</rich:column>
			        	
			        	<rich:column>
				        	<f:facet name="header">
				        		<h:outputText value="Creator"/>
				        	</f:facet>
				        	<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml" propagation="none">
								<f:param name="id" value="#{_order.id}"/>
								<h:outputText value="#{_order.catCreator}" />
							</s:link>        		
			        	</rich:column>
			        </rich:dataTable>
				</div>	
	        </s:fragment>
	        
	    </div>
		
		<div class="push"></div>		
		
		<a:commandLink id="finishAsNormalwizard"
		    rendered="#{empty pageURL}"
		    styleClass="button right" 
		    value="Return"
   			eventsQueue="createShipmentQueue"
            status="globalWaitStatus"
			onclick="#{rich:component('createIssueShipmentsPanel')}.hide();" 
			action="#{createIssueShipmentsWizard.createReset}" 
			oncomplete="javascript:location.reload(true);"/>
		
		<a:commandLink id="finishAsNormalwizard1"
		    rendered="#{not empty pageURL}"
		    styleClass="button right" 
		    value="Return"   	
		    status="globalWaitStatus"
			action="#{createIssueShipmentsWizard.createReset}" 
			oncomplete="#{rich:component('createIssueShipmentsPanel')}.hide();javascript:location.href=formatURL(location.href,'#{selectedTab}');"
			/>
		
	</div>
	
</ui:composition>