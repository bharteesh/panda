<s:div id="#{divId}chooseContractTblSdiv" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib">	
	<div class="title additional">
		<h1>Agreements</h1>
		<p>You indicated that the selected content formerly covered by this Agreement is now covered by a different
		Agreement. Select the new Agreement below. You must select an <strong>active</strong> agreement of the same type (CSP or Backfile) as the original, so
		only active agreements will display as search results.</p>		
	</div>
	<div class="push"></div>
	<a:outputPanel layout="none" id="noLayoutErrorMsgs">
				<s:div styleClass="alert">
					<s:div rendered="#{not empty contractDetailsLifecycleWizard.errorMsgs}" id="errorMsgsDiv">
						<a:repeat value="#{contractDetailsLifecycleWizard.errorMsgs}" var="_errMsg">
							<p>#{_errMsg}</p>
						</a:repeat>
					</s:div>
				</s:div>
	</a:outputPanel>
	<div class="push"></div>
	<s:div id="#{divId}chooseContractFragment" styleClass="field">	
			<label>Choose Agreement</label>			
				<h:inputText id="default_search_activeContractsList#{divId}" 
			 			value="#{customCatContractsList.catContracts.publisherValue}"
			 			onchange="return false;" size="60">		
			 	<a:support event="onblur"
                    	eventsQueue="contDtlsLifecycleQueue"
                    	ajaxSingle="true"/>	 			
				</h:inputText>		
				<a:commandLink 
			  		 styleClass="button filter"
					 value="Filter"
					 action="#{contractDetailsLifecycleWizard.narrowContractsList(rich:findComponent('default_search_activeContractsList'.concat(divId)).value)}"
					 reRender="newContractsPanel"
					 status="globalWaitStatus" 
					 ajaxSingle="true"  ignoreDupResponses="true"
					 eventsQueue="contDtlsLifecycleQueue"
					  limitToList="true"/>
	</s:div>				 
	<div class="smart">
			<rich:dataTable id="#{divId}catActiveContracts" styleClass="scroller"
				var="_catContracts" value="#{contractDetailsLifecycleWizard.contractsList}"
				rendered="#{not empty contractDetailsLifecycleWizard.contractsList}">
	
				<rich:column styleClass="checkBoxes" headerClass="checkBoxes">
					<h:selectBooleanCheckbox styleClass="contract_checkbox"
						value="#{contractDetailsLifecycleWizard.selectionsForContracts[_catContracts]}"
						onclick="emulateRadios(this, 'contract_checkbox');" >
						<a:support event="onchange" 
						action="#{contractDetailsLifecycleWizard.setNewContractForTransfer}"
						reRender="newContractsPanel,continuePanel"
						eventsQueue="contDtlsLifecycleQueue"
						status="globalWaitStatus"
						limitToList="true"/>
					</h:selectBooleanCheckbox>
				</rich:column>					
				
				<cats:wizardColumn
						entityList="#{customCatContractsList}"
						propertyLabel="Publisher"
						propertyName="publisherValue"
						propertyPath="catContracts.publisherValue"
						propertyValue="#{customCatContractsList.catContracts.publisherValue}"
						value="#{_catContracts.publisherValue}"/>		
				<cats:wizardColumn
						entityList="#{customCatContractsList}"
						propertyLabel="Type"
						propertyName="catType"
						propertyPath="catContracts.catType"
						propertyValue="#{customCatContractsList.catContracts.catType}"
						value="#{_catContracts.catType.label}"/>			
				<cats:wizardColumn
						entityList="#{customCatContractsList}"
						propertyLabel="Agreement Date"
						propertyName="catAgreementDate"
						propertyPath="catContracts.catAgreementDate"
						propertyValue="#{customCatContractsList.catContracts.catAgreementDate}"
						value="#{_catContracts.catAgreementDate}"/>						
				<cats:wizardColumn
						entityList="#{customCatContractsList}"
						propertyLabel="Lifecycle"
						propertyName="catLifecycle"
						propertyPath="catContracts.catLifecycle"
						propertyValue="#{customCatContractsList.catContracts.catLifecycle}"
						value="#{_catContracts.catLifecycle.label}"/>					
				<cats:wizardColumn
						entityList="#{customCatContractsList}"
						propertyLabel="Outcome"
						propertyName="catOutcome"
						propertyPath="catContracts.catOutcome"
						propertyValue="#{customCatContractsList.catContracts.catOutcome}"
						value="#{_catContracts.catOutcome.label}"/>
				<cats:wizardColumn
						entityList="#{customCatContractsList}"
						propertyLabel="Termination Date"
						propertyName="catTerminationDate"
						propertyPath="catContracts.catTerminationDate"
						propertyValue="#{customCatContractsList.catContracts.catTerminationDate}"
						value="#{_catContracts.catTerminationDate}">
						<s:convertDateTime type="date" pattern="yyyy/MM/dd"/>
				</cats:wizardColumn>		
				<cats:wizardColumn
						entityList="#{customCatContractsList}"
						propertyLabel="CSP Launch"
						propertyName="catCspLaunchDate"
						propertyPath="catContracts.catCspLaunchDate"
						propertyValue="#{customCatContractsList.catContracts.catCspLaunchDate}"
						value="#{_catContracts.catCspLaunchDate}">
						<s:convertDateTime type="date" pattern="yyyy/MM/dd"/>
				</cats:wizardColumn>	
				<cats:wizardColumn
						entityList="#{customCatContractsList}"
						propertyLabel="Set Count"
						propertyName="relatedSetCount"
						propertyPath="catContracts.relatedSetCount"
						propertyValue="#{customCatContractsList.catContracts.relatedSetCount}"
						value="#{_catContracts.relatedSetCount}"/>	
				<cats:wizardColumn
						entityList="#{customCatContractsList}"
						propertyLabel="Agreement Version"
						propertyName="catAgreementVersion"
						propertyPath="catContracts.catAgreementVersion"
						propertyValue="#{customCatContractsList.catContracts.catAgreementVersion}"
						value="#{_catContracts.catAgreementVersion}"/>
				<cats:wizardColumn
						entityList="#{customCatContractsList}"
						propertyLabel="ID"
						propertyName="id"
						propertyPath="catContracts.id"
						propertyValue="#{customCatContractsList.catContracts.id}"
						value="#{_catContracts.id}"/>		
			</rich:dataTable>
		</div>
			<s:div styleClass="blanktable" rendered="#{empty contractDetailsLifecycleWizard.contractsList}">
				<span>Use the filter to narrow down your options.</span>
			</s:div>
	</s:div>
