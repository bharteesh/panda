<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib">

	<h2><h:outputText value="#{createContractDetailsWizard.bulkTitle}"/></h2>

	<div id="step1">
	<ul class="steps">
		<li class="selected">1.Define</li>
		<li class="disabled">2.Info</li>
		<li class="disabled">3.Roles-Riders</li>
		<li class="disabled">4.Results</li>
	</ul>
	
	<div class="cluster">
	<a:outputPanel layout="none" id="noLayoutErrorMsgs">
				<s:div styleClass="alert">
					<s:div rendered="#{not empty createContractDetailsWizard.errorMsgs}" id="errorMsgsDiv">
						<a:repeat value="#{createContractDetailsWizard.errorMsgs}" var="_errMsg">
							<p>#{_errMsg}</p>
						</a:repeat>
					</s:div>
				</s:div>
	</a:outputPanel>
	
	<s:fragment rendered="#{createContractDetailsWizard.showWizard()}">
	
		<s:fragment rendered="#{createContractDetailsWizard.contractsInferred()}">
			<a:outputPanel layout="none" id="noLayoutContractsListPre">
				<ui:include src="addContractDetails_contractsTable.xhtml">
					<ui:param name="divId" value="Pre"/>
				</ui:include>	
			</a:outputPanel>
				
			<a:outputPanel layout="none" id="noLayoutCmptListPre">
				<ui:include src="addContractDetails_cmptsTable.xhtml">
					<ui:param name="divId" value="Pre"/>
				</ui:include>
			</a:outputPanel>
		</s:fragment>
		<s:fragment rendered="#{not createContractDetailsWizard.contractsInferred()}">
				
			<a:outputPanel layout="none" id="noLayoutCmptListPost">
				<ui:include src="addContractDetails_cmptsTable.xhtml">
					<ui:param name="divId" value="Post"/>
				</ui:include>
			</a:outputPanel>
			<a:outputPanel layout="none" id="noLayoutContractsListPost">
				<ui:include src="addContractDetails_contractsTable.xhtml">
					<ui:param name="divId" value="Post"/>
				</ui:include>	
			</a:outputPanel>
		</s:fragment>
			

	   	
		<a:outputPanel layout="block" id="activateContractDtlsPanel">	
			<s:div id="contractInactiveAlertId" styleClass="alert" rendered="#{not empty createContractDetailsWizard.parentContract and createContractDetailsWizard.bulkInstance.catLifecycle.label eq 'Active' and not createContractDetailsWizard.parentContractActive}">
				<p>You can finish creating the Agreement Details now, but you need to activate the Agreement before you can Activate the details.</p>
			</s:div>			
		</a:outputPanel>
		<a:outputPanel layout="none" id="editContractDtlsPanel">
			<s:div id="titlePanelDiv" rendered="#{not empty createContractDetailsWizard.selectedCmptsList}"> 
				<div class="title change">
		        	<h1>Agreement Details Info</h1>
		        	<p>Help the system fill out basic information about your Agreement Details.</p>
		    	</div>
	    	</s:div>
			<s:div id="catTargetCmptsdiv" rendered="#{createContractDetailsWizard.cmptsNotTargeted}">
				<s:decorate id="catTargetCmptstempId" template="../layout/edit.xhtml">
					<ui:define name="label">Target Components</ui:define>
					<h:selectOneMenu name="catTargetCmptsField"  value="#{createContractDetailsWizard.targetComponentsValue}"	required="true">
						<s:selectItems itemValue="#{i.value}" label="#{i.label}" value="#{listsForEnums.yesNo}" var="i" />					
					</h:selectOneMenu>
					<span class="comments"><h:outputText value="#{createContractDetailsWizard.cmptsNotTargetedCount}"/> of the components you chose are not marked as targeted for inclusion in JSTOR. You won't be able to add them to an Agreement until they are marked as targeted. Do you want the system to try
								to mark them as targeted?</span>
				</s:decorate>
			</s:div>
			<s:div id="catLifecyclediv" rendered="true">				
				<s:decorate id="catLifecycleId" template="../layout/edit.xhtml">
					<ui:define name="label">Agreement Details Lifecycle</ui:define>
					<h:selectOneMenu name="catLifecycleSelect" value="#{createContractDetailsWizard.bulkInstance.catLifecycle}" required="true">
						<s:selectItems itemValue="#{i}" label="#{i.label}"	noSelectionLabel="Choose..." value="#{listsForEnums.catContractDtls_Lifecycle_createList}" var="i"/>
						<a:support event="onchange" reRender="activateContractDtlsPanel" ajaxSingle="true" status="globalWaitStatus" limitToList="true"/>		
					</h:selectOneMenu>				
					<span class="comments">Set the starting lifecycle state for your new Agreement Details. Choose <strong>Active</strong> if JSTOR has countersigned
						the Agreement/Amendment. Choose <strong>LOI Signed</strong> if you are confident that the publisher will eventually sign the Agreement/Amendment. Choose <strong>New</strong> and advance the lifecycle later if you are uncertain.
					</span>
				</s:decorate>
			</s:div>
		</a:outputPanel>
	
	</s:fragment>
	
    </div>
     <div class="push"></div>                     
	<a:commandLink styleClass="button" value="Quit" limitToList="true" action="#{createContractDetailsWizard.createReset}" rendered="#{createContractDetailsWizard.showWizard()}"
		oncomplete="#{rich:component('addContractDtlsQuit')}.show();"  status="globalWaitStatus" ignoreDupResponses="true"/>
		             
	<a:commandLink styleClass="button" value="Quit" limitToList="true" action="#{createContractDetailsWizard.createReset}" rendered="#{not createContractDetailsWizard.showWizard()}"
		oncomplete="#{rich:component('addContractDtlsQuit')}.hide(); javascript:location.reload(true)"  status="globalWaitStatus" ignoreDupResponses="true"/>
	
	<a:commandLink styleClass="button right" value="Continue" status="globalWaitStatus" ignoreDupResponses="true" rendered="#{createContractDetailsWizard.showWizard()}"
			action="#{createContractDetailsWizard.bulkNext}" reRender="addContractDtlsWizard" limitToList="true"/>
	
	
	</div>
</ui:composition>
