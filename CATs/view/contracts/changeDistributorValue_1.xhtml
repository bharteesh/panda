<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:dui="http://openorganize.com/platform/dui">

	<h2>
		<h:outputText value="#{changeDistributorValueWizard.wizardTitle}" />
	</h2>

	<div id="step1">
		<ul class="steps">
			<li class="selected">1. Change</li>
			<li class="disabled">2. Results</li>
		</ul>


		<div class="cluster smart">

			<p>Please select a new distributor.</p>

			<s:fragment>

				<s:div id="chooseContractsFragment">
					<h:inputText id="default_search_catContractsList"
						value="#{catPublishersList.catPublishers.catName}" size="60"
						onchange="return false;" />

					<a:commandLink styleClass="button filter"
						value="Filter List on Publisher Name"
						action="#{changeDistributorValueWizard.narrowList(rich:findComponent('default_search_catContractsList').value)}"
						reRender="chooseContractsFragment" status="globalWaitStatus" />

					<div class="scroller">
						<rich:panel>
							<f:facet name="header">
								<h:outputText value="Contracts (#{catContractsList.resultCount})" />
							</f:facet>
						</rich:panel>


						<rich:dataTable id="contracts" value="#{catContractsList.resultList}"
							var="_catContracts">
							<rich:column styleClass="checkBoxes" headerClass="checkBoxes">
								<h:selectBooleanCheckbox styleClass="entity_checkbox"
									value="#{changeDistributorValueWizard.selectionsForEntities[_catContracts]}"
									onclick="emulateRadios(this, 'entity_checkbox');" />
							</rich:column>

							<cats:wizardColumn entityList="#{catContractsList}"
								propertyLabel="ID" propertyName="id" propertyPath="catContracts.id"
								propertyValue="#{catContractsList.catContracts.id}" reRender="contracts"
								value="#{_catContracts.id}" />
							<cats:wizardColumn entityList="#{catContractsList}"
								propertyLabel="Name" propertyName="catContracts.publisherValue"
								propertyPath="#{catContracts.publisherValue}"
								propertyValue="#{catContractsList.catContracts.publisherValue}"
								reRender="contracts" value="#{_catContracts.publisherValue}" />
							<cats:wizardColumn entityList="#{catContractsList}"
								propertyLabel="Type" propertyName="catContracts.catType"
								propertyPath="#{catContracts.catType}"
								propertyValue="#{catContractsList.catContracts.catType.label}"
								reRender="contracts" value="#{_catContracts.catType.label}" />
							<cats:wizardColumn
								entityList="#{catContractsList}"
								propertyLabel="Date Signed"
								propertyName="dateSigned"
								propertyPath="catContracts.catAgreementDate"
								propertyValue="#{catContractsList.catContracts.catAgreementDate}"
								reRender="contracts"
								value="#{_catContracts.catAgreementDate}">
								<s:convertDateTime type="date" pattern="yyyy/MM/dd"/>
							</cats:wizardColumn>	
						</rich:dataTable>
					</div>
				</s:div>

			</s:fragment>
	</div>

			<div class="push"></div>

			<a:commandLink styleClass="button" value="Quit"
				status="globalWaitStatus" ignoreDupResponses="true"
				ajaxSingle="true" limitToList="true"
				oncomplete="#{rich:component('changeDistributorValueQuitPanel')}.show(); return false;">
			</a:commandLink>

			<a:commandLink styleClass="button right" value="Save"
				limitToList="true" status="globalWaitStatus"
				onclick="if(checkRadios('entity_checkbox', 'Please select an entry') == false) {return false}"
				ignoreDupResponses="true" action="#{changeDistributorValueWizard.next()}"
				reRender="changeDistributorValueForm" />
		</div>
</ui:composition>

