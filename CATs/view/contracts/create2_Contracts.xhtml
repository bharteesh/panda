<ui:composition
xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
      xmlns:dui="http://openorganize.com/platform/dui"
>

	<h2><h:outputText value="#{createContractsWizard.createTitle}" /></h2>
	
		<div id="step1">
		<ul class="steps">
		    	<li class="disabled">1. Info</li>
			    <li class="selected">2. Results</li>
		</ul>
		<div class="cluster smart">

		  <div class="title results">
			<h1><h:outputText value="Agreements (#{createContractsWizard.createdContractsList.size})"/></h1>
			<p><h:outputText value="You successfully created the following Agreement:"/></p>
		  </div>	
		  


			<rich:dataTable id="agreementList" 
	            			 var="agmt"
	                      	 value="#{createContractsWizard.createdContractsList}" >
	                <rich:column>
	                    <f:facet name="header">Publishers</f:facet>	                    
	                    <s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
							<f:param name="id" value="#{agmt.id}"/>
							<ui:repeat value="#{createContractsWizard.createContractsInstance.catPublishers.toArray()}" var="_pub">
	                    		<h:outputText value="#{_pub.catName}"/><h:outputText value="; "/>
	                    	</ui:repeat>
	                    </s:link>
	                </rich:column>
	                <rich:column>
	                    <f:facet name="header">Agreement Type</f:facet>
	                    <s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
							<f:param name="id" value="#{agmt.id}"/>
	                    	<h:outputText value="#{agmt.catType.label}"/>
	                    </s:link>
	                </rich:column>
	                <rich:column>
	                    <f:facet name="header">Lifecycle</f:facet>
	                    <s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
							<f:param name="id" value="#{agmt.id}"/>
	                  		<h:outputText value="#{agmt.catLifecycle.label}"/>
	                  	</s:link>
	                </rich:column>
	                <rich:column>
	                    <f:facet name="header">Agreement Date Signed</f:facet>	                    
	                    <s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
							<f:param name="id" value="#{agmt.id}"/>
	                    	<h:outputText value="#{agmt.catAgreementDate}"/>
	                    </s:link>
	                </rich:column>
	                <rich:column>
	                    <f:facet name="header">ID</f:facet>
	                    <s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
							<f:param name="id" value="#{agmt.id}"/>
	                    	<h:outputText value="#{agmt.id}"/>
	                    </s:link>
	                </rich:column>
			</rich:dataTable>
			</div>

			<div class="push"></div>		

       		<a:commandLink styleClass="button right" value="Return"
	   			eventsQueue="#{divParam}eventsQueue" status="globalWaitStatus"
				action="#{createContractsWizard.createReset}" 
				rendered="#{empty pageURL}"
				oncomplete="#{rich:component('createContractsPanel')}.hide();javascript:location.reload(true);"
				ajaxsingle="true" limitToList="true"/>
			
			<a:commandLink styleClass="button right" value="Return"
	   			eventsQueue="#{divParam}eventsQueue" status="globalWaitStatus"
				action="#{createContractsWizard.createReset}" 
				oncomplete="#{rich:component('createContractsPanel')}.hide(); javascript:location.href=formatURL(location.href,'#{selectedTab}');"
				rendered="#{not empty pageURL}"
				ignoreDupResponses="true"
				ajaxsingle="true" limitToList="true"/>
			
			
			</div>
</ui:composition>

