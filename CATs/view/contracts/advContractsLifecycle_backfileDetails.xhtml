<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:z="http://www.qualcomm.com/jsf/core"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:rich="http://richfaces.org/rich"
	  xmlns:a="http://richfaces.org/a4j"
	  xmlns:s="http://jboss.com/products/seam/taglib">

<rich:dataTable id="#{divId}catCmptsContractDtlsBFTbl" styleClass="scroller"
				var="catContractDtls" value="#{contractsLifecycleWizard.contractDtlsValid}">					
					<rich:column>
						<f:facet name="header">Set Name</f:facet>
						<h:outputText value="#{catContractDtls.catCmpts.setsValue}"></h:outputText>
					</rich:column>
					<rich:column>
					<f:facet name="header">Component <br/>Name</f:facet>
						<h:outputText value="#{catContractDtls.catCmpts.catName}"></h:outputText>
					</rich:column>
					<rich:column>
					<f:facet name="header">Backfile <br/>Summary</f:facet>
						<h:outputText value="#{catContractDtls.catCmpts.cspOverallOnboardingStatus}"></h:outputText>
					</rich:column>	
					<rich:column>
					<f:facet name="header">CSP <br/>Participant</f:facet>
						<h:outputText value="#{catContractDtls.catCmpts.catHasCspRelationship ? 'Yes' : 'No'}"></h:outputText>
					</rich:column>					
					<rich:column styleClass="datestyle" rendered="#{contractsLifecycleWizard.newLifecycleValue eq 'Terminated'}">
						<f:facet name="header">Termination Date</f:facet>					
						<rich:calendar  enableManualInput="true" datePattern="yyyy/MM/dd" disabled="false" id="catContractDtlsBfTerminationDateCal" 
										value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catTerminationDate}">
						</rich:calendar>						
					</rich:column>	
										
					<rich:column styleClass="datestyle" rendered="#{contractsLifecycleWizard.newLifecycleValue eq 'Declined'}">
						<f:facet name="header">Declined Date</f:facet>					
						<rich:calendar   enableManualInput="true" datePattern="yyyy/MM/dd" disabled="false" id="catContractDtlsDeclinedDateCal" 
										value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catDateDeclined}">
						</rich:calendar>						
					</rich:column>				
					<rich:column styleClass="required #{invalid?'error':''}" rendered="#{contractsLifecycleWizard.newLifecycleValue eq 'Declined'}">
						<f:facet name="header">Declined By</f:facet>					
						<h:selectOneMenu name="catDeclinedBy" value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catDeclinedBy}" required="true" >
							<f:selectItem itemLabel="JSTOR" itemValue="JSTOR"/>
							<f:selectItem itemLabel="Publisher" itemValue="Publisher"/> 	 	
						</h:selectOneMenu>						
					</rich:column>					
					<rich:column rendered="#{contractsLifecycleWizard.newLifecycleValue eq 'Declined'}">
						<f:facet name="header">Reason Declined</f:facet>					
							<h:inputTextarea cols="20" id="catContractDtlsReasonDeclined2" rows="2" value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catDeclinedNotes}"/>						
					</rich:column>	
					<rich:column styleClass="datestyle" rendered="#{contractsLifecycleWizard.newLifecycleValue eq 'Active'}">
						<f:facet name="header">Date Added to <br/>Agreement</f:facet>					
						<rich:calendar  enableManualInput="true" datePattern="yyyy/MM/dd" disabled="false" id="catContractDtlsEffectDateCal" 
										value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catEffectiveDate}">
						</rich:calendar>						
					</rich:column>
					<rich:column styleClass="required #{invalid?'error':''}" rendered="#{contractsLifecycleWizard.newLifecycleValue eq 'Likely' or 
											contractsLifecycleWizard.newLifecycleValue eq 'Active'}">
						<f:facet name="header">Coverage</f:facet>
							<h:selectOneRadio styleClass="coverage" required="true" value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catAllOrPartOfCmpt}" layout="pageDirection">
								<s:selectItems itemValue="#{i}" label="#{i.label}" value="#{listsForEnums.catContractDtls_AllOrPartOfCmpt}" var="i"/>
								<a:support event="onclick" reRender="catContractDtlsRange1" ajaxSingle="true" status="globalWaitStatus"  limitToList="true"/>
							</h:selectOneRadio>
							<h:inputText id="catContractDtlsRange1" value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catContentCovered}" 
											disabled="#{not contractsLifecycleWizard.enableContractDtlsRangeInput(catContractDtls)}"/>				
						
					</rich:column>
					<rich:column styleClass="datestyle required #{invalid?'error':''}" rendered="#{contractsLifecycleWizard.newLifecycleValue eq 'Likely' or 
																	contractsLifecycleWizard.newLifecycleValue eq 'Active'}">
						<f:facet name="header">BF <br/>Participation <br/>Date</f:facet>
						<h:outputText value="#{catContractDtls.catCmpts.catParticipationDate}" rendered="#{not empty catContractDtls.catCmpts.catParticipationDate}"><s:convertDateTime type="date" pattern="yyyy/MM/dd"/></h:outputText>
						<rich:calendar  datePattern="yyyy/MM/dd" rendered="#{empty catContractDtls.catCmpts.catParticipationDate and contractsLifecycleWizard.newLifecycleValue eq 'Likely'}" required="true"
										id="catContractDtlsBFPartcpDate1Cal" value="#{catContractDtls.catCmpts.catParticipationDate}" disabled="true"></rich:calendar>
						<rich:calendar  enableManualInput="true" datePattern="yyyy/MM/dd" rendered="#{empty catContractDtls.catCmpts.catParticipationDate and contractsLifecycleWizard.newLifecycleValue eq 'Active'}" required="true"
										id="catContractDtlsBFPartcpDate2Cal" value="#{catContractDtls.catCmpts.catParticipationDate}" disabled="false">
						</rich:calendar>
					</rich:column>
					
					<rich:column rendered="#{contractsLifecycleWizard.newLifecycleValue eq 'Active'}">
						<f:facet name="header">BF Full <br/>Rights <br/>Obtained</f:facet>
							<h:outputText value="#{catContractDtls.catCmpts.catRightsObtained ? 'Yes' : 'No'}" rendered="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catCmpts.catRightsObtained}"/>
							<h:selectOneMenu value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catCmpts.catRightsObtained}" rendered="#{not contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catCmpts.catRightsObtained}">
								<s:selectItems itemValue="#{i.value}" label="#{i.label}" value="#{listsForEnums.yesNo}" var="i"/>								
							</h:selectOneMenu>
					</rich:column>
					<rich:column rendered="#{contractsLifecycleWizard.newLifecycleValue eq 'Active'}">
						<f:facet name="header">Exclusions</f:facet>
							<h:outputText value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catCmpts.catRightsExclusions ? 'Yes' : 'No'}" rendered="#{catContractDtls.catCmpts.catRightsExclusions}"/>
							<h:selectOneMenu value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catCmpts.catRightsExclusions}" rendered="#{not catContractDtls.catCmpts.catRightsExclusions}">
								<s:selectItems itemValue="#{i.value}" label="#{i.label}" value="#{listsForEnums.yesNo}" var="i"/>
								<a:support event="onchange" reRender="catContractDtlsExclRange" ajaxSingle="true" status="globalWaitStatus" limitToList="true"/>		
							</h:selectOneMenu>
					</rich:column>
					<rich:column rendered="#{contractsLifecycleWizard.newLifecycleValue eq 'Active'}">
						<f:facet name="header">Excluded Range</f:facet>					
						<h:inputText id="catContractDtlsExclRange" value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catCmpts.catExcludedRange}" disabled="#{not contractsLifecycleWizard.enableExcludedRangeInput(catContractDtls.catCmpts)}"></h:inputText>
					</rich:column>					
					<rich:column styleClass="required #{invalid?'error':''}" rendered="#{contractsLifecycleWizard.newLifecycleValue eq 'Likely' or 
											contractsLifecycleWizard.newLifecycleValue eq 'Active'}">
						<f:facet name="header">Why no <br/>Agreement?</f:facet>					
						<h:inputTextarea id="catContractDtlsNoLicensor" required="true" value="#{contractsLifecycleWizard.contractDtlsInstanceMap[catContractDtls].catReasonLicensorNotReqd}" disabled="#{not contractsLifecycleWizard.parentPubJstor}"/>
					</rich:column>	
					
			</rich:dataTable>	
</ui:composition>