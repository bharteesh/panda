<s:div id="#{divId}" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:cats="http://www.ithaka.org/cats">

	<div class="smart">
		<div class="header">
			<div class="left">
				<span class="museo">
					<h:outputText
						value="Agreement Details (#{catContractsHome.instance.getContractDetailsList(conType).size})" />
				</span> <a:commandLink value="X" action="#{sortFiltBean.resetSortFilt('contDtls'.concat(divId))}" ignoreDupResponses="true" status="globalWaitStatus"  reRender="#{tableId}" styleClass="button wizard"  limitToList="true"/>
			</div>	
			
			<div class="right">
				<s:fragment rendered="#{not empty catContractsHome.instance.contractDetailsList}">											
					<h:selectOneMenu id="#{divId}contDtlsBulkOperationsSelect" value="#{contractDetailsWizard.wizardType}"
						onfocus="if ( ! checkForSave() ) { return false ; }">
						<a:support 
							event="onchange" 
							action="#{contractDetailsWizard.prepBulkOperation()}"
							reRender="contDtlsChangeAttrPanels, contDtlsLifecycleOperationsPanels"					 
							oncomplete="if ( #{rich:element(''.concat(divId).concat('contDtlsBulkOperationsSelect'))}.options[this.options.selectedIndex].value == 'RIDERS' )	{									
											 #{rich:component('contDtlsAttrUpdatePanel')}.show();	
										} ;
										if ( #{rich:element(''.concat(divId).concat('contDtlsBulkOperationsSelect'))}.options[this.options.selectedIndex].value == 'CDLIFECYCLE' )	{									
											 #{rich:component('contLifecycleUpdatePanel')}.show();	
										} ; return false; "
							status="globalWaitStatus"
							limitToList="true"
							/>
						<s:selectItems value="#{contractDetailsWizard.bulkOperationsNames}" var="b"
							label="#{contractDetailsWizard.bulkOperations[b]}" itemValue="#{b}"
							noSelectionLabel="Bulk Operations" />
					</h:selectOneMenu>
				</s:fragment>
				
				<a:commandLink 
							onclick="if ( ! checkForSave() ) { return false ; }" 
							id="#{divId}createContractDtlsEditButton"
							ignoreDupResponses="true"
						    action="#{createContractDetailsWizard.prepCreateOperationFromContract(catContractsHome.instance)}"
							value="Add Agreement Detail"
							reRender="addContractDtlsModalPanels" 
							disabled="#{!s:hasPermission(catContractsHome.instance, 'add_reln catContractDtlses')}"
							oncomplete="Richfaces.showModalPanel('addContractDtlsPanel');"
							styleClass="button wizard #{!s:hasPermission(catContractsHome.instance, 'add_reln catContractDtlses') ? 'disabled' : ''}"
							status="globalWaitStatus"
							limitToList="true">
				</a:commandLink>		
			</div>
		</div>		
				
		<rich:dataTable id="#{tableId}" var="_catContractDetails"
			value="#{catContractsHome.instance.contractDetailsList}"
			rendered="#{not empty catContractsHome.instance.contractDetailsList}">

			
			 
			<rich:column 
				rendered="#{not empty contractDetailsWizard.bulkOperationsNames}">
					<f:facet name="header">
						<input type="checkbox" id="select_all_checkbox"
								name="select_all_checkbox"
								onclick="if ( this.checked ) { jQuery('.#{divId}bulk_checkbox').each(function(){ this.checked = true; }); } else { jQuery('.#{divId}bulk_checkbox').each(function(){ this.checked = false; }); }" />
					</f:facet>			
					<span onclick="cancelEventBubbling(event);">		
						<h:selectBooleanCheckbox styleClass="#{divId}bulk_checkbox"
							value="#{contractDetailsWizard.selections[_catContractDetails]}" />		
					</span>				
			</rich:column>

			<rich:column id="contDetailContractTypeId" sortBy="#{_catContractDetails.catContracts.catType}"
				filterBy="#{_catContractDetails.catContracts.catType}" sortable="true" width="50px"
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['contractsType_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['contractsType_filterValue']}">
				<f:facet name="header">
					<h:outputText value="Agreement Type" />
				</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.catContracts.catType.label}"/>
				</s:link>				
			</rich:column>

			<rich:column id="contDetailPublisherName" sortBy="#{_catContractDetails.catContracts.publisherValue}"
				filterBy="#{_catContractDetails.catContracts.publisherValue}" sortable="true" width="60px"
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['pubName_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['pubName_filterValue']}">
				<f:facet name="header">
					<h:outputText value="Publisher Name" />
				</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.catContracts.publisherValue}"/>
				</s:link>		
			</rich:column>

			<rich:column id="contDetailSets" sortBy="#{_catContractDetails.catCmpts.setsValue}"
				filterBy="#{_catContractDetails.catCmpts.setsValue}" sortable="true" width="50px"
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['sets_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['sets_filterValue']}">
				<f:facet name="header">
					<h:outputText value="Sets" />
				</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.catCmpts.setsValue}"/>
				</s:link>	
			</rich:column>

			<rich:column id="contDetailCmptId" sortBy="#{_catContractDetails.catCmpts.id}"
				filterBy="#{_catContractDetails.catCmpts.id}" sortable="true" width="50px"
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['cmpts_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['cmpts_filterValue']}">
				<f:facet name="header">
					<h:outputText value="Component ID" />
				</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.catCmpts.id}"/>
				</s:link>	
			</rich:column>

			<rich:column id="contDetailCmptName" sortBy="#{_catContractDetails.catCmpts.catName}"
				filterBy="#{_catContractDetails.catCmpts.catName}" sortable="true" width="50px" 
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['cmptsName_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['cmptsName_filterValue']}">
				<f:facet name="header">
					<h:outputText value="Component Name" />
				</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.catCmpts.catName}"/>
				</s:link>	
			</rich:column>

			<rich:column id="contDetailLifeCycle" sortBy="#{_catContractDetails.catLifecycle}"
				filterBy="#{_catContractDetails.catLifecycle}" sortable="true" width="50px" 
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['catLifecycle_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['catLifecycle_filterValue']}">
				<f:facet name="header">
					<h:outputText value="Lifecycle" />
				</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.catLifecycle.label}"/>
				</s:link>	
			</rich:column>

			<rich:column id="contDetailOutcome" sortBy="#{_catContractDetails.catOutcome}"
				filterBy="#{_catContractDetails.catOutcome}" sortable="true" width="50px"
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['catOutcome_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['catOutcome_filterValue']}">
				<f:facet name="header">
					<h:outputText value="Outcome" />
				</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.catOutcome.label}"/>
				</s:link>	
			</rich:column>

			<rich:column id="contDetailEffectDate" sortBy="#{_catContractDetails.catEffectiveDate}"
				filterBy="#{_catContractDetails.catEffectiveDate}" sortable="true" width="50px"
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['catEffectiveDate_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['catEffectiveDate_filterValue']}">
				<f:facet name="header">
					<h:outputText value="Effective Date" />
				</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.catEffectiveDate}"/>
				</s:link>	
			</rich:column>

			<rich:column id="contDetailAllPart" sortBy="#{_catContractDetails.catAllOrPartOfCmpt}"
				filterBy="#{_catContractDetails.catAllOrPartOfCmpt}" sortable="true" width="100px" 
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['catAllOrPartOfCmpt_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['catAllOrPartOfCmpt_filterValue']}">
				<f:facet name="header">
					<h:outputText value="Covers All/Part of Component" />
				</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.catAllOrPartOfCmpt.label}"/>
				</s:link>	
			</rich:column>

			<rich:column id="contDetailContent" sortBy="#{_catContractDetails.catContentCovered}"
				filterBy="#{_catContractDetails.catContentCovered}" sortable="true" width="60px"
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['catContentCovered_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['catContentCovered_filterValue']}">
				<f:facet name="header">
					<h:outputText value="Content Covered" />
				</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.catContentCovered}"/>
				</s:link>	
			</rich:column>
			
			<rich:column id="contDetailId" sortBy="#{_catContractDetails.id}"
				filterBy="#{_catContractDetails.id}" sortable="true" width="50px"
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['id_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['id_filterValue']}">
				<f:facet name="header">	<h:outputText value="ID"/>	</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.id}"/>
				</s:link>				
			</rich:column>

			<rich:column id="contDetailContractId" sortBy="#{_catContractDetails.catContracts.id}"
				filterBy="#{_catContractDetails.catContracts.id}" sortable="true" width="50px"
				sortOrder="#{sortFiltBean['contDtls'.concat(divId)]['contractsId_sortOrder']}" filterValue="#{sortFiltBean['contDtls'.concat(divId)]['contractsId_filterValue']}">
				<f:facet name="header">
					<h:outputText value="Agreement ID" />
				</f:facet>
				<s:link action="#{LinkTo.linkTo}" view="/linkTo.xhtml">
					<f:param name="id" value="#{_catContractDetails.id}"/>
					<h:outputText value="#{_catContractDetails.catContracts.id}"/>
				</s:link>				
			</rich:column>

		</rich:dataTable>

	</div>

</s:div>