<ui:composition
xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
>

	<h2><h:outputText value="#{catAcqOrdersBulkOperations.bulkTitle}" /></h2>
	
		<div id="step1">
		<s:div rendered="#{catAcqOrdersBulkOperations.bulkOperationsType.equals('CHNGTYPE') or (catAcqOrdersBulkOperations.bulkOperationsType.equals('ADVANCE') and catAcqOrdersBulkOperations.isCatLifecycleOfValueOrdered(catAcqOrdersBulkOperations.bulkInstance.catLifecycle))}">
  		<ul class="steps">
				<li class="selected">1. Permissions</li>
				<li class="disabled">2. Change</li>
				<li class="disabled">3. Children</li>
				<li class="disabled">4. Results</li>
		</ul>
		</s:div>
		<s:div rendered="#{not (catAcqOrdersBulkOperations.bulkOperationsType.equals('CHNGPARENT') or catAcqOrdersBulkOperations.bulkOperationsType.equals('CHNGTYPE') or (catAcqOrdersBulkOperations.bulkOperationsType.equals('ADVANCE') and catAcqOrdersBulkOperations.isCatLifecycleOfValueOrdered(catAcqOrdersBulkOperations.bulkInstance.catLifecycle)))}">
  		<ul class="steps">
				<li class="selected">1. Permissions</li>
				<li class="disabled">2. Change</li>
				<li class="disabled">3. Additional</li>
				<li class="disabled">4. Results</li>
		</ul>
		</s:div>
		<s:div rendered="#{catAcqOrdersBulkOperations.bulkOperationsType.equals('CHNGPARENT')}">
  		<ul class="steps">
				<li class="selected">1. Permissions</li>
				<li class="disabled">2. Change</li>
				<li class="disabled">3. Select</li>
				<li class="disabled">4. Results</li>
		</ul>
		</s:div>
		
		<div class="cluster smart">

		<p><h:outputText
			value="You have selected  #{catAcqOrdersBulkOperations.bulkInvalid.size() + catAcqOrdersBulkOperations.bulkSelection.size()}   records to change." /></p>

		<s:fragment rendered="#{not empty catAcqOrdersBulkOperations.bulkInvalid}">
			<p><h:outputText
				value="You "/><em><h:outputText
				value="do not"/></em><h:outputText
				value=" have permission to change "/>
			<h:outputText
				value="#{catAcqOrdersBulkOperations.bulkInvalid.size()}" /><h:outputText
				value=" of "/> 
				<h:outputText
				value="#{catAcqOrdersBulkOperations.bulkInvalid.size() + catAcqOrdersBulkOperations.bulkSelection.size()}" /><h:outputText
				value=" records."/></p>

			<cats:dumbTableAcqOrders value="#{catAcqOrdersBulkOperations.bulkInvalid}" />
			
		</s:fragment> <s:fragment rendered="#{not empty catAcqOrdersBulkOperations.bulkSelection}">
			<p><h:outputText
				value="You have permission to change "/> 
			<h:outputText
				value="#{catAcqOrdersBulkOperations.bulkSelection.size()}" /><h:outputText
				value=" of "/>
				<h:outputText
				value="#{catAcqOrdersBulkOperations.bulkInvalid.size() + catAcqOrdersBulkOperations.bulkSelection.size()}" /><h:outputText
				value=" records. "/></p>

			<cats:dumbTableAcqOrders value="#{catAcqOrdersBulkOperations.bulkSelection}" />
		</s:fragment>

		<p>Permissions determined by the following checks:</p>
		<rich:dataOrderedList value="#{catAcqOrdersBulkOperations.bulkPermissionChecks}"
			var="_check">
			<h:outputText value="#{_check}" />
		</rich:dataOrderedList></div>


		<div class="push"></div>
		<s:fragment rendered="#{not empty catAcqOrdersBulkOperations.bulkSelection}">
			<a:commandLink styleClass="button" value="Quit" 
				eventsQueue="#{divParam}eventsQueue"
	       		status="globalWaitStatus"
				action="#{catAcqOrdersBulkOperations.bulkReset}" 
				oncomplete="#{rich:component('acqordersbulkUpdatePanel')}.hide();" 
				reRender="#{catAcqOrdersBulkOperations.bulkOpsSelectFieldId}"/>
			
			<a:commandLink styleClass="button right" value="Continue" 
				eventsQueue="#{divParam}eventsQueue"
	       		status="globalWaitStatus"
				disabled="#{empty catAcqOrdersBulkOperations.bulkSelection}"
				action="#{catAcqOrdersBulkOperations.bulkNext}" 
				reRender="acqorderswizard"/>
		</s:fragment>
		
		<s:fragment rendered="#{empty catAcqOrdersBulkOperations.bulkSelection}">
			<a:commandLink styleClass="button right" value="Return" 
				eventsQueue="#{divParam}eventsQueue"
	       		status="globalWaitStatus"
				action="#{catAcqOrdersBulkOperations.bulkReset}" 
				oncomplete="#{rich:component('acqordersbulkUpdatePanel')}.hide();" 
				reRender="#{catAcqOrdersBulkOperations.bulkOpsSelectFieldId}"/>
			
		</s:fragment>
		
		</div>
	
</ui:composition>