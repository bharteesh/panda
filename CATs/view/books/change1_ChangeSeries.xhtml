<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:dui="http://openorganize.com/platform/dui">

	<h2><h:outputText value="#{changeSeriesWizard.wizardTitle}" /></h2>

	<div id="step1">
		<ul class="steps">
			<li class="selected">1. Select</li>
			<li class="disabled">2. Results</li>
		</ul>
		<div class="cluster smart">
			<a:outputPanel layout="none" id="noLayoutErrorMsgs">
				<s:div styleClass="alert">
					<s:div rendered="#{not empty changeSeriesWizard.errorMsgs}" id="errorMsgsDiv">
						<a:repeat value="#{changeSeriesWizard.errorMsgs}" var="_errMsg">
							<p>#{_errMsg}</p>
						</a:repeat>
					</s:div>
				</s:div>
			</a:outputPanel>
			<s:div id="bookSeriesSearchField" 
				rendered="true"
				styleClass="field">
				<label>Choose Book Series </label>
				<h:inputText id="default_search_catBookSeries" 
		 			value="#{changeSeriesWizard.bookSearchFieldName}" 
		 			onchange="return false;" size="60">
		 			<a:support event="onblur"
                    	eventsQueue="changeSeriesQueue"
                    	ajaxSingle="true"
                    	limitToList="true"/>
		 		</h:inputText>
		 		<a:commandLink 
			  		 styleClass="button filter"
					 value="Filter by Main Title"
					 action="#{changeSeriesWizard.narrowBookSeriesList(rich:findComponent('default_search_catBookSeries').value)}"
					 reRender="noLayoutBookSeriesList"
					 status="globalWaitStatus" 
					 ajaxSingle="true"
					 eventsQueue="changeSeriesQueue"
					 limitToList="true"/>
			</s:div>
			
			<a:outputPanel layout="none" id="noLayoutBookSeriesList">
				
					<ui:include src="/books/changeBookSeriesTable.xhtml"/>
				
			</a:outputPanel>
		</div>
	
		<div class="push"></div>
	
		<a:commandLink styleClass="button" value="Quit"
			reRender="changeSeriesTitleForm"
			oncomplete="#{rich:component('changeSeriesQuit')}.show(); return false;"
			eventsQueue="changeSeriesQueue" status="globalWaitStatus">
		</a:commandLink> 
		
		<a:commandLink
			styleClass="button right" value="Save"
			eventsQueue="changeSeriesQueue"
            status="globalWaitStatus"
			action="#{changeSeriesWizard.performUpdateOperation(catBooksHome.getInstance())}" 
			reRender="changeSeriesTitleForm" 
			limitToList="true"/>
	
	</div>
</ui:composition>

