<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:dui="http://openorganize.com/platform/dui">

	<h2><h:outputText
		value="#{createMovingWallFlipsWizard.createTitle}" /></h2>

	<div id="step1">
	<ul class="steps">
		<li class="selected">1. Info</li>
		<li class="disabled">2. Results</li>
	</ul>
	<div class="cluster smart">
		<s:div id="chooseCmptsFragment" styleClass="field">
			<label>Choose Component </label>
			<h:inputText id="default_search_catCmptsList"
				value="#{createMovingWallFlipsWizard.cmptSearchFieldName}" onchange="return false;"
				size="60">
				<a:support event="onblur"
                    eventsQueue="addMWFlipQueue"
                    ajaxSingle="true"/>
			</h:inputText>
			<a:commandLink styleClass="button filter" value="Filter By Name"
				action="#{createMovingWallFlipsWizard.narrowList(rich:findComponent('default_search_catCmptsList').value)}"
				reRender="noLayoutCmptList, saveBtnPanel" 
				ignoreDupResponses="true" 
				status="globalWaitStatus" 
				ajaxSingle="true"
				eventsQueue="addMWFlipQueue"/>
		</s:div>
		<a:outputPanel layout="none" id="noLayoutCmptList">
			
			<rich:dataTable id="cmpts" value="#{createMovingWallFlipsWizard.cmptList}"
				var="_catCmpts" rendered="#{not empty createMovingWallFlipsWizard.cmptList}">

				<rich:column styleClass="checkBoxes" headerClass="checkBoxes">
					<s:fragment>
						<h:selectBooleanCheckbox
							styleClass="cmpts_checkbox"
							value="#{createMovingWallFlipsWizard.selectionsForCmpts[_catCmpts]}"
							onclick="emulateRadios(this, 'cmpts_checkbox');">
							<a:support event="onchange" 
								action="#{createMovingWallFlipsWizard.selectParentCmpt}"
								reRender="noLayoutCmptList, saveBtnPanel"
								eventsQueue="addMWFlipQueue"
								status="globalWaitStatus"
								ajaxSingle="true"/>
						</h:selectBooleanCheckbox>
					</s:fragment>
				</rich:column>

				<cats:wizardColumn entityList="#{catCmptsList}" propertyLabel="Name"
					propertyName="catName" propertyPath="catCmpts.catName"
					propertyValue="#{catCmptsList.catCmpts.catName}" reRender="cmpts"
					value="#{_catCmpts.catName}" />
				<cats:wizardColumn entityList="#{catCmptsList}"
					propertyLabel="Lifecycle" propertyName="catLifecycle"
					propertyPath="catCmpts.catLifecycle"
					propertyValue="#{catCmptsList.catLifecycle}" reRender="cmpts"
					value="#{_catCmpts.catLifecycle}" />

				<cats:wizardColumn entityList="#{catCmptsList}"
					propertyLabel="Sets Name" propertyName="setsValue"
					propertyPath="catCmpts.setsValue"
					propertyValue="#{catCmptsList.catCmpts.setsValue}"
					reRender="cmpts" value="#{_catCmpts.setsValue}" />


				<cats:wizardColumn entityList="#{catCmptsList}"
					propertyLabel="Publication Unit Range"
					propertyName="catPublctnUnitRange"
					propertyPath="catCmpts.catPublctnUnitRange"
					propertyValue="#{catCmptsList.catCmpts.catPublctnUnitRange}"
					reRender="cmpts" value="#{_catCmpts.catPublctnUnitRange}" />
					
				<cats:wizardColumn entityList="#{catCmptsList}"
					propertyLabel="Date Range" propertyName="catDateRange"
					propertyPath="catCmpts.catDateRange"
					propertyValue="#{catCmptsList.catCmpts.catDateRange}"
					reRender="cmpts" value="#{_catCmpts.catDateRange}" />
				
				<cats:wizardColumn entityList="#{catCmptsList}"
					propertyLabel="Print ISSN" propertyName="catPrintIssn"
					propertyPath="catCmpts.catPrintIssn"
					propertyValue="#{catCmptsList.catCmpts.catPrintIssn}"
					reRender="cmpts" value="#{_catCmpts.catPrintIssn}" />
				<cats:wizardColumn entityList="#{catCmptsList}"
					propertyLabel="On Hold" propertyName="catOnHold"
					propertyPath="catCmpts.catOnHold"
					propertyValue="#{catCmptsList.catCmpts.catOnHold}" reRender="cmpts"
					value="#{_catCmpts.catOnHold ? 'Yes' : 'No'}" />
				<cats:wizardColumn entityList="#{catCmptsList}" propertyLabel="ID"
					propertyName="id" propertyPath="catCmpts.id"
					propertyValue="#{catCmptsList.catCmpts.id}" reRender="cmpts"
					value="#{_catCmpts.id}" />
			</rich:dataTable>
			
		</a:outputPanel>
		
		<div class="title change">
			<h1>Info</h1>
			<p>Fill out basic information about the Moving Wall Flip</p>
		</div>
		<s:decorate id="catFlipToPublicYear_div" template="../layout/edit.xhtml">
			<ui:define name="label">Flip Date (a year)</ui:define>
			<h:inputText id="catFlipToPublicYear" size="4"
				value="#{createMovingWallFlipsWizard.flipToPublicYear}" required="true" >
			</h:inputText>
			<span class="comments"></span>
		</s:decorate>
	
	 </div>

	<div class="push"></div>

	<a:commandLink  styleClass="button" value="Quit" 
		oncomplete="#{rich:component('createMovingWallFlipsQuit')}.show(); return false;" 
		eventsQueue="createMovingWallFlips" 
		status="globalWaitStatus" ignoreDupResponses="true"    
		ajaxSingle="true"/>
	<a:outputPanel layout="none" id="saveBtnPanel">
		<a:commandLink value="Save"
			styleClass="button right #{(empty createMovingWallFlipsWizard.cmptsToAddTo) ? 'disabled':''}" 
			onclick="if(checkRadios('cmpts_checkbox', 'Please select a Component') == false) {return false}"
			disabled="#{empty createMovingWallFlipsWizard.cmptsToAddTo}"
			action="#{createMovingWallFlipsWizard.performCreateOperation}"
			reRender="createMovingWallFlipswizard"
			eventsQueue="createMovingWallFlips" status="globalWaitStatus"
			ignoreDupResponses="true">
		</a:commandLink>
	</a:outputPanel>
	</div>
</ui:composition>

