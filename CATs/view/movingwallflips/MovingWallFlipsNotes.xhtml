<?xml version="1.0"?>
<s:div xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:s="http://jboss.com/products/seam/taglib" xmlns:a="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich" id="notes">


  <h2>Notes</h2>
  <a:form>
	    <a:commandLink 
			ignoreDupResponses="true"
	   		value="Add Note"
	   		action="#{createMovingWallFlipsNoteWizard.prepareCreate()}"
			reRender="createMovingWallFlipsNoteWizardModal" 
			oncomplete=" #{rich:component('createMovingWallFlipsNoteWizardModal')}.show(); return false;"
			styleClass="button wizard #{!s:hasPermission(catMovingWallFlipsHome.instance, 'add_reln catMovingWallFlipNotes') ? 'disabled' : ''}"
			disabled="#{!s:hasPermission(catMovingWallFlipsHome.instance, 'add_reln catMovingWallFlipNotes')}"
			status="globalWaitStatus"
			eventsQueue="movingWallFlipsEditQueue"
			ajaxSingle="true"
			onclick=" if ( ! checkForSave() ) { return false; } "
			/>
    </a:form>
  <div class="push">	
    </div>
  <a:form>
    <s:div id="tadDivId">
      <ul class="tab">
        <li>
          <a:commandLink  styleClass="#{catMovingWallFlipsHome.notesSortOrder=='desc' ? 'selected' : ''}" reRender="tadDivId,notesId" status="globalWaitStatus"  ajaxSingle="true"  >
            <f:param name="notesSortOrder" value="desc"/>
            <h:outputText value="Newest First"/>
          </a:commandLink>
        </li>
        <li>
          <a:commandLink  styleClass="#{catMovingWallFlipsHome.notesSortOrder=='asc' ? 'selected' : ''}" reRender="tadDivId,notesId" status="globalWaitStatus"  ajaxSingle="true"  >
            <f:param name="notesSortOrder" value="asc"/>
            <h:outputText value="Oldest First"/>
          </a:commandLink>
        </li>
      </ul>
    </s:div>
    <div id="newnote"/>
    <a:outputPanel id="notesId" styleClass="allnotes">
      <rich:dataList var="_notes" value="#{catMovingWallFlipsHome.allNotes}" rows="10" id="notesList1">
        <div class="note">
          <p class="title museo">#{_notes.catTitlePart1}<i>#{_notes.catTitlePart2}</i>#{_notes.catTitlePart3}</p>
          <pre>#{_notes.catNote}</pre>
          <p class="sig">by #{_notes.catCreator} at #{_notes.catDateCreated}
         <span class="editbutton"> <a:commandLink ignoreDupResponses="true"
	   		value=""
	   		action="#{createMovingWallFlipsNoteWizard.prepareCreate(_notes)}"
			reRender="createMovingWallFlipsNoteWizardModal" 
			oncomplete="#{rich:component('createMovingWallFlipsNoteWizardModal')}.show();"
			styleClass="button wizard2 #{(_notes.parentType ne 'MOVING WALL FILP' or !roler.haveOverlappingRoles(identity.credentials.username, _notes.catCreator)) ? 'disabled' : ''}"
			disabled="#{_notes.parentType ne 'MOVING WALL FILP' or !roler.haveOverlappingRoles(identity.credentials.username, _notes.catCreator)}"
			status="globalWaitStatus"
			eventsQueue="movingWallFlipsEditQueue"
			ajaxSingle="true"
			onclick="if ( ! checkForSave() ) { return false ; }"/>
		</span>
			</p>
        </div>
      </rich:dataList>
      <rich:datascroller for="notesList1" maxPages="5" renderIfSinglePage="false">
        <f:facet name="first">
          <h:outputText value="First"/>
        </f:facet>
        <f:facet name="last">
          <h:outputText value="Last"/>
        </f:facet>
      </rich:datascroller>
    </a:outputPanel>
  </a:form>
</s:div>
