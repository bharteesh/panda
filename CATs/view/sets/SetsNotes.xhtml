<s:div id="notes" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">
    <a:form>
		<rich:dataList var="_cmpts1" value="#{catSetsHome.cmptListSortedByStartYear}">		
				<s:div id="neededSrc1" rendered="#{not empty _cmpts1.catNeededSourceList}">					
						<div class="note">
					    	<p class="title museo">Needed Source: <i>#{_cmpts1.catName}</i></p>
					    	<pre>#{_cmpts1.catNeededSourceList}</pre>
							<p class="sig">by #{_cmpts1.catNeededSourceChangeBy} at #{_cmpts1.catNeededSourceDateChange}
								<span class="editbutton"><a:commandLink ignoreDupResponses="true"
							   		value=""
							   		action="#{editCmptNeededSource.prepareEdit(_cmpts1)}"
									reRender="editNeededSourceWizardModal" 
									oncomplete="#{rich:component('editNeededSourceWizardModal')}.show();"
									styleClass="button wizard2 #{!s:hasPermission(_cmpts1, 'modify catNeededSourceList') ? 'disabled' : ''}"
									disabled="#{!s:hasPermission(_cmpts1, 'modify catNeededSourceList')}"
									status="globalWaitStatus"
									eventsQueue="setsEditQueue"
									ajaxSingle="true"
									onclick="if ( ! checkForSave() ) { return false ; }"/>
								</span>
							</p>
						</div>				
				</s:div>
				<s:div id="neededSrc2" rendered="#{empty _cmpts1.catNeededSourceList}">		
						<div class="note">
					    	<p class="title museo">Needed Source: <i>#{_cmpts1.catName}</i></p>
					    	<p>None Listed
					    		<span class="editbutton"><a:commandLink ignoreDupResponses="true"
							   		value=""
							   		action="#{editCmptNeededSource.prepareEdit(_cmpts1)}"
									reRender="editNeededSourceWizardModal" 
									oncomplete="#{rich:component('editNeededSourceWizardModal')}.show();"
									styleClass="button wizard2 #{!s:hasPermission(_cmpts1, 'modify catNeededSourceList') ? 'disabled' : ''}"
									disabled="#{!s:hasPermission(_cmpts1, 'modify catNeededSourceList')}"
									status="globalWaitStatus"
									eventsQueue="setsEditQueue"
									ajaxSingle="true"
									onclick="if ( ! checkForSave() ) { return false ; }"/></span>
					    	</p>		    	
						</div>		
				</s:div>
		</rich:dataList>
	</a:form>
	
	<a:form>
		<div class="tag">
	      <h2>Set Tags</h2>
	      <a:commandLink 
				ignoreDupResponses="true"
	    		action="#{catSetsHome.updateUsingWizard('TAG')}"
				reRender="setsBulkOperationsPanels" 
				oncomplete="Richfaces.showModalPanel('setsBulkUpdatePanel');"
				styleClass="button wizard #{!(s:hasPermission(catSetsHome.instance, 'modify catSetsTags') or s:hasPermission(catSetsHome.instance, 'add_reln catSetsTags')) ? 'disabled' : ''}"
				disabled="#{!(s:hasPermission(catSetsHome.instance, 'modify catSetsTags') or s:hasPermission(catSetsHome.instance, 'add_reln catSetsTags'))}"
				status="globalWaitStatus"
				eventsQueue="setsEditQueue"
				ajaxSingle="true"
				onclick="if ( ! checkForSave() ) { return false ; }"/>
	    </div>
	    <div class="push"></div>
	    <div class="note">
	    	<p>#{catSetsHome.getSetTagsDisplayValue()}</p>
	    </div>
	 </a:form>
    <h2>Notes</h2>
    <a:form>
	    <a:commandLink 
			ignoreDupResponses="true"
	   		value="Add Note"
	   		action="#{createSetsNoteWizard.prepareCreate()}"
			reRender="createSetNoteWizardModal" 
			oncomplete="#{rich:component('createSetNoteWizardModal')}.show(); return false;"
			styleClass="button wizard #{!s:hasPermission(catSetsHome.instance, 'add_reln catSetNotes') ? 'disabled' : ''}"
			disabled="#{!s:hasPermission(catSetsHome.instance, 'add_reln catSetNotes')}"
			status="globalWaitStatus"
			eventsQueue="setsEditQueue"
			ajaxSingle="true"
			onclick="if ( ! checkForSave() ) { return false ; }"/>
    </a:form>
    <div class="push">	
    </div>
    <a:form>
	   	<a:outputPanel id="tadDivId">
	    <ul class="tab">
	      <li>
	      	<a:commandLink  styleClass="#{catSetsHome.notesSortOrder=='desc' ? 'selected' : ''}" reRender="tadDivId,notesId" eventsQueue="setsEditQueue" ajaxSingle="true">
	      		<f:param name="notesSortOrder" value="desc"/>
	      		<h:outputText value="Newest First" /> 
	    	</a:commandLink>
	      </li>
	      <li>
	      	<a:commandLink styleClass="#{catSetsHome.notesSortOrder=='asc' ? 'selected' : ''}" reRender="tadDivId,notesId" eventsQueue="setsEditQueue" ajaxSingle="true">
	      		<f:param name="notesSortOrder" value="asc"/>
	      		<h:outputText value="Oldest First" />
	    	</a:commandLink>
	      </li>
		</ul>
	    </a:outputPanel>
	    <div id="newnote"></div>
	    <a:outputPanel  id="notesId" styleClass="allnotes">
	        <rich:dataList var="_notes" value="#{catSetsHome.allNotes}" rows="10" id="notesList1" >
		    	<div class="note">
			        <p class="title museo">#{_notes.catTitlePart1}<i>#{_notes.catTitlePart2}</i>#{_notes.catTitlePart3}</p>
			        <pre>#{_notes.catNote}</pre>
			        <p class="sig">by #{_notes.catCreator} at #{_notes.catDateCreated}
		        <span class="editbutton"><a:commandLink ignoreDupResponses="true"
			   		value=""
			   		action="#{createSetsNoteWizard.prepareEdit(_notes)}"
					reRender="createSetNoteWizardModal" 
					oncomplete="#{rich:component('createSetNoteWizardModal')}.show();"
					styleClass="button wizard2 #{(_notes.parentType ne 'SET' or !roler.haveOverlappingRoles(identity.credentials.username, _notes.catCreator)) ? 'disabled' : ''}"
					disabled="#{_notes.parentType ne 'SET' or !roler.haveOverlappingRoles(identity.credentials.username, _notes.catCreator)}"
					status="globalWaitStatus"
					eventsQueue="setsEditQueue"
					ajaxSingle="true"
					onclick="if ( ! checkForSave() ) { return false ; }"
		        /></span>
			        </p>
				</div>
		    </rich:dataList>
		    <rich:datascroller id="notesScroller1" for="notesList1" maxPages="5" renderIfSinglePage="false">
		    	<f:facet name="first">
		          	<h:outputText value="First"/>
		        </f:facet>
		        <f:facet name="last">
		            <h:outputText value="Last"/>
		        </f:facet>
			</rich:datascroller>
		</a:outputPanel>
		
    </a:form>
    
   
  </s:div>
