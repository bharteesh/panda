<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib">

	<h2><h:outputText value="#{createTitleRelationshipsWizard.bulkTitle}" /></h2>

	<div id="step1">
	<ul class="steps">
		<li class="selected">1. Permissions</li>
		<li class="disabled">2. Main</li>
		<li class="disabled">3. Select</li>
		<li class="disabled">4. Results</li>
	</ul>
	
	<div class="cluster smart">
	<p><h:outputText
				value="You have selected  #{createTitleRelationshipsWizard.cmptsBulkInvalid.size() + createTitleRelationshipsWizard.cmptsBulkSelection.size()}   records to change." /></p>
				
	<s:fragment rendered="#{createTitleRelationshipsWizard.cmptsBulkSelection.size() gt 1}"> 
		<div class="alert">
			<p class="highlight">You can access the title relationship wizard from the bulk operations menu, but you need to have just one component selected on the list. Quit this wizard, select one component on the list, and start the wizard again to choose the type of relationship and the other component. You can select either the older or newer component to start and still add any relationship.
			</p>
		</div>
	</s:fragment>
	<s:fragment rendered="#{createTitleRelationshipsWizard.cmptsBulkInvalid.size() eq 1 or createTitleRelationshipsWizard.cmptsBulkSelection.size() eq 1}">		
		
			<s:fragment rendered="#{not empty createTitleRelationshipsWizard.cmptsBulkInvalid}">
				<p>
					<h:outputText value="You " />
					<em><h:outputText value="do not" /></em><h:outputText value=" have permission to change " />
					<h:outputText value="#{createTitleRelationshipsWizard.cmptsBulkInvalid.size()}" /> <h:outputText value=" of " /> 
					<h:outputText value="#{createTitleRelationshipsWizard.cmptsBulkInvalid.size() + createTitleRelationshipsWizard.cmptsBulkSelection.size()}" />
					<h:outputText value=" records." />
				</p>
		
				<cats:dumbTableComponents value="#{createTitleRelationshipsWizard.cmptsBulkInvalid}" />
			</s:fragment> 
			<s:fragment rendered="#{not empty createTitleRelationshipsWizard.cmptsBulkSelection}">
				<p><h:outputText value="You have permission to change " /> <h:outputText
					value="#{createTitleRelationshipsWizard.cmptsBulkSelection.size()}" /><h:outputText
					value=" of " /> <h:outputText
					value="#{createTitleRelationshipsWizard.cmptsBulkInvalid.size() + createTitleRelationshipsWizard.cmptsBulkSelection.size()}" /><h:outputText
					value=" records. " /></p>
		
				<cats:dumbTableComponents value="#{createTitleRelationshipsWizard.cmptsBulkSelection}" />
			</s:fragment>
	</s:fragment>
	
	
</div>
	<div class="push"></div>
	

	<s:fragment rendered="#{empty createTitleRelationshipsWizard.cmptsBulkSelection}">	
		<a:commandLink styleClass="button right" value="Return"
			action="#{createTitleRelationshipsWizard.bulkReset}"
			oncomplete="#{rich:component('createTitleRelnshpsPanel')}.hide(); javascript:location.href=formatURL(location.href,'#{selectedTab}');"
			status="globalWaitStatus" ignoreDupResponses="true"
			rendered="#{not empty pageURL}"/>
		<a:commandLink styleClass="button right" value="Return"
			action="#{createTitleRelationshipsWizard.bulkReset}"
			oncomplete="#{rich:component('createTitleRelnshpsPanel')}.hide(); javascript:location.reload(true);"	
			status="globalWaitStatus" ignoreDupResponses="true"
			rendered="#{empty pageURL}"/>
	</s:fragment>
	<s:fragment rendered="#{not empty createTitleRelationshipsWizard.cmptsBulkSelection}">
		<a:commandLink styleClass="button" value="Quit" 
			limitToList="true" action="#{createTitleRelationshipsWizard.bulkReset}"
			oncomplete="#{rich:component('createTitleRelnshpsQuit')}.show();"
			rendered="#{createTitleRelationshipsWizard.cmptsBulkSelection.size() eq 1}"		
			status="globalWaitStatus" ignoreDupResponses="true"/>
			
		<a:commandLink styleClass="button right" value="Return" 
			limitToList="true" action="#{createTitleRelationshipsWizard.bulkReset}"
			oncomplete="#{rich:component('createTitleRelnshpsQuit')}.show();"
			rendered="#{createTitleRelationshipsWizard.cmptsBulkSelection.size() gt 1}"		
			status="globalWaitStatus" ignoreDupResponses="true"/>
		
		<a:commandLink styleClass="button right" value="Continue"
			action="#{createTitleRelationshipsWizard.bulkNext}" reRender="createTitleRelnshpsWizard" 			
			status="globalWaitStatus" ignoreDupResponses="true"
			rendered="#{createTitleRelationshipsWizard.cmptsBulkSelection.size() eq 1}"/>
	</s:fragment>
	</div>
</ui:composition>
