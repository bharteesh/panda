<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	template="../layout/list_template.xhtml">

	<ui:param name="entityType" value="bookSeries" />
	<ui:param name="moremenu" value="moremenu"/>
	
	<ui:define name="body">

		<ui:include src="../layout/tablenav.xhtml">
			<ui:param name="viewPath" value="/lists/CatBookSeriesList.xhtml"></ui:param>
			<ui:param name="entityList" value="#{catBookSeriesList}"></ui:param>
			<ui:param name="divId" value="1" />
		</ui:include>

		<a:form>

			<s:div id="header" styleclass="header">

				<div class="left">
					<span class="museo"> <h:outputText
							value="Book Series
(#{empty catBookSeriesList.resultList ? 0 : (catBookSeriesList.paginated ? catBookSeriesList.resultCount : catBookSeriesList.resultList.size)})"></h:outputText>
					</span>


					<h:selectOneMenu name="flavour"
						value="#{catBookSeriesList.flavour}">
						<s:selectItems value="#{catBookSeriesList.flavours}" var="i"
							itemValue="#{i}" label="#{catBookSeriesList.flavourLabel(i)}" />
						<a:support event="onchange"
							action="#{catBookSeriesList.updateUserSkinPreferences}"
							oncomplete="javascript: location.href='CatBookSeriesList.seam'" ignoreDupResponses="true"
							eventsQueue="bookSeriesListQueue" ajaxSingle="true" />
					</h:selectOneMenu>
					<s:link id="clearSearch" status="globalWaitStatus"
						ignoreDupResponses="true" styleClass="button wizard"
						action="#{catBookSeriesList.reset}" value="X" ajaxSingle="true"
						propagation="none"
						oncomplete="javascript: location.href='CatBookSeriesList.seam'">
						<f:param name="flavour" value="#{catBookSeriesList.flavour}" />
					</s:link>
				</div>
				<!--  
			<div class="right"><h:selectOneMenu id="catPublishersListBulkOperationsSelect"
				rendered="#{not empty catPublishersBulkOperations.bulkOperationsNames}"
    				value="#{catPublishersBulkOperations.bulkOperationsType}">
				<a:support event="onchange"
					action="#{catPublishersBulkOperations.prepBulkOperations( 'catPublishersList', 'catPublishersListBulkOperationsSelect' )}"
					reRender="catPublishersListBulkOperationsPanels,catPublishersList"
					oncomplete="if ( #{rich:element('catPublishersListBulkOperationsSelect')}.options.selectedIndex != 0 ) { #{rich:component('catPublishersListBulkUpdatePanel')}.show(); } ; return false; " />
				<s:selectItems value="#{catPublishersBulkOperations.bulkOperationsNames}" var="b"
					label="#{catPublishersBulkOperations.bulkOperations[b]}" itemValue="#{b}"
					noSelectionLabel="Bulk Operations" />
			</h:selectOneMenu></div>
-->


				<div class="right">
					<ui:include src="adhocReportSelect.xhtml">
						<ui:param name="entityQuery" value="#{catBookSeriesList}" />
					</ui:include>
						<a:commandLink id="createBookSeriesEditButton"
    				ignoreDupResponses="true"
        			eventsQueue="bkSetsListQueue"
             		status="globalWaitStatus"
         	    	ajaxSingle="true"
	        	    action="#{createBookSeriesWizard.prepCreateOperation}"
				    value="Add Book Series"
				    reRender="createBookSeriesWizardForm" 
				    oncomplete="Richfaces.showModalPanel('createBookSeriesPanel');"
                  
                    styleClass="button wizard #{!s:hasPermission(catBookSeriesList.catBookSeries, 'create CatBookSeries') ? 'disabled' : '' }"
					disabled="#{!s:hasPermission(catBookSeriesList.catBookSeries, 'create CatBookSeries')}"/>	
					
				</div>

			</s:div>
			<!-- Shows hour glass when the table is loading -->
			<div id="globalStatusDiv" style="display: none;">
				<img src="../img/Animated-Hourglass.gif" />
			</div>
			<a:status id="globalWaitStatus" forceId="true" layout="none"
				onstart="jQuery('#globalStatusDiv').fadeIn('fast')"
				onstop="jQuery('#globalStatusDiv').fadeOut('slow')" />

			<div class="push" />

			<div id="mainlistscroller">

				<h:dataTable id="catBookSeriesList" var="_catBookSeries"
					value="#{catBookSeriesList.resultList}" rowClasses="odd,even"
					styleClass="mainListClass">

					<rich:column styleClass="checkBoxes" headerClass="checkBoxes"
						rendered="#{not empty catBookSeriesBulkOperations.bulkOperationsNames}">
						<f:facet name="header">
							<h:panelGrid columns="1">
								<h:outputText value=" " />
								<input type="checkbox" id="select_all_checkbox"
									name="select_all_checkbox"
									onclick="if ( this.checked ) { jQuery('.bulk_checkbox').each(function(){ this.checked = true; }); } else { jQuery('.bulk_checkbox').each(function(){ this.checked = false; }); }" />
					
							</h:panelGrid>
						</f:facet>
						<div onclick="cancelEventBubbling(event);">
							<h:selectBooleanCheckbox styleClass="bulk_checkbox checkBoxes"
								value="#{catBookSeriesBulkOperations.selections[_catBookSeries]}" />
						</div>
					</rich:column>

					<cats:column linkToId="#{_catBookSeries.id}" styleClass="id"
						rendered="#{catBookSeriesList.listFlavour['id']}"
						entityList="#{catBookSeriesList}" propertyLabel="ID"
						propertyPath="catBookSeries.id"
						propertyValue="#{catBookSeriesList.catBookSeries.id}"
						propertyName="id" sortable="true" value="#{_catBookSeries.id}" />
					<!--	<cats:column linkToId="#{_catBookSeries.id}"
						styleClass="catCspMetadataProd"
						rendered="#{catBookSeriesList.listFlavour['catCspMetadataProd']}"
						entityList="#{catBookSeriesList}"
						propertyLabel="CSP MD Production"
						propertyPath="catBookSeries.catCspMetadataProd"
						propertyValue="#{catBookSeriesList.catBookSeries.catCspMetadataProd}"
						propertyName="catCspMetadataProd" sortable="true"
						enumList="#{listsForEnums.catBookSeries_CspMetadataProd}"
						value="#{_catBookSeries.catCspMetadataProd.label}" />
			-->
					<cats:column sortable="true" linkToId="#{_catBookSeries.id}"
						rendered="#{listFlavour['catDoi']}"
						entityList="#{catBookSeriesList}"
						propertyLabel="DOI"
						propertyPath="catBookSeries.catDoi"
						propertyValue="#{catBookSeriesList.catBookSeries.catDoi}"
						propertyName="catDoi"
						value="#{_catBookSeries.catDoi}">
					</cats:column>
					<cats:column sortable="true" linkToId="#{_catBookSeries.id}"
						rendered="#{listFlavour['catPIssn']}"
						entityList="#{catBookSeriesList}" propertyLabel="Series PISSN"
						propertyPath="catBookSeries.catPIssn"
						propertyValue="#{catBookSeriesList.catBookSeries.catPIssn}"
						propertyName="catPIssn" value="#{_catBookSeries.catPIssn}">
					</cats:column>
					<cats:column sortable="true" linkToId="#{_catBookSeries.id}"
						rendered="#{listFlavour['catEIssn']}"
						entityList="#{catBookSeriesList}" propertyLabel="Series EISSN"
						propertyPath="catBookSeries.catEIssn"
						propertyValue="#{catBookSeriesList.catBookSeries.catEIssn}"
						propertyName="catEIssn" value="#{_catBookSeries.catEIssn}">
					</cats:column>
					<cats:column sortable="true" linkToId="#{_catBookSeries.id}"
						rendered="#{listFlavour['catPublctnStatus']}"
						entityList="#{catBookSeriesList}"
						propertyLabel="Publication Status"
						propertyPath="catBookSeries.catPublctnStatus"
						propertyValue="#{catBookSeriesList.catBookSeries.catPublctnStatus}"
						propertyName="catPublctnStatus"
						enumList="#{listsForEnums.catBookSeries_PublctnStatus}"
						value="#{_catBookSeries.catPublctnStatus.label}">
					</cats:column>
					<cats:column sortable="true" linkToId="#{_catBookSeries.id}"
						rendered="#{listFlavour['catLCCN']}"
						entityList="#{catBookSeriesList}" propertyLabel="LCCN"
						propertyPath="catBookSeries.catLCCN"
						propertyValue="#{catBookSeriesList.catBookSeries.catLCCN}"
						propertyName="catLCCN" value="#{_catBookSeries.catLCCN}">
					</cats:column>
					<cats:column linkToId="#{_catBookSeries.id}"
						rendered="#{catBookSeriesList.listFlavour['mainTitle']}"
						entityList="#{catBookSeriesList}" propertyLabel="Main Title"
						propertyPath="catBookSeries.mainTitle"
						propertyValue="#{catBookSeriesList.catBookSeries.mainTitle}"
						propertyName="mainTitle" sortable="true"
						value="#{_catBookSeries.mainTitle}" rollup="true" >
					</cats:column>
					<cats:column linkToId="#{_catBookSeries.id}"
						rendered="#{catBookSeriesList.listFlavour['seriesPublishers']}"
						entityList="#{catBookSeriesList}" propertyLabel="Publisher"
						propertyPath="catBookSeries.seriesPublishers"
						propertyValue="#{catBookSeriesList.catBookSeries.seriesPublishers}"
						propertyName="seriesPublishers" sortable="true"
						value="#{_catBookSeries.seriesPublishers}" rollup="true">
					</cats:column>
					<cats:column linkToId="#{_catBookSeries.id}" sortable="true"
						rendered="#{catBookSeriesList.listFlavour['catDateModified']}"
						entityList="#{catBookSeriesList}" propertyLabel="Date Modified"
						propertyPath="catBookSeries.catDateModified"
						propertyValue="#{catBookSeriesList.catBookSeries.catDateModified}"
						propertyName="catDateModified"
						value="#{_catBookSeries.catDateModified}">
						<s:convertDateTime type="both" pattern="yyyy/MM/dd HH:mm:ss"></s:convertDateTime>
					</cats:column>
					
					<cats:column linkToId="#{_catBookSeries.id}"
						value="#{_catBookSeries.catExclude ? 'Yes' : 'No'}"
						entityList="#{catBookSeriesList}" propertyName="catExclude"
						propertyValue="#{catBookSeriesList.catBookSeries.catExclude}"
						propertyLabel="Exclude"
						propertyPath="catBookSeries.catExclude"
						enumList="#{listsForEnums.yesNo}"
						rendered="#{catBookSeriesList.listFlavour['catExclude']}" sortable="true" />
					
					<cats:column sortable="true" linkToId="#{_catBookSeries.id}"
						rendered="#{catBookSeriesList.listFlavour['catReasonExcluded']}"
						entityList="#{catBookSeriesList}"
						propertyLabel="Reason Excluded"
						propertyPath="catBookSeries.catReasonExcluded"
						propertyValue="#{catBookSeriesList.catBookSeries.catReasonExcluded}"
						propertyName="catReasonExcluded"
						enumList="#{listsForEnums.catBookSeries_ReasonExcluded}"
						value="#{_catBookSeries.catReasonExcluded.label}">
					</cats:column> 
					
				</h:dataTable>
			</div>
		</a:form>

		<ui:include src="../layout/tablenav.xhtml">
			<ui:param name="viewPath" value="/lists/CatBookSeriesList.xhtml"></ui:param>
			<ui:param name="entityList" value="#{catBookSeriesList}"></ui:param>
			<ui:param name="divId" value="2" />
		</ui:include>

		<!-- 	<ui:include src="../bookseries/bulkm_BookSeries.xhtml">
		</ui:include> -->

		<ui:include src="../bookseries/createm_BookSeries.xhtml">
			<ui:param name="reRenderMe" value="catBookSeriesList" />
			<ui:param name="divParam" value="BookSeriesList" />
		</ui:include> 

		<!-- when used in conjunction with a BaseListFlavour, this will order the columns per the configuration order. -->
		<rich:jQuery timing="onload" name="orderColumns"
			selector="#mainlistscroller > .mainListClass > thead:first-child > tr:first-child, #mainlistscroller > .mainListClass > tbody > tr"
			query="#{catBookSeriesList.listFlavour.getColumnOrderingJQuery()}" id="orderJQuery"/>
	</ui:define>
</ui:composition>
