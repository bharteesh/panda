<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	template="../layout/list_template.xhtml">
	<ui:param name="entityType" value="disciplines" />
	<ui:param name="moremenu" value="moremenu" />

	<ui:define name="body">
		<ui:include src="../layout/tablenav.xhtml">
			<ui:param name="viewPath" value="/lists/Disciplines.xhtml"></ui:param>
			<ui:param name="entityList" value="#{catDisciplinesList}"></ui:param>
			<ui:param name="divId" value="1" />
		</ui:include>

		<a:form>
			<s:div id="header" styleclass="header">
				<div class="left"><span class="museo"><h:outputText
					value="Disciplines
					(#{empty catDisciplinesList.resultList ? 0 : (catDisciplinesList.paginated ? catDisciplinesList.resultCount : catDisciplinesList.resultList.size)})"></h:outputText>
				</span>
				<h:selectOneMenu name="flavour" value="#{catDisciplinesList.flavour}">
					<s:selectItems value="#{catDisciplinesList.flavours}" var="i"
						itemValue="#{i}" label="#{catDisciplinesList.flavourLabel(i)}" />
						<a:support event="onchange" action="#{catDisciplinesList.updateUserSkinPreferences}"
								oncomplete="this.form.submit();"
								ignoreDupResponses="true"
								eventsQueue="discsListQueue"
								ajaxSingle="true"/>			
				</h:selectOneMenu>		
			<a:commandLink  id="clearSearch" 
				status="globalWaitStatus" ignoreDupResponses="true" 
				styleClass="button wizard" 
				action="#{catDisciplinesList.reset}" 
				value="X" 
				ajaxSingle="true"  
				oncomplete="javascript: location.href='Disciplines.seam'"/>
				</div>

				<div class="right">
          <h:selectOneMenu id="catDisciplinesListBulkOperationsSelect" rendered="#{not empty catDisciplinesBulkOperations.bulkOperationsNames}" value="#{catDisciplinesBulkOperations.bulkOperationsType}">
            <a:support event="onchange" action="#{catDisciplinesBulkOperations.prepBulkOperations( 'catDisciplinesList', 'catDisciplinesListBulkOperationsSelect')}" 
            reRender="catDisciplinesListBulkOperationsPanels,catDisciplinesList" 
            status="globalWaitStatus" 
            oncomplete="if ( #{rich:element('catDisciplinesListBulkOperationsSelect')}.options.selectedIndex != 0 ) { #{rich:component('catDisciplinesBulkPanel')}.show(); } ; return false; " 
            ignoreDupResponses="true"/>
            <s:selectItems value="#{catDisciplinesBulkOperations.bulkOperationsNames}" var="b" label="#{catDisciplinesBulkOperations.bulkOperations[b]}" itemValue="#{b}" noSelectionLabel="Bulk Operations"/>
          </h:selectOneMenu>
				<a:commandLink id="createDisciplinesEditButton"
				status="globalWaitStatus" ignoreDupResponses="true"
			    action="#{createDisciplinesWizard.prepCreateOperation('CREATEDISCIPLINES')}"
				value="Add Discipline"
				reRender="createDisciplinesOperationsPanels,catDisciplinesList" 
				oncomplete="Richfaces.showModalPanel('createDisciplinesPanel');"
				styleClass="button wizard"
				ajaxSingle="true"/>
				</div>
			</s:div>
			<!-- Shows hour glass when the table is loading -->
			<div id="globalStatusDiv" style="display: none;"><img
				src="../img/loading.gif" /></div>
			<a:status id="globalWaitStatus" forceId="true" layout="none"
				onstart="jQuery('#globalStatusDiv').fadeIn('fast')"
				onstop="jQuery('#globalStatusDiv').fadeOut('slow')" />
				<div class="push" />
				<div id="mainlistscroller">
				<h:dataTable id="catDisciplinesList" var="_catDisciplines"
					value="#{catDisciplinesList.resultList}" rowClasses="even,odd"
					styleClass="mainListClass">
          <rich:column styleClass="checkBoxes" headerClass="checkBoxes" rendered="#{not empty catDisciplinesBulkOperations.bulkOperationsNames}">
            <f:facet name="header">
              <h:panelGrid columns="1">
                <h:outputText value=" "/>
                <input type="checkbox" id="select_all_checkbox" name="select_all_checkbox" onclick="toggleCheckboxes(this.checked, 'bulk_checkbox');"/>
              </h:panelGrid>
            </f:facet>
            <div onclick="cancelEventBubbling(event);">
              <h:selectBooleanCheckbox styleClass="bulk_checkbox checkBoxes" value="#{catDisciplinesBulkOperations.selections[_catDisciplines]}"/>
            </div>
          </rich:column>

									<cats:column 
					linkToId="#{_catDisciplines.id}" 
					value="#{_catDisciplines.catName}"
					entityList="#{catDisciplinesList}" 
					propertyLabel="Name" 
					propertyName="catName"
					propertyValue="#{catDisciplinesList.catDisciplines.catName}"
					propertyPath="catDisciplines.catName"
					rendered="#{true}"
					sortable="true" />
					
				
					<cats:column linkToId="#{_catDisciplines.id}" entityList="#{catDisciplinesList}" propertyLabel="Type"
					propertyName="id" propertyPath="catDisciplines.catType"
					propertyValue="#{catDisciplinesList.catDisciplines.catType}"
					rendered="#{true}" sortable="true"
					enumList="#{listsForEnums.catDisciplines_Type}"
					value="#{_catDisciplines.catType.label}" />
					
				<cats:column 
					linkToId="#{_catDisciplines.id}" 
					value="#{_catDisciplines.negotiatorsValue}"
					entityList="#{catDisciplinesList}" 
					propertyLabel="Negotiator" 
					propertyName="negotiatorsValue"
					propertyValue="#{catDisciplinesList.catDisciplines.negotiatorsValue}"
					propertyPath="catDisciplines.negotiatorsValue"
					rendered="#{true}" 
					rollup="true"
					sortable="true" />
												<cats:column 
					linkToId="#{_catDisciplines.id}" 
					value="#{_catDisciplines.catLtmCode}"
					entityList="#{catDisciplinesList}" 
					propertyLabel="LTM Code" 
					propertyName="catLtmCode"
					propertyValue="#{catDisciplinesList.catDisciplines.catLtmCode}"
					propertyPath="catDisciplines.catLtmCode"
					rendered="#{true}" sortable="true" />
				<cats:column linkToId="#{_catDisciplines.id}" entityList="#{catDisciplinesList}" propertyLabel="ID"
					propertyName="id" propertyPath="catDisciplines.id"
					propertyValue="#{catDisciplinesList.catDisciplines.id}"
					rendered="#{true}" sortable="true"
					value="#{_catDisciplines.id}" />


					
					
					<cats:column linkToId="#{_catDisciplines.id}" sortable="true" rendered="#{true}"
					entityList="#{catDisciplinesList}"
					propertyLabel="Date Modified"
					propertyPath="catDisciplines.catDateModified"
					propertyValue="#{catDisciplinesList.catDisciplines.catDateModified}"
					propertyName="catDateModified"
					value="#{_catDisciplines.catDateModified}">
					<s:convertDateTime type="both" pattern="yyyy/MM/dd HH:mm:ss"></s:convertDateTime>
				</cats:column>
					
		
					
					
				</h:dataTable>
				</div>


		</a:form>


		<ui:include src="../layout/tablenav.xhtml">
			<ui:param name="viewPath" value="/lists/Disciplines.xhtml"></ui:param>
			<ui:param name="entityList" value="#{catDisciplinesList}"></ui:param>
			<ui:param name="divId" value="2" />
		</ui:include>

    <ui:include src="/disciplines/bulkm_Disciplines.xhtml"/>
	<ui:include src="../disciplines/createm_Disciplines.xhtml">
		   <ui:param name="reRenderMe" value="catDisciplinesList"/>
		   <ui:param name="divParam" value="disciplinesList"/>
	</ui:include>

	<rich:jQuery timing="onload" name="orderColumns"
			selector="#mainlistscroller > .mainListClass > thead:first-child > tr:first-child, #mainlistscroller > .mainListClass > tbody > tr"
			query="#{catDisciplinesList.listFlavour.getColumnOrderingJQuery()}" id="orderJQuery"/>

	</ui:define>
</ui:composition>
