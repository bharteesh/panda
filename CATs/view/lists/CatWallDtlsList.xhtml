<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	template="../layout/list_template.xhtml">
	<ui:param name="entityType" value="walldetails" />
  <ui:param name="moremenu" value="moremenu"/>

	<ui:define name="body">


		<ui:include src="../layout/tablenav.xhtml">
			<ui:param name="viewPath" value="/lists/CmptsWallDtlsList.xhtml"></ui:param>
			<ui:param name="entityList" value="#{catWallDtlsList}"></ui:param>
			<ui:param name="divId" value="1" />
		</ui:include>


		<a:form>

			<div class="header">
			<div class="left"><span class="museo"><h:outputText
				value="Wall Details (#{empty catWallDtlsList.resultList ? 0 : (catWallDtlsList.paginated ? catWallDtlsList.resultCount : catWallDtlsList.resultList.size)})" />
			</span> 
			<h:selectOneMenu name="flavour" value="#{catWallDtlsList.flavour}">

				<s:selectItems value="#{catWallDtlsList.flavours}" var="i"
					itemValue="#{i}" label="#{catWallDtlsList.flavourLabel(i)}" />
				<a:support event="onchange" action="#{catWallDtlsList.updateUserSkinPreferences}"
								oncomplete="javascript: location.href='CatWallDtlsList.seam'"
								ignoreDupResponses="true"
								eventsQueue="walldtlsListQueue"
								ajaxSingle="true"/>					
			</h:selectOneMenu>
			<s:link  id="clearSearch" status="globalWaitStatus" 
				ignoreDupResponses="true" propagation="none"
				oncomplete="javascript: location.href='CatWallDtlsList.seam'" styleClass="button wizard" 
				action="#{catWallDtlsList.reset}" value="X" ajaxSingle="true" >
				<f:param name="flavour" value="#{catWallDtlsList.flavour}"/>
			</s:link>
			
			</div>
			
			
			<div class="right">
			
			<ui:include src="adhocReportSelect.xhtml">
				<ui:param name="entityQuery" value="#{catWallDtlsList}" />
			</ui:include>
			
			<h:selectOneMenu
				id="catWallDtlsBulkOpSelect"
				rendered="#{not empty catWallDtlsBulkOperations.bulkOperationsNames}"
				value="#{catWallDtlsBulkOperations.bulkOperationsType}">
				<a:support  limitToList="true" event="onchange" action="#{catWallDtlsBulkOperations.prepBulkOperations( 'catWallDtlsList', 'catWallDtlsBulkOpSelect' )}" reRender="catWallDtlsListBulkOperationsPanels" oncomplete="if ( #{rich:element('catWallDtlsBulkOpSelect')}.options.selectedIndex != 0 ) { #{rich:component('catWallDtlsBulkPanel')}.show(); } ; return false; " ignoreDupResponses="true"  status="globalWaitStatus"  />
				<s:selectItems
					value="#{catWallDtlsBulkOperations.bulkOperationsNames}" var="b"
					label="#{catWallDtlsBulkOperations.bulkOperations[b]}"
					itemValue="#{b}" noSelectionLabel="Bulk Operations" />
			</h:selectOneMenu> 
			<a:commandLink  limitToList="true" ajaxSingle="true" id="createWallDetailsButton" ignoreDupResponses="true" 
			action="#{createWallDetailsWizard.prepCreateOperation()}" value="Add Wall Details" 
			reRender="catWallDtlsList,tableNav1,tableNav2,header" oncomplete="Richfaces.showModalPanel('createWallDetailsPanel');" 
			styleClass="button wizard" status="globalWaitStatus"  /> 


</div>
			</div>
			<!-- Shows hour glass when the table is loading -->
			<div id="globalStatusDiv" style="display: none;"><img
				src="../img/loading.gif" /></div>
			<a:status id="globalWaitStatus" forceId="true" layout="none"
				onstart="jQuery('#globalStatusDiv').fadeIn('fast')"
				onstop="jQuery('#globalStatusDiv').fadeOut('slow')" />
			<div class="push" />
			<div id="mainlistscroller"><h:dataTable id="catWallDtlsList"
				var="_catWallDtls" value="#{catWallDtlsList.resultList}"
				rowClasses="odd,even" 
				styleClass="mainListClass">
				
				<rich:column styleClass="checkBoxes" headerClass="checkBoxes"
					rendered="#{not empty catWallDtlsBulkOperations.bulkOperationsNames}">
					<f:facet name="header">
						<h:panelGrid columns="1">
							<h:outputText value=" " />
							<input type="checkbox" id="select_all_checkbox"
								name="select_all_checkbox"
								onclick="toggleCheckboxes(this.checked, 'bulk_checkbox');" />
						</h:panelGrid>
					</f:facet>
					<div onclick="cancelEventBubbling(event);"><h:selectBooleanCheckbox
						styleClass="bulk_checkbox checkBoxes"
						value="#{catWallDtlsBulkOperations.selections[_catWallDtls]}" /></div>
				</rich:column>
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="id" rendered="#{catWallDtlsList.listFlavour['id']}"
					entityList="#{catWallDtlsList}" propertyLabel="ID"
					propertyPath="catWallDtls.id"
					propertyValue="#{catWallDtlsList.catWallDtls.id}" propertyName="id"
					sortable="true" value="#{_catWallDtls.id}" />
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catSets.id"
					rendered="#{catWallDtlsList.listFlavour['catSets.id']}"
					entityList="#{catWallDtlsList}" propertyLabel="Set ID"
					propertyPath="catWallDtls.catSets.id"
					propertyValue="#{catWallDtlsList.catWallDtls.catSets.id}"
					propertyName="catSets.id" sortable="true"
					value="#{_catWallDtls.catSets.id}" />
					
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catSets.setsName"
					rendered="#{catWallDtlsList.listFlavour['catSets.setsName']}"
					entityList="#{catWallDtlsList}" propertyLabel="Set Name"
					propertyPath="catWallDtls.catSets.catCurrentTitle.catName"
					propertyValue="#{catWallDtlsList.catWallDtls.catSets.catCurrentTitle.catName}"
					propertyName="catSets.setsName" sortable="true"
					value="#{_catWallDtls.catSets.catCurrentTitle.catName}" />
					
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catCeasedDate"
					rendered="#{catWallDtlsList.listFlavour['catCeasedDate']}"
					entityList="#{catWallDtlsList}" propertyLabel="Ceased Date"
					propertyPath="catWallDtls.catCeasedDate"
					propertyValue="#{catWallDtlsList.catWallDtls.catCeasedDate}"
					propertyName="catCeasedDate" sortable="true"
					value="#{_catWallDtls.catCeasedDate}">
					<s:convertDateTime type="date" pattern="yyyy/MM/dd" />
				</cats:column>
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catChangeType"
					rendered="#{catWallDtlsList.listFlavour['catChangeType']}"
					entityList="#{catWallDtlsList}" propertyLabel="Change Type"
					propertyPath="catWallDtls.catChangeType"
					propertyValue="#{catWallDtlsList.catWallDtls.catChangeType}"
					propertyName="catChangeType"
					enumList="#{listsForEnums.catWallDtls_CatChangeType_forList}"
					sortable="true" value="#{_catWallDtls.catChangeType.label}" />
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catCreator"
					rendered="#{catWallDtlsList.listFlavour['catCreator']}"
					entityList="#{catWallDtlsList}" propertyLabel="Creator"
					propertyPath="catWallDtls.catCreator"
					propertyValue="#{catWallDtlsList.catWallDtls.catCreator}"
					propertyName="catCreator" sortable="true"
					value="#{_catWallDtls.catCreator}" />
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catDateCreated"
					rendered="#{catWallDtlsList.listFlavour['catDateCreated']}"
					entityList="#{catWallDtlsList}" propertyLabel="Date Created"
					propertyPath="catWallDtls.catDateCreated"
					propertyValue="#{catWallDtlsList.catWallDtls.catDateCreated}"
					propertyName="catDateCreated" sortable="true"
					value="#{_catWallDtls.catDateCreated}">
					<s:convertDateTime type="date" pattern="yyyy/MM/dd" />
				</cats:column>
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catDateDeprecated"
					rendered="#{catWallDtlsList.listFlavour['catDateDeprecated']}"
					entityList="#{catWallDtlsList}" propertyLabel="Deprecated Date"
					propertyPath="catWallDtls.catDateDeprecated"
					propertyValue="#{catWallDtlsList.catWallDtls.catDateDeprecated}"
					propertyName="catDateDeprecated" sortable="true"
					value="#{_catWallDtls.catDateDeprecated}">
					<s:convertDateTime type="date" pattern="yyyy/MM/dd" />
				</cats:column>
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catEffectiveDate"
					rendered="#{catWallDtlsList.listFlavour['catEffectiveDate']}"
					entityList="#{catWallDtlsList}" propertyLabel="Amendment Date"
					propertyPath="catWallDtls.catEffectiveDate"
					propertyValue="#{catWallDtlsList.catWallDtls.catEffectiveDate}"
					propertyName="catEffectiveDate" sortable="true"
					value="#{_catWallDtls.catEffectiveDate}">
					<s:convertDateTime type="date" pattern="yyyy/MM/dd" />
				</cats:column>
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catFixedDate"
					rendered="#{catWallDtlsList.listFlavour['catFixedDate']}"
					entityList="#{catWallDtlsList}" propertyLabel="Fixed Date"
					propertyPath="catWallDtls.catFixedDate"
					propertyValue="#{catWallDtlsList.catWallDtls.catFixedDate}"
					propertyName="catFixedDate" sortable="true"
					value="#{_catWallDtls.catFixedDate}">
					<s:convertDateTime type="date" pattern="yyyy/MM/dd" />
				</cats:column>
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catImplementationDateActl"
					rendered="#{catWallDtlsList.listFlavour['catImplementationDateActl']}"
					entityList="#{catWallDtlsList}"
					propertyLabel="Actual Implementation"
					propertyPath="catWallDtls.catImplementationDateActl"
					propertyValue="#{catWallDtlsList.catWallDtls.catImplementationDateActl}"
					propertyName="catImplementationDateActl" sortable="true"
					value="#{_catWallDtls.catImplementationDateActl}">
					<s:convertDateTime type="date" pattern="yyyy/MM/dd" />
				</cats:column>
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catImplementationDatePrjd"
					rendered="#{catWallDtlsList.listFlavour['catImplementationDatePrjd']}"
					entityList="#{catWallDtlsList}"
					propertyLabel="Projected Implementation"
					propertyPath="catWallDtls.catImplementationDatePrjd"
					propertyValue="#{catWallDtlsList.catWallDtls.catImplementationDatePrjd}"
					propertyName="catImplementationDatePrjd" sortable="true"
					value="#{_catWallDtls.catImplementationDatePrjd}">
					<s:convertDateTime type="date" pattern="yyyy/MM/dd" />
				</cats:column>
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catImplementationDateSchd"
					rendered="#{catWallDtlsList.listFlavour['catImplementationDateSchd']}"
					entityList="#{catWallDtlsList}"
					propertyLabel="Scheduled Implementation"
					propertyPath="catWallDtls.catImplementationDateSchd"
					propertyValue="#{catWallDtlsList.catWallDtls.catImplementationDateSchd}"
					propertyName="catImplementationDateSchd" sortable="true"
					value="#{_catWallDtls.catImplementationDateSchd}">
					<s:convertDateTime type="date" pattern="yyyy/MM/dd" />
				</cats:column>
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catLifecycle"
					rendered="#{catWallDtlsList.listFlavour['catLifecycle']}"
					entityList="#{catWallDtlsList}" propertyLabel="Lifecycle"
					propertyPath="catWallDtls.catLifecycle"
					propertyValue="#{catWallDtlsList.catWallDtls.catLifecycle}"
					propertyName="catLifecycle"
					enumList="#{listsForEnums.catWallDtls_Lifecycle}" sortable="true"
					value="#{_catWallDtls.catLifecycle.label}" />
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catMovingValue"
					rendered="#{catWallDtlsList.listFlavour['catMovingValue']}"
					entityList="#{catWallDtlsList}" propertyLabel="Moving Wall Value"
					propertyPath="catWallDtls.catMovingValue"
					propertyValue="#{catWallDtlsList.catWallDtls.catMovingValue}"
					propertyName="catMovingValue" sortable="true"
					value="#{_catWallDtls.catMovingValue}" >
					</cats:column>
				<cats:column linkToId="#{_catWallDtls.id}" styleClass="catWallType"
					rendered="#{catWallDtlsList.listFlavour['catWallType']}"
					entityList="#{catWallDtlsList}" propertyLabel="Wall Type"
					propertyPath="catWallDtls.catWallType"
					propertyValue="#{catWallDtlsList.catWallDtls.catWallType}"
					propertyName="catWallType"
					enumList="#{listsForEnums.catWallDtls_CatWallType}" sortable="true"
					value="#{_catWallDtls.catWallType.label}" />
					
					
					<cats:column linkToId="#{_catWallDtls.id}" sortable="true"
					rendered="#{catWallDtlsList.listFlavour['catDateModified']}"
					entityList="#{catWallDtlsList}"
					propertyLabel="Date Modified"
					propertyPath="catWallDtls.catDateModified"
					propertyValue="#{catWallDtlsList.catWallDtls.catDateModified}"
					propertyName="catDateModified"
					value="#{_catWallDtls.catDateModified}">
					<s:convertDateTime type="both" pattern="yyyy/MM/dd HH:mm:ss"></s:convertDateTime>
				</cats:column>
					
					
			</h:dataTable></div>
		</a:form>
		<ui:include src="../layout/tablenav.xhtml">
			<ui:param name="viewPath" value="/lists/CmptsWallDtlsList.xhtml"></ui:param>
			<ui:param name="entityList" value="#{catWallDtlsList}"></ui:param>
			<ui:param name="divId" value="2" />
		</ui:include>

		<ui:include src="/walldetails/bulkm_WallDetails.xhtml" />

		<ui:include src="/walldetails/createm_WallDetails.xhtml">
			<ui:param name="reRenderMe" value="catWallDtlsList,tableNav1,tableNav2,header" />
		</ui:include>
		<!-- when used in conjunction with a BaseListFlavour, this will order the columns per the configuration order. -->
		<rich:jQuery timing="onload" name="orderColumns"
			selector="#mainlistscroller > .mainListClass > thead:first-child > tr:first-child, #mainlistscroller > .mainListClass > tbody > tr"
			query="#{catWallDtlsList.listFlavour.getColumnOrderingJQuery()}" id="orderJQuery"/>
	</ui:define>
</ui:composition>
