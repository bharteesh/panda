<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:rich="http://richfaces.org/rich">

	<c:set var="numberOfPages" value="#{listsForEnums.ceilingInt(entityList.resultCount div entityList.maxResults)}"/>
	<c:set var="firstPage" value="#{0}"/>
	<c:set var="previousPage" value="#{listsForEnums.toInt((entityList.firstResult - entityList.maxResults) / entityList.maxResults)}"/>
	<c:set var="currentPage" value="#{listsForEnums.toInt(entityList.firstResult / entityList.maxResults)}"/>
	<c:set var="nextPage" value="#{listsForEnums.toInt((entityList.firstResult + entityList.maxResults) / entityList.maxResults)}"/>
	<c:set var="lastPage" value="#{listsForEnums.toInt(numberOfPages - 1)}"/>


	<s:div id="tableNav#{divId}" styleClass="tableControl #{owningTable}">
		<s:div
			rendered="#{numberOfPages gt 10}">
			<ul class="inline">
			<li><a:form styleClass="inline">
					<h:commandLink styleClass="button #{( currentPage eq 0 ) ? 'disabled' : ''}" value="&lt;&lt; First"
						disabled="#{( currentPage eq 0 )}">
						<f:param name="firstResult" value="0" />
					</h:commandLink>
				</a:form></li>
				
				<li><a:form styleClass="inline">
					<h:commandLink styleClass="button #{( previousPage lt 0 ) ? 'disabled' : ''}" value="&lt; Previous"
						disabled="#{( previousPage lt 0 )}">
						<f:param name="firstResult" value="#{previousPage * entityList.maxResults}" />
					</h:commandLink>
				</a:form></li>

				<ui:repeat var="i"
					value="#{listsForEnums.searchResultPages( currentPage, 3, 0, numberOfPages )}">

					<li
						class="#{currentPage eq i ? 'selected' : ''}"><a:form 
						styleClass="inline">
						<h:commandLink
							styleClass="button  #{currentPage eq i ? 'selected' : ''}"
							value="#{i+1}"
							disabled="#{currentPage eq i}">
							<f:param name="firstResult" value="#{i * entityList.maxResults}" />
						</h:commandLink>
					</a:form></li>

				</ui:repeat>

				<li ><a:form styleClass="inline">
					<h:commandLink styleClass="button #{nextPage gt lastPage ? 'disabled' : ''}" value="Next &gt;"
						disabled="#{nextPage gt lastPage}">
						<f:param name="firstResult" value="#{nextPage * entityList.maxResults}" />
					</h:commandLink>
				</a:form></li>
				
				<li><a:form styleClass="inline">
					<h:commandLink styleClass="button #{( currentPage eq  lastPage) ? 'disabled' : ''}" value="Last &gt;&gt;"
						disabled="#{( currentPage eq lastPage )}">
						<f:param name="firstResult" value="#{lastPage * entityList.maxResults}" />
					</h:commandLink>
				</a:form></li>
				
			</ul>
			
		</s:div>

		<s:div
			rendered="#{numberOfPages le 10}">
			<ul class="inline">
				<li><a:form styleClass="inline">
					<h:commandLink styleClass="button #{( previousPage lt 0 ) ? 'disabled' : ''}" value="&lt; Previous"
						disabled="#{( previousPage lt 0 )}">
						<f:param name="firstResult" value="#{previousPage * entityList.maxResults}" />
					</h:commandLink>
				</a:form></li>

				<ui:repeat var="i"
					value="#{listsForEnums.intsFromZeroToLessThanArg( numberOfPages )}">

					<li
						class="#{currentPage eq i ? 'selected' : ''}"><a:form 
						styleClass="inline">
						<h:commandLink
							styleClass="button  #{currentPage eq i ? 'selected' : ''}"
							value="#{i+1}"
							disabled="#{currentPage eq i}">
							<f:param name="firstResult" value="#{i * entityList.maxResults}" />
						</h:commandLink>
					</a:form></li>

				</ui:repeat>

				<li ><a:form styleClass="inline">
					<h:commandLink styleClass="button #{nextPage gt lastPage ? 'disabled' : ''}" value="Next &gt;"
						disabled="#{nextPage gt lastPage}">
						<f:param name="firstResult" value="#{nextPage * entityList.maxResults}" />
					</h:commandLink>
				</a:form></li>
			</ul>
		</s:div>



	</s:div>
</ui:composition>
