<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib">


	<rich:dataTable id="#{divId}catCmptsContractDtlsBFTbl" styleClass="scroller"
				var="catCmpts" value="#{createContractDetailsWizard.parentCmptListValid}" 
				rendered="#{not empty createContractDetailsWizard.parentCmptListValid}">					
					<rich:column>
						<f:facet name="header">Set Name</f:facet>
						<h:outputText value="#{catCmpts.setsValue}"></h:outputText>
					</rich:column>
					<rich:column>
					<f:facet name="header">Component <br/>Name</f:facet>
						<h:outputText value="#{catCmpts.catName}"></h:outputText>
					</rich:column>
					<rich:column>
					<f:facet name="header">Backfile <br/>Summary</f:facet>
						<h:outputText value="#{catCmpts.cspOverallOnboardingStatus}"></h:outputText>
					</rich:column>	
					<rich:column>
					<f:facet name="header">CSP <br/>Participant</f:facet>
						<h:outputText value="#{catCmpts.catHasCspRelationship ? 'Yes' : 'No'}"></h:outputText>
					</rich:column>	
					<rich:column styleClass="datestyle" rendered="#{createContractDetailsWizard.bulkInstance.catLifecycle eq 'Active'}">
						<f:facet name="header">Date Added to <br/>Agreement</f:facet>					
						<rich:calendar enableManualInput="true" datePattern="yyyy/MM/dd" disabled="false" id="catContractDtlsEffectDateCal" 
										value="#{createContractDetailsWizard.contractDtlsInstanceMap[catCmpts].catEffectiveDate}">
						</rich:calendar>						
					</rich:column>
					<rich:column styleClass="required #{invalid?'error':''}">
						<f:facet name="header">Coverage</f:facet>
							<h:selectOneRadio styleClass="coverage" required="true" value="#{createContractDetailsWizard.contractDtlsInstanceMap[catCmpts].catAllOrPartOfCmpt}" layout="pageDirection">
								<s:selectItems itemValue="#{i}" label="#{i.label}" value="#{listsForEnums.catContractDtls_AllOrPartOfCmpt}" var="i"/>
								<a:support event="onclick" reRender="catContractDtlsRange" ajaxSingle="true" status="globalWaitStatus" limitToList="true"/>
							</h:selectOneRadio>
							<h:inputText id="catContractDtlsRange" value="#{createContractDetailsWizard.contractDtlsInstanceMap[catCmpts].catContentCovered}" 
											disabled="#{not createContractDetailsWizard.enableContractDtlsRangeInput(catCmpts)}"></h:inputText>
					</rich:column>
					<rich:column styleClass="datestyle required #{invalid?'error':''}" rendered="#{createContractDetailsWizard.bulkInstance.catLifecycle eq 'Likely' or 
																	createContractDetailsWizard.bulkInstance.catLifecycle eq 'Active'}">
						<f:facet name="header">BF <br/>Participation <br/>Date</f:facet>
						<h:outputText value="#{catCmpts.catParticipationDate}" rendered="#{not empty catCmpts.catParticipationDate}"/>
						
						<rich:calendar  enableManualInput="true" datePattern="yyyy/MM/dd" rendered="#{empty catCmpts.catParticipationDate}" required="true"
										id="catContractDtlsBFPartcpDate2Cal" value="#{catCmpts.catParticipationDate}" disabled="false">
						</rich:calendar>
					</rich:column>
					
					<rich:column rendered="#{createContractDetailsWizard.bulkInstance.catLifecycle eq 'Active'}">
						<f:facet name="header">BF Full <br/>Rights <br/>Obtained</f:facet>
							<h:outputText value="#{catCmpts.catRightsObtained ? 'Yes' : 'No'}" rendered="#{catCmpts.catRightsObtained}"/>
							<h:selectOneMenu value="#{catCmpts.catRightsObtained}" rendered="#{not catCmpts.catRightsObtained}">
								<s:selectItems itemValue="#{i.value}" label="#{i.label}" value="#{listsForEnums.yesNo}" var="i"/>								
							</h:selectOneMenu>
					</rich:column>
					<rich:column rendered="#{createContractDetailsWizard.bulkInstance.catLifecycle eq 'Active'}">
						<f:facet name="header">Exclusions</f:facet>
							<h:outputText value="#{catCmpts.catRightsExclusions ? 'Yes' : 'No'}" rendered="#{catCmpts.catRightsExclusions}"/>
							<h:selectOneMenu value="#{catCmpts.catRightsExclusions}" rendered="#{not catCmpts.catRightsExclusions}">
								<s:selectItems itemValue="#{i.value}" label="#{i.label}" value="#{listsForEnums.yesNo}" var="i"/>
								<a:support event="onchange" reRender="catContractDtlsExclRange" ajaxSingle="true" status="globalWaitStatus" limitToList="true"/>		
							</h:selectOneMenu>
					</rich:column>
					<rich:column rendered="#{createContractDetailsWizard.bulkInstance.catLifecycle eq 'Active'}">
						<f:facet name="header">Excluded Range</f:facet>					
						<h:inputText id="catContractDtlsExclRange" value="#{catCmpts.catExcludedRange}" disabled="#{not createContractDetailsWizard.enableExcludedRangeInput(catCmpts)}"></h:inputText>
					</rich:column>	
					
					<rich:column styleClass="#{createContractDetailsWizard.parentPubJstor ? 'required' : ''}">
						<f:facet name="header">Why no <br/>Agreement?</f:facet>					
						<h:inputTextarea id="catContractDtlsNoLicensor" required="true" value="#{createContractDetailsWizard.contractDtlsInstanceMap[catCmpts].catReasonLicensorNotReqd}" disabled="#{not createContractDetailsWizard.parentPubJstor}"/>
					</rich:column>	
					<rich:column>
			    		<a:commandLink styleClass="button delete" action="#{createContractDetailsWizard.removeCmpt(catCmpts)}"
							 reRender="#{divId}catCmptsContractDtlsBFTbl"
							 status="globalWaitStatus"		
							 ajaxSingle="true"
							 rendered="#{createContractDetailsWizard.parentCmptListValid.size gt 1}"
							 ignoreDupResponses="true"
							 limitToList="true">						
						</a:commandLink>		    	
			    	</rich:column>	
			</rich:dataTable>
			
</ui:composition>
