<ui:composition
xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
>

	<h2><h:outputText value="#{catIssueShipmentsBulkOperations.bulkTitle}" /></h2>
	
		<div id="step1">
		<s:fragment rendered="#{catIssueShipmentsBulkOperations.bulkOperationsType.equals('ADVANCE')}">
			<ul class="steps">
					<li class="selected">1. Edit</li>
					<li class="disabled">2. Results</li>
			</ul>
		</s:fragment>
		<s:fragment rendered="#{not catIssueShipmentsBulkOperations.bulkOperationsType.equals('ADVANCE')}">
			<ul class="steps">
					<li class="selected">1. Permissions</li>
					<li class="disabled">2. Change</li>
					<li class="disabled">3. Additional</li>
					<li class="disabled">4. Results</li>
			</ul>
		</s:fragment>
		
		<div class="cluster smart">
		<s:fragment rendered="#{catIssueShipmentsBulkOperations.bulkOperationsType.equals('ADVANCE')}">	
			<s:fragment rendered="#{empty catIssueShipmentsBulkOperations.bulkInvalid and empty catIssueShipmentsBulkOperations.bulkSelection}">
				<div class="alert"><p><h:outputText
							value="You have selected  #{catIssueShipmentsBulkOperations.bulkInvalid.size() + catIssueShipmentsBulkOperations.bulkSelection.size()} records to change." /></p>
				</div>
				<div class="alert">
					<p><h:outputText value="Please select a shipment."></h:outputText></p>
				</div>	
			</s:fragment>	
			<s:fragment rendered="#{catIssueShipmentsBulkOperations.bulkInvalid.size() eq 1 and empty catIssueShipmentsBulkOperations.bulkSelection}">	
					<div class="alert">
						<p> <h:outputText value="You "/><em><h:outputText value="do not"/></em><h:outputText value=" have permission to change "/>
							<h:outputText value="#{catIssueShipmentsBulkOperations.bulkInvalid.size()}" /><h:outputText	value=" of "/> 
							<h:outputText	value="#{catIssueShipmentsBulkOperations.bulkInvalid.size() + catIssueShipmentsBulkOperations.bulkSelection.size()}" />
							<h:outputText value=" records."/>
						</p>
					</div>
					<cats:dumbTableIssueShipmentsLifecycle value="#{catIssueShipmentsBulkOperations.bulkInvalid}" />			
			</s:fragment>
			<s:fragment rendered="#{(catIssueShipmentsBulkOperations.bulkInvalid.size() + catIssueShipmentsBulkOperations.bulkSelection.size()) gt 1}">
				<div class="alert"><p><h:outputText
							value="You have selected  #{catIssueShipmentsBulkOperations.bulkInvalid.size() + catIssueShipmentsBulkOperations.bulkSelection.size()} records to change." /></p>
				</div>
				<div class="alert">
					<p><h:outputText value="You can advance the lifecycle of only one shipment at a time."></h:outputText></p>
				</div>	
			</s:fragment>	
		</s:fragment>
	
	<s:fragment rendered="#{not catIssueShipmentsBulkOperations.bulkOperationsType.equals('ADVANCE')}">	
		<p><h:outputText
			value="You have selected  #{catIssueShipmentsBulkOperations.bulkInvalid.size() + catIssueShipmentsBulkOperations.bulkSelection.size()}   records to change." /></p>

		<s:fragment rendered="#{not empty catIssueShipmentsBulkOperations.bulkInvalid}">
			<p><h:outputText
				value="You "/><em><h:outputText
				value="do not"/></em><h:outputText
				value=" have permission to change "/>
			<h:outputText
				value="#{catIssueShipmentsBulkOperations.bulkInvalid.size()}" /><h:outputText
				value=" of "/> 
				<h:outputText
				value="#{catIssueShipmentsBulkOperations.bulkInvalid.size() + catIssueShipmentsBulkOperations.bulkSelection.size()}" /><h:outputText
				value=" records."/></p>

			<cats:dumbTableIssueShipments value="#{catIssueShipmentsBulkOperations.bulkInvalid}" />
			
		</s:fragment> <s:fragment rendered="#{not empty catIssueShipmentsBulkOperations.bulkSelection}">
			<p><h:outputText
				value="You have permission to change "/> 
			<h:outputText
				value="#{catIssueShipmentsBulkOperations.bulkSelection.size()}" /><h:outputText
				value=" of "/>
				<h:outputText
				value="#{catIssueShipmentsBulkOperations.bulkInvalid.size() + catIssueShipmentsBulkOperations.bulkSelection.size()}" /><h:outputText
				value=" records. "/></p>

			<cats:dumbTableIssueShipments value="#{catIssueShipmentsBulkOperations.bulkSelection}" />
		</s:fragment>
	</s:fragment>	
		
		</div>

		<div class="push"></div>
		
		<a:commandLink styleClass="button" value="Quit"
      		eventsQueue="createShipmentQueue"
            status="globalWaitStatus"
		    oncomplete="#{rich:component('issueshipmentsbulkUpdateQuit')}.show(); return false;"
		    ajaxSingle="true"/>
		
		<a:commandLink styleClass="button right" value="Continue" 
			eventsQueue="#{divParam}eventsQueue"
       		status="globalWaitStatus"
			disabled="#{empty catIssueShipmentsBulkOperations.bulkSelection}"
			action="#{catIssueShipmentsBulkOperations.bulkNext}" 
			rendered="#{not catIssueShipmentsBulkOperations.bulkOperationsType.equals('ADVANCE')}"
			reRender="issueshipmentswizard"/>
	</div>
</ui:composition>