<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="../layout/template.xhtml">
	<ui:param name="entityType" value="contracts" />

	<ui:define name="badge">
		<ui:include src="ContractsBadge.xhtml" />
	</ui:define>

	<ui:define name="body">
		<h:form id="contractsEditForm" enctype="multipart/form-data">

			<!-- Shows hour glass when the table is loading -->
			<div id="globalStatusDiv" style="display: none;">
				<img src="../img/loading.gif" />
			</div>
			<a:status id="globalWaitStatus" forceId="true" layout="none"
				onstart="jQuery('#globalStatusDiv').fadeIn('fast')"
				onstop="jQuery('#globalStatusDiv').fadeOut('slow')" />

			<rich:tabPanel id="maintab" switchType="ajax"   styleClass="tab"  selectedTab="#{catContractsHome.selectedTab}" contentClass="tab_content">    		
		        <rich:tab label="Backfile" id="bfTab" name="bfTab"  status="globalWaitStatus"  rendered="#{catContractsHome.instance.catType eq 'Backfile'}" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
		        			limitToList="true"	action="#{catContractsHome.updateUserTabPreferences('bfTab')}">
			        	<ui:include src="ContractsBackfileTab.xhtml" />
		        </rich:tab>
		         <rich:tab label="Books" id="booksTab" name="booksTab"  status="globalWaitStatus"  rendered="#{catContractsHome.instance.catType eq 'Books'}" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
		         			limitToList="true" action="#{catContractsHome.updateUserTabPreferences('booksTab')}">
			        	<ui:include src="ContractsBooksTab.xhtml" />
		        </rich:tab>
		         <rich:tab label="Book Agreement Details" id="bookAgreementDetailsTab" name="bookAgreementDetailsTab"  status="globalWaitStatus"  rendered="#{catContractsHome.instance.catType eq 'Books'}" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
		         			limitToList="true" action="#{catContractsHome.updateUserTabPreferences('bookAgreementDetailsTab')}">
			        	<ui:include src="ContractsBookAgreementDetailsTab.xhtml" />
		        </rich:tab>
		        <rich:tab label="CSP" id="cspTab" name="cspTab"  status="globalWaitStatus"  rendered="#{catContractsHome.instance.catType eq 'Csp'}" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
		        			limitToList="true" action="#{catContractsHome.updateUserTabPreferences('cspTab')}">
			        	<ui:include src="ContractsCspTab.xhtml" />
		        </rich:tab>
			    <rich:tab label="BF Revisions" id="revTab" name="revTab" status="globalWaitStatus" rendered="#{catContractsHome.instance.catType eq 'Backfile'}" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
			    			limitToList="true" action="#{catContractsHome.updateUserTabPreferences('revTab')}">
		 	       <ui:include src="ContractsRevisionsTab.xhtml" />
		        </rich:tab>
		        <rich:tab label="Audit" id="auditTab" name="auditTab" status="globalWaitStatus" oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
		        			limitToList="true" action="#{catContractsHome.updateUserTabPreferences('auditTab')}">
		 	       <ui:include src="ContractsAuditTab.xhtml" />
		        </rich:tab> 
				<rich:tab label="Events" id="eventsTab" name="eventsTab"
					limitToList="true" status="globalWaitStatus" action="#{catContractsHome.updateUserTabPreferences('eventsTab')}">
					<ui:include src="ContractsEventsTab.xhtml">
					</ui:include>
				</rich:tab>       
    		</rich:tabPanel>
			<div id="functions">
				<a:commandLink action="#{catContractsHome.update}"
					onclick=" if ( jQuery(this).hasClass('disabled') ) { return false; } "
					ignoreDupResponses="true" styleClass="button saveOrCancel disabled"
					value="Save" reRender="contractsEditForm"
					eventsQueue="contractsEditQueue" status="globalWaitStatus" limitToList="true"/>
				<a:commandLink action="#{catContractsHome.cancel}"
					onclick=" if ( jQuery(this).hasClass('disabled') ) { return false; } "
					ignoreDupResponses="true" ajaxSingle="true"
					styleClass="button saveOrCancel disabled" value="Cancel"
					eventsQueue="contractsEditQueue" status="globalWaitStatus" />
			</div>

		</h:form>

		
		<ui:include src="advContractsLifecycle_modal.xhtml">
			<ui:param name="pageURL" value="/contracts/ContractsRecord.xhtml" />
		</ui:include>
		<ui:include
			src="/contractdetails/advLifecycleContractDtls_modal.xhtml">
			<ui:param name="pageURL" value="/contracts/ContractsRecord.xhtml" />
		</ui:include>

		<ui:include src="/contractdetails/changeAttrbContractDtls_modal.xhtml">
			<ui:param name="pageURL" value="/contracts/ContractsRecord.xhtml" />
		</ui:include>
		<ui:include src="/contractdetails/addContractDetails_modal.xhtml">
			<ui:param name="pageURL" value="/contracts/ContractsRecord.xhtml" />
		</ui:include>
		<ui:include src="changeContractsOnHold_modal.xhtml">
			<ui:param name="pageURL" value="/contracts/ContractsRecord.xhtml" />
		</ui:include>
		<ui:include src="/onholdreason/updateOnHoldReason_modal.xhtml">
			<ui:param name="pageURL" value="/contracts/ContractsRecord.xhtml" />
		</ui:include>
		<ui:include src="/contracts/changeDistributorValue_modal.xhtml">
			<ui:param name="pageURL" value="/contracts/ContractsRecord.xhtml" />
		</ui:include>
		<ui:include src="contractDocs_modal.xhtml" />
		<ui:include src="/contracts/changeBooksPorticoFields_modal.xhtml">
			<ui:param name="pageURL" value="/contracts/ContractsRecord.xhtml" />
		</ui:include>

	</ui:define>
	<ui:define name="notes">
		<ui:include src="ContractsNotes.xhtml" />
	</ui:define>
</ui:composition>
