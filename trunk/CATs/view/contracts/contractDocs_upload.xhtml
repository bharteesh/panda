<s:div xmlns:s="http://jboss.com/products/seam/taglib" 
xmlns="http://www.w3.org/1999/xhtml" 
xmlns:a="http://richfaces.org/a4j" 
xmlns:f="http://java.sun.com/jsf/core" 
xmlns:h="http://java.sun.com/jsf/html" 
xmlns:rich="http://richfaces.org/rich" 
xmlns:ui="http://java.sun.com/jsf/facelets" 
id="contractInfoDiv">


	<h2><h:outputText value="#{contractDocsWizard.wizardTitle}" /></h2>
	
		<div id="step1">
		<ul class="steps">
		    <li class="selected">1. Upload</li>
		</ul>
		<div class="cluster smart">
		 <s:decorate id="docTypeId" template="../layout/edit.xhtml">
				<ui:define name="label">Document Type</ui:define>
				<h:selectOneMenu name="docType" value="#{contractDocsWizard.uploadInstance.catDocType}" required="true">
					<s:selectItems var="i" value="#{listsForEnums.catContracts_PdfContentType}" 
							label="#{i.label}" itemValue="#{i}"/>
					<a:support event="onchange" action="#{contractDocsWizard.setDocType}"/>
				</h:selectOneMenu>				
		</s:decorate> 	
		<s:decorate id="uploadDiagramId2" template="../layout/edit.xhtml">
				<ui:define name="label">Upload PDF</ui:define>	            
          
			<rich:fileUpload fileUploadListener="#{contractDocsWizard.prepUpload}"
		                maxFilesQuantity="#{contractDocsWizard.uploadsAvailable}"
		                id="upload2"
		                immediateUpload="#{contractDocsWizard.autoUpload}"
		                acceptedTypes="pdf" allowFlash="#{contractDocsWizard.useFlash}">
		                <a:support event="onuploadcomplete" reRender="noLayoutErrorMsgs, uploadedListPanel" status="globalWaitStatus" ajaxSingle="true" limitToList="true"/>
		   </rich:fileUpload>
            
          </s:decorate>
			
			<a:outputPanel layout="block" id="uploadedListPanel">
			
			<s:div id="uploadedListPanelId" 
	                   		 rendered="#{not empty contractDocsWizard.uploadedContractDocsList}">			
	             <rich:panel><f:facet name="header"><h:outputText value="Uploaded PDFs (#{contractDocsWizard.uploadedContractDocsList.size})" /></f:facet></rich:panel>
	              		 
				 <rich:dataTable id="uploadedList" 
	            			 var="data"
	                      	 value="#{contractDocsWizard.uploadedContractDocsList}" >
	                <rich:column>
	                    <f:facet name="header">File Name</f:facet>
	                    <h:outputText value="#{data.catFileName}"/>
	                </rich:column>
	                <rich:column>
	                    <f:facet name="header">Document Type</f:facet>
	                    <h:outputText value="#{data.catDocType.label}"/>
	                </rich:column>
	                <rich:column>
	                    <f:facet name="header">Uploaded by</f:facet>
	                    <h:outputText value="#{data.catUploadedBy}"/>
	                </rich:column>
	                <rich:column>
	                    <f:facet name="header">Uploaded on</f:facet>
	                    <h:outputText value="#{data.catUploadedDate}"><s:convertDateTime type="date" pattern="yyyy/MM/dd"/></h:outputText>
	                </rich:column>
	                <rich:column>
	                    <f:facet name="header">Size(bytes)</f:facet>
	                    <h:outputText value="#{data.catFileSize}"/>
	                </rich:column>
	   		  </rich:dataTable>
	   		  </s:div>
			</a:outputPanel>
			
		</div>

			<div class="push"></div>		

       		<a:commandLink styleClass="button right" value="Return"
   			eventsQueue="#{divParam}eventsQueue" status="globalWaitStatus"
			onclick="#{rich:component('contractDocsPanel')}.hide();" 
			action="#{contractDocsWizard.reset}" 
			oncomplete="javascript:location.reload(true);"
			ajaxSingle="true" limitToList="true"/>
			
			
			</div>
	</s:div>

