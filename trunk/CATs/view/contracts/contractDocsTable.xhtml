<s:div id="#{divId}" xmlns:s="http://jboss.com/products/seam/taglib" 
xmlns="http://www.w3.org/1999/xhtml" 
xmlns:a="http://richfaces.org/a4j" 
xmlns:f="http://java.sun.com/jsf/core" 
xmlns:h="http://java.sun.com/jsf/html" 
xmlns:rich="http://richfaces.org/rich" 
xmlns:ui="http://java.sun.com/jsf/facelets">


<div class="smart">
		<div class="header">
			<div class="left">
				<span class="museo">				
					<h:outputText value="PDFs (#{contractDocsWizard.getUploadedContractDocsList(catContractsHome.instance).size})" />
				</span>
			</div>	
			
			<div class="right">
				<s:fragment rendered="#{contractDocsWizard.uploadedContractDocsList.size gt 0}">
				<h:selectOneMenu id="#{divId}deleteBulkOperationsSelect"
						onfocus="if ( ! checkForSave() ) { return false ; }">
						<a:support 
							event="onchange" 
							action="#{contractDocsWizard.prepDeleteDoc(null)}"
							reRender="contractDocsPanels" 
							oncomplete="#{rich:component('contractDocsPanel')}.show();"							
							status="globalWaitStatus"
							ignoreDupResponses="true"
							limitToList="true"
							/>
						<f:selectItem itemLabel="Bulk Operations" itemValue="bulk"/>
						<f:selectItem itemLabel="Delete" itemValue="delete"/>
					</h:selectOneMenu>
				</s:fragment>
				<a:commandLink 
	    			onclick="if ( ! checkForSave() ) { return false ; }" 
	    			id="#{divId}catContractInfoPdfEditButton"				
		    		action="#{contractDocsWizard.prepUploadDoc(catContractsHome.instance)}"
					value="Upload"
					reRender="contractDocsPanels"  
					oncomplete="#{rich:component('contractDocsPanel')}.show();"
					disabled="#{!s:hasPermission(catContractsHome.instance, 'add_reln catContractDocs')}"
					styleClass="button upload #{!s:hasPermission(catContractsHome.instance, 'add_reln catContractDocs') ? 'disabled' : ''}"
					status="globalWaitStatus"
					ignoreDupResponses="true"
					ajaxSingle="true" limitToList="true"/>	
			</div>
		</div>		
			<div class="push"></div>
			 <rich:dataTable id="#{divId}uploadedList" var="data" value="#{contractDocsWizard.uploadedContractDocsList}" 
			 			rendered="#{contractDocsWizard.uploadedContractDocsList.size gt 0}">
			 		<rich:column>
						<f:facet name="header">
							<input type="checkbox" id="select_all_pdf_checkbox"
									name="select_all_pdf_checkbox"
									onclick="if ( this.checked ) { jQuery('.#{divId}bulk_checkbox').each(function(){ this.checked = true; }); } else { jQuery('.#{divId}bulk_checkbox').each(function(){ this.checked = false; }); }" />
						</f:facet>			
						<span onclick="cancelEventBubbling(event);">		
							<h:selectBooleanCheckbox styleClass="#{divId}bulk_checkbox"
								value="#{contractDocsWizard.deleteDocSelection[data]}" />		
						</span>				
					</rich:column>
	                <rich:column id="docName" sortBy="#{data.catFileName}" filterBy="#{data.catFileName}" sortable="true" width="50px"
						sortOrder="#{sortFiltBean['pdfs'.concat(divId)]['fileName_sortOrder']}" filterValue="#{sortFiltBean['pdfs'.concat(divId)]['fileName_filterValue']}">
	                    <f:facet name="header">File Name</f:facet>
	                    <h:outputText value="#{data.catFileName}"/>
	                </rich:column>	                
	                <rich:column id="docType" sortBy="#{data.catDocType}" filterBy="#{data.catDocType}" sortable="true" width="50px"
						sortOrder="#{sortFiltBean['pdfs'.concat(divId)]['docType_sortOrder']}" filterValue="#{sortFiltBean['pdfs'.concat(divId)]['docType_filterValue']}">
	                    <f:facet name="header">Document Type</f:facet>
	                    <h:outputText value="#{data.catDocType.label}"/>
	                </rich:column>
	                <rich:column id="docUploadBy" sortBy="#{data.catUploadedBy}" filterBy="#{data.catUploadedBy}" sortable="true" width="50px"
						sortOrder="#{sortFiltBean['pdfs'.concat(divId)]['uploadedBy_sortOrder']}" filterValue="#{sortFiltBean['pdfs'.concat(divId)]['uploadedBy_filterValue']}">
	                    <f:facet name="header">Uploaded by</f:facet>
	                    <h:outputText value="#{data.catUploadedBy}"/>
	                </rich:column>
	                <rich:column id="docUploadDate" sortBy="#{data.catUploadedDate}" filterBy="#{data.catUploadedDate}" sortable="true" width="50px"
						sortOrder="#{sortFiltBean['pdfs'.concat(divId)]['uploadedDate_sortOrder']}" filterValue="#{sortFiltBean['pdfs'.concat(divId)]['uploadedDate_filterValue']}">
	                    <f:facet name="header">Uploaded on</f:facet>
	                    <h:outputText value="#{data.catUploadedDate}"><s:convertDateTime type="date" pattern="yyyy/MM/dd"/></h:outputText>
	                </rich:column>
	                <rich:column id="docUploadSize" sortBy="#{data.catFileSize}" filterBy="#{data.catFileSize}" sortable="true" width="50px"
						sortOrder="#{sortFiltBean['pdfs'.concat(divId)]['fileSize_sortOrder']}" filterValue="#{sortFiltBean['pdfs'.concat(divId)]['fileSize_filterValue']}">
	                    <f:facet name="header">Size(bytes)</f:facet>
	                    <h:outputText value="#{data.catFileSize}"/>
	                </rich:column>
	                <rich:column>
	                    <f:facet name="header"></f:facet>
	                    <h:commandLink 			
				    		action="#{contractDocsWizard.performDownload}"
				    		styleClass="button window"
							value="View">					
							 <f:param name="uploadedFileId" value="${data.id}" />
						</h:commandLink>
	                    
	                    <a:commandLink 			    			
			    			id="docDeleteButton"				
				    		action="#{contractDocsWizard.prepDeleteDoc(data)}"	
							reRender="contractDocsPanels" 
							oncomplete="#{rich:component('contractDocsPanel')}.show();"
							value="Delete"
							disabled="#{!s:hasPermission(catContractsHome.instance, 'remove_reln catContractDocs')}"
							styleClass="button delete #{!s:hasPermission(catContractsHome.instance, 'remove_reln catContractDocs') ? 'disabled' : ''}"
							status="globalWaitStatus"
							ignoreDupResponses="true"
							ajaxSingle="true"
							limitToList="true">					
						</a:commandLink>
	                </rich:column>
	   		  </rich:dataTable>	
			
	</div>
</s:div>

