<s:div xmlns:s="http://jboss.com/products/seam/taglib" 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:a="http://richfaces.org/a4j" 
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:rich="http://richfaces.org/rich" 
	xmlns:ui="http://java.sun.com/jsf/facelets" id="contractBkInfoDiv">

	<rich:simpleTogglePanel id="cConBkInf" switchType="ajax"
		opened="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkInf')}"
		headerClass="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkInf') ? 'open':''}"
		action="#{userPreferences.updateUserFlapPreferences(identity.credentials.username,'cConBkInf')}"
		reRender="cConBkInf" ajaxSingle="true" limitToList="true"
		eventsQueue="contEditQueue" label="Book Agreement Information">	
		
		<div class="col col1">
				<s:decorate id="catDistributorValue" template="../layout/edit.xhtml">
		           <ui:define name="label">Distributor</ui:define>
		           <h:outputText value="#{catContractsHome.instance.distributorValue}"/>
				<a:commandLink 			    			
			    			id="deleteDistributorButton"				
				    		action="#{changeDistributorValueWizard.prepareUnlink()}"	
				    		disabled="#{catContractsHome.instance.distributorValue eq null}"
				    		reRender="changeDistributorValuePanels"
							oncomplete="#{rich:component('changeDistributorValuePanel')}.show();"							
							styleClass="button delink #{!s:hasPermission(catContractsHome.instance, 'modify catDistributorContractId') or (catContractsHome.instance.distributorValue eq null) ? 'disabled' : ''}"
							status="globalWaitStatus"
							ignoreDupResponses="true"
							ajaxSingle="true"
							limitToList="true">					
			</a:commandLink>
		           <a:commandLink 
					ignoreDupResponses="true"
	    			action="#{changeDistributorValueWizard.startWizard()}"
					value="Edit"
					reRender="changeDistributorValuePanels" 
					oncomplete="#{rich:component('changeDistributorValuePanel')}.show();"
					styleClass="button wizard #{!s:hasPermission(catContractsHome.instance, 'modify catDistributorContractId') ? 'disabled' : ''}"
					disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catDistributorContractId')}"
					status="globalWaitStatus"
					eventsQueue="contEditQueue"
					ajaxSingle="true"
				onclick="if ( ! checkForSave() ) { return false ; }"/>

		    </s:decorate>
		    
		    <s:decorate id="catBksPortico" template="../layout/edit.xhtml">
			<ui:define name="label">Books at JSTOR in Portico</ui:define>
			<h:outputText value="#{catContractsHome.instance.catBooksPortico ? 'Yes' : 'No'}" />
			<a:form>
				<a:commandLink 
					ignoreDupResponses="true"
	    			action="#{changeBooksPorticoFieldsWizard.startWizard()}"
					value="Edit"
					reRender="changeBooksPorticoFieldsPanels" 
					oncomplete="#{rich:component('changeBooksPorticoFieldsPanel')}.show();"
					styleClass="button wizard #{!s:hasPermission(catContractsHome.instance, 'modify catBooksPortico') ? 'disabled' : ''}"
					disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catBooksPortico')}"
					status="globalWaitStatus"
					eventsQueue="contEditQueue"
					ajaxSingle="true"
					onclick="if ( ! checkForSave() ) { return false ; }"/>
			</a:form>
		</s:decorate>		
		
		<s:decorate id="catBksPorticoAnnexDate" template="../layout/edit.xhtml">
			<ui:define name="label">Books Portico Annex Countersigned</ui:define>
			<h:outputText value="#{catContractsHome.instance.catBooksPorticoAnnexDate}">
				<s:convertDateTime type="date" pattern="yyyy/MM/dd" />
			</h:outputText>
		</s:decorate>   
		
		<s:decorate id="catBksPorticoTitleLstSent" template="../layout/edit.xhtml">
    		<ui:define name="label">First Books Title List Sent to Portico</ui:define>
    		<h:selectOneMenu onchange="enableSaveCancel();" 
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catBksPorticoTitleLstSent')}"
						name="catBksPorticoTitleLstSent"
						value="#{catContractsHome.instance.catBksPorticoTitleLstSent}" required="true">
						<s:selectItems itemValue="#{i.value}" label="#{i.label}"
							noSelectionLabel="Choose..." value="#{listsForEnums.yesNo}" var="i" />
			</h:selectOneMenu>
    	</s:decorate>
		
		<s:decorate id="catBksDDA" template="../layout/edit.xhtml">
			<ui:define name="label">DDA</ui:define>
			<h:selectOneMenu onchange="enableSaveCancel();" 
				disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catBksDDA')}"
				name="catIssnStatus" value="#{catContractsHome.instance.catBksDDA}">
				<s:selectItems itemValue="#{i.value}" label="#{i.label}"
					noSelectionLabel="Choose..."
					value="#{listsForEnums.yesNo}" var="i" />
					
				<a:support event="onblur" action="#{catContractsHome.catBksDDAFlagChanged}" eventsQueue="cmptsEditQueue"/>
				<a:support event="onfocus" action="#{catContractsHome.onFocuscatBksDDA}" eventsQueue="cmptsEditQueue"/>
				</h:selectOneMenu>
			<!--  h:outputText value="#{catContractsHome.instance.catBksDDA ? 'Yes' : 'No'}" / -->
		</s:decorate>
			
			<s:decorate id="catLicensorAsWrittenBK" template="../layout/edit.xhtml">
		           <ui:define name="label">Licensor Name as Written</ui:define>
		           <h:inputTextarea onchange="enableSaveCancel();" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catLicensorAsWritten')}" cols="20" rows="2" value="#{catContractsHome.instance.catLicensorAsWritten}"/>
		    </s:decorate>   
		
			<s:decorate id="catContractBkInfoLoiSent" template="../layout/edit.xhtml">
				<ui:define name="label">LOI Date Sent</ui:define>
				<rich:calendar readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catLoiDateSent')}" onchanged="enableSaveCancel();" oninputkeyup="enableSaveCancel();" enableManualInput="true"  datePattern="yyyy/MM/dd" disabled="false" id="catContractBkInfoLoiSentCal" inputClass="datestyle" value="#{catContractsHome.instance.catLoiDateSent}"/>
			</s:decorate> 
			
			<s:decorate id="catContractBkInfoLoiSigned" template="../layout/edit.xhtml">
				<ui:define name="label">LOI Date Countersigned</ui:define>
				<rich:calendar readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catLoiDateRecvd')}" onchanged="enableSaveCancel();" oninputkeyup="enableSaveCancel();" enableManualInput="true"  datePattern="yyyy/MM/dd" disabled="false" id="catContractBkInfoLoiSignedCal" inputClass="datestyle" value="#{catContractsHome.instance.catLoiDateRecvd}"/>
			</s:decorate> 
			
			<s:decorate id="catContractBkInfoDateSent" template="../layout/edit.xhtml">
				<ui:define name="label">Agreement Date Sent</ui:define>
				<rich:calendar readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catAgreementDateSent')}" onchanged="enableSaveCancel();" oninputkeyup="enableSaveCancel();" enableManualInput="true"  datePattern="yyyy/MM/dd" disabled="false" id="catContractInfoAgDateSentCal" inputClass="datestyle" value="#{catContractsHome.instance.catAgreementDateSent}"/>
			</s:decorate> 
			
			<s:decorate id="catContractBkInfoDate" template="../layout/edit.xhtml">
				<ui:define name="label">Agreement Date Signed</ui:define>
				<rich:calendar readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catAgreementDate')}" onchanged="enableSaveCancel();" oninputkeyup="enableSaveCancel();" enableManualInput="true"  datePattern="yyyy/MM/dd" disabled="false" id="catContractInfoAgDateCal" inputClass="datestyle" value="#{catContractsHome.instance.catAgreementDate}"/>
			</s:decorate>  
			
			<!--  s:decorate id="catContractBkLaunchDate" template="../layout/edit.xhtml">
				<ui:define name="label">Launch Date</ui:define>
				<h:outputText value="#{catContractsHome.instance.catCspLaunchDate}"><s:convertDateTime type="date" pattern="yyyy/MM/dd"/></h:outputText>
			</s:decorate -->
			
			<s:decorate id="catContractBkSuffix" template="../layout/edit.xhtml"> 
				<ui:define name="label">Book Suffix Chosen By</ui:define>
				 <h:selectOneMenu disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catBooksSuffixChosenBy')}" 
                	name="catBooksSuffixChosenBy" value="#{catContractsHome.instance.catBooksSuffixChosenBy}">
			   		<s:selectItems itemValue="#{i}" label="#{i.label}"
			   			value="#{listsForEnums.catContracts_BooksSuffixChosenBy}" var="i"/>			   			
                		<a:support event="onfocus" action="#{catContractsHome.onFocusBookSuffix}" 
				 		ajaxSingle="true"
				 		eventsQueue="contEditQueue"/>		   			
                		<a:support event="onchange" action="#{catContractsHome.bookSuffixChanged}" 
				 		ajaxSingle="true"
				 		eventsQueue="contEditQueue" oncomplete="enableSaveCancel();"/>
			    </h:selectOneMenu>
			</s:decorate>
			
		</div>
		
		<div class="col col2">			       
		    <s:decorate id="catContractBkInfoDeclinedBy" template="../layout/edit.xhtml">
		           <ui:define name="label">Declined By</ui:define>
		           <h:outputText value="#{catContractsHome.instance.catDeclinedBy}"/>
		    </s:decorate> 
		     
		    <s:decorate id="catContractBkInfoDeclinedNotes" template="../layout/edit.xhtml">
		           <ui:define name="label">Reason Declined</ui:define>
		           <h:inputTextarea readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catDeclinedNotes')}" cols="20" rows="2" value="#{catContractsHome.instance.catDeclinedNotes}"/>
		    </s:decorate>       
		        
		    <s:decorate id="catContractBkInfoDeclinedDate" template="../layout/edit.xhtml">
		           <ui:define name="label">Declined Date</ui:define>
		           <h:outputText value="#{catContractsHome.instance.catDateDeclined}"><s:convertDateTime type="date" pattern="yyyy/MM/dd"/></h:outputText>
		    </s:decorate>   
		           
		    <s:decorate id="catContractBkInfoTerminationDate" template="../layout/edit.xhtml">
		           <ui:define name="label">Termination Date</ui:define>
		           <h:outputText value="#{catContractsHome.instance.catTerminationDate}"><s:convertDateTime type="date" pattern="yyyy/MM/dd"/></h:outputText>
		    </s:decorate> 		    
		     
		    <s:decorate id="catContractBkOutCome" template="../layout/edit.xhtml">
    			<ui:define name="label">Outcome</ui:define>
    			<h:outputText value="#{catContractsHome.instance.catOutcome.label}"/>
    		</s:decorate>  
		   <s:decorate id="catAgreementDatePubSigned" template="../layout/edit.xhtml">
		           <ui:define name="label">Date Agreement Signed by Publisher</ui:define>
					<rich:calendar readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catAgreementDatePubSigned')}" onchanged="enableSaveCancel();" oninputkeyup="enableSaveCancel();" enableManualInput="true"  datePattern="yyyy/MM/dd" disabled="false" id="catAgreementDatePubSigned" inputClass="datestyle" value="#{catContractsHome.instance.catAgreementDatePubSigned}"/>
		    </s:decorate> 	
		</div>
	</rich:simpleTogglePanel>	
	
	<rich:simpleTogglePanel id="cConBkNotes" switchType="ajax"
		opened="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkNotes')}"
		headerClass="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkNotes') ? 'open':''}"
		action="#{userPreferences.updateUserFlapPreferences(identity.credentials.username,'cConBkNotes')}"
		reRender="cConBkNotes" ajaxSingle="true" limitToList="true"
		eventsQueue="contEditQueue" label="Notes">	
		<div class="col col1">
			<s:decorate id="catContractBkInfoNote" template="../layout/edit.xhtml">
					<ui:define name="label">Note</ui:define>
					<h:inputTextarea onchange="enableSaveCancel();"  cols="20" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catNote')}" id="catContractInfoNote" rows="2" value="#{catContractsHome.instance.catNote}">
						<a:support event="onfocus" action="#{catContractsHome.onFocusNote}" ajaxSingle="true" eventsQueue="contractsEditQ"/>
						<a:support event="onblur" action="#{catContractsHome.noteChanged}" ajaxSingle="true" eventsQueue="contractsEditQ"/>
					</h:inputTextarea>
			</s:decorate> 
		</div>
		<div class="col col2">			
			<s:decorate id="catContractBkInfoNoteChangedBy" template="../layout/edit.xhtml">
				<ui:define name="label">Note Changed By</ui:define>
				<h:outputText onchange="enableSaveCancel();"  value="#{catContractsHome.instance.catNoteChangeBy}"/>
			</s:decorate> 
			<s:decorate id="catContractBkInfoNoteChangedDate" template="../layout/edit.xhtml">
				<ui:define name="label">Note Date Changed</ui:define>
				<rich:calendar  onchanged="enableSaveCancel();" oninputkeyup="enableSaveCancel();" enableManualInput="true"  datePattern="yyyy/MM/dd" disabled="true" id="catContractInfoNoteChangedDateCal" inputClass="datestyle" value="#{catContractsHome.instance.catNoteChangeDate}"/>
			</s:decorate>   
		</div>
	</rich:simpleTogglePanel>
	
	<rich:simpleTogglePanel id="cConBkOmit" switchType="ajax"
		opened="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkOmit')}"
		headerClass="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkOmit') ? 'open':''}"
		action="#{userPreferences.updateUserFlapPreferences(identity.credentials.username,'cConBkOmit')}"
		reRender="cConBkOmit" ajaxSingle="true" limitToList="true"
		eventsQueue="contEditQueue" label="Omitted Content">	
			<div class="col col1">
				<s:decorate id="catContractBkInfoOmit" template="../layout/edit.xhtml">
					<ui:define name="label">Omitted Content</ui:define>
					<h:selectOneMenu onchange="enableSaveCancel();" 
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catOmittedContent')}"
						name="catContractBkOmitCnt"
						value="#{catContractsHome.instance.catOmittedContent}">
						<s:selectItems itemValue="#{i}" label="#{i.label}"
							noSelectionLabel="Choose..." value="#{listsForEnums.catContracts_OmittedContent}" var="i" />
					</h:selectOneMenu>		
				</s:decorate> 
			</div>
			<div class="col col2">
				<s:decorate id="catContractBkInfoOmitDesc" template="../layout/edit.xhtml">
					<ui:define name="label">Omitted Content Description</ui:define>
					<h:inputTextarea onchange="enableSaveCancel();"  cols="20" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catOmittedContentDesc')}" id="catContractBkOmitDescDescId" rows="2" value="#{catContractsHome.instance.catOmittedContentDesc}">
					</h:inputTextarea>	
				</s:decorate> 
			</div>
	</rich:simpleTogglePanel>
	
	<rich:simpleTogglePanel id="cConBkProf" switchType="ajax"
		opened="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkProf')}"
		headerClass="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkProf') ? 'open':''}"
		action="#{userPreferences.updateUserFlapPreferences(identity.credentials.username,'cConBkProf')}"
		reRender="cConBkProf" ajaxSingle="true" limitToList="true"
		eventsQueue="contEditQueue" label="Book Production Profile">
			<div class="col col1">
				<s:decorate id="catContractBkPscmDeltas" template="../layout/edit.xhtml">
					<ui:define name="label">SCM Delta Frequency</ui:define>
					<h:inputTextarea onchange="enableSaveCancel();"  cols="20" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catPscmDeltas')}" id="catContractInfoPscmDlta" rows="2" value="#{catContractsHome.instance.catPscmDeltas}">
					
					</h:inputTextarea>
				</s:decorate> 
				<s:decorate id="catContractBkPscmFullFiles" template="../layout/edit.xhtml">
					<ui:define name="label">SCM Full Transmission Frequency</ui:define>
					<h:inputTextarea onchange="enableSaveCancel();"  cols="20" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catPscmFullFiles')}" id="catContractInfoPscmFullFiles" rows="2" value="#{catContractsHome.instance.catPscmFullFiles}">
					</h:inputTextarea>
				</s:decorate> 
				<s:decorate id="catContractBkPscmFormat" template="../layout/edit.xhtml">
					<ui:define name="label">PSCM Format</ui:define>
					<h:selectOneMenu onchange="enableSaveCancel();" 
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catPscmFormat')}"
						name="catContractBkPscmFrmt"
						value="#{catContractsHome.instance.catPscmFormat}">
						<s:selectItems itemValue="#{i}" label="#{i.label}"
							noSelectionLabel="Choose..." value="#{listsForEnums.catContracts_PscmFormat}" var="i" />
					</h:selectOneMenu>				
				</s:decorate> 
				<s:decorate id="catContractBkPscmFormatDesc" template="../layout/edit.xhtml">
					<ui:define name="label">Custom PSCM Format Description</ui:define>
					<h:inputTextarea onchange="enableSaveCancel();"  cols="20" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catPscmFormatCstmDesc')}" id="catContractBkPscmFormatDescId" rows="2" value="#{catContractsHome.instance.catPscmFormatCstmDesc}">
					</h:inputTextarea>					
				</s:decorate> 
				<s:decorate id="catContractBkPscmPkgng" template="../layout/edit.xhtml">
					<ui:define name="label">PSCM Packaging</ui:define>
					<h:selectOneMenu onchange="enableSaveCancel();" 
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catPscmPackaging')}"
						name="catContractBkPscmPkng"
						value="#{catContractsHome.instance.catPscmPackaging}">
						<s:selectItems itemValue="#{i}" label="#{i.label}"
							noSelectionLabel="Choose..." value="#{listsForEnums.catContracts_PscmPackaging}" var="i" />
					</h:selectOneMenu>
				</s:decorate> 
				<s:decorate id="catContractBkPscmPkgngDesc" template="../layout/edit.xhtml">
					<ui:define name="label">Custom PSCM Packaging Description</ui:define>
					<h:inputTextarea onchange="enableSaveCancel();"  cols="20" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catPscmPackagingCstmDesc')}" id="catContractBkPscmPkngDescId" rows="2" value="#{catContractsHome.instance.catPscmPackagingCstmDesc}">
					</h:inputTextarea>
				</s:decorate> 
			</div>
			<div class="col col2">
				<s:decorate id="catContractBkContentePub" template="../layout/edit.xhtml">
					<ui:define name="label">EPUB Expected</ui:define>
					<h:selectOneMenu onchange="enableSaveCancel();" 
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catContentIncludesEpub')}"
						name="catContractBkContentePub"
						value="#{catContractsHome.instance.catContentIncludesEpub}">
						<s:selectItems itemValue="#{i}" label="#{i.label}"
							noSelectionLabel="Choose..." value="#{listsForEnums.catContracts_ContentIncludesEpub}" var="i" />
					</h:selectOneMenu>
				</s:decorate> 
				<s:decorate id="catContractBkContentFormat" template="../layout/edit.xhtml">
					<ui:define name="label">Content Format</ui:define>
					<h:selectOneMenu onchange="enableSaveCancel();" 
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catContentFormat')}"
						name="catContractBkContFrmt"
						value="#{catContractsHome.instance.catContentFormat}">
						<s:selectItems itemValue="#{i}" label="#{i.label}"
							noSelectionLabel="Choose..." value="#{listsForEnums.catContracts_ContentFormat}" var="i" />
					</h:selectOneMenu>
				</s:decorate> 
				<s:decorate id="catContractBkContentFormatDesc" template="../layout/edit.xhtml">
					<ui:define name="label">Custom SCM Format Description</ui:define>
					<h:inputTextarea onchange="enableSaveCancel();"  cols="20" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catContentFrmtCstmDesc')}" id="catContractBkContFrmtDescId" rows="2" value="#{catContractsHome.instance.catContentFrmtCstmDesc}">
					</h:inputTextarea>
				</s:decorate> 
				<s:decorate id="catContractBkContentPkgng" template="../layout/edit.xhtml">
					<ui:define name="label">Content Packaging</ui:define>
					<h:selectOneMenu onchange="enableSaveCancel();" 
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catContentPackaging')}"
						name="catContractBkContPkng"
						value="#{catContractsHome.instance.catContentPackaging}">
						<s:selectItems itemValue="#{i}" label="#{i.label}"
							noSelectionLabel="Choose..." value="#{listsForEnums.catContracts_ContentPackaging}" var="i" />
					</h:selectOneMenu>
				</s:decorate> 
				<s:decorate id="catContractBkContentPkgngDesc" template="../layout/edit.xhtml">
					<ui:define name="label">Custom SCM Packaging Description</ui:define>
					<h:inputTextarea onchange="enableSaveCancel();"  cols="20" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catContentPackagingCstmDesc')}" id="catContractBkContPkngDescId" rows="2" value="#{catContractsHome.instance.catContentPackagingCstmDesc}">
					</h:inputTextarea>
				</s:decorate> 
				
				<s:decorate id="catContractBkInfoFlBkCnt" template="../layout/edit.xhtml">
		           <ui:define name="label">Front List Book Count Estimate</ui:define>
		           <h:inputText onchange="enableSaveCancel();" maxlength="12" value="#{catContractsHome.instance.catFrontListBookCount}" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catFrontListBookCount')}"/>
		    	</s:decorate> 
		    	
		    	<s:decorate id="catContractBkInfoBlBkCnt" template="../layout/edit.xhtml">
		           <ui:define name="label">Back List Book Count Estimate</ui:define>
		           <h:inputText onchange="enableSaveCancel();" maxlength="12" value="#{catContractsHome.instance.catBackListBookCount}" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catBackListBookCount')}"/>
		    	</s:decorate>
		    	<s:decorate id="catContractBkEarliestPubYearSource" template="../layout/edit.xhtml">
					<ui:define name="label">Earliest Publication Year Source
					</ui:define>
					<h:inputTextarea onchange="enableSaveCancel();"  cols="20" readonly="#{!s:hasPermission(catContractsHome.instance, 'modify catEarliestPubYearSource')}" id="catContractBkEarliestPubYearSourceId" rows="2" value="#{catContractsHome.instance.catEarliestPubYearSource}">
					</h:inputTextarea>
				</s:decorate> 
			</div>
		
	</rich:simpleTogglePanel>
	
	<rich:simpleTogglePanel id="cConBkTogl" switchType="ajax"
		opened="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkTogl')}"
		headerClass="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkTogl') ? 'open':''}"
		action="#{userPreferences.updateUserFlapPreferences(identity.credentials.username,'cConBkTogl')}"
		reRender="cConBkTogl" ajaxSingle="true" limitToList="true"
		eventsQueue="contEditQueue" label="Toggles">
		<s:decorate id="catContractBkFreeBks" template="../layout/edit.xhtml">
			<ui:define name="label">Free Books</ui:define>
			<h:selectOneMenu onchange="enableSaveCancel();" 
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catFreeBooksHandling')}"
						name="catContractBkFreeBksSel"
						value="#{catContractsHome.instance.catFreeBooksHandling}">
						<s:selectItems itemValue="#{i}" label="#{i.label}"
							noSelectionLabel="Choose..." value="#{listsForEnums.catContracts_FreeBooksHandling}" var="i" />
			</h:selectOneMenu>	
		</s:decorate>
		
		<s:decorate id="catContractBkEmbargo" template="../layout/edit.xhtml">
    		<ui:define name="label">Embargo Access until Publication Date</ui:define>
    		<h:selectOneMenu onchange="enableSaveCancel();" 
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catEmbargoAccessPubDate')}"
						name="catContractBkAccEmbargo"
						value="#{catContractsHome.instance.catEmbargoAccessPubDate}">
						<s:selectItems itemValue="#{i.value}" label="#{i.label}"
							noSelectionLabel="Choose..." value="#{listsForEnums.yesNo}" var="i" />
			</h:selectOneMenu>
    	</s:decorate>
    	
    	<s:decorate id="catBksUnltdPriceStatus" template="../layout/edit.xhtml">
    		<ui:define name="label">Unlimited Multiuser Pricing Status</ui:define>
    		<h:selectOneMenu 
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catBksUnltdPriceStatus')}"
						name="catContractUnltdPriceStatus"
						value="#{catContractsHome.instance.catBksUnltdPriceStatus}">
						<s:selectItems itemValue="#{i}" label="#{i.label}"
							noSelectionLabel="Choose..." value="#{listsForEnums.catContracts_BksUnltdPriceStatus}" var="i" />
						<a:support event="onfocus" action="#{catContractsHome.onFocusUnltdPriceStatus()}" 
				 			ajaxSingle="true"
				 			eventsQueue="contEditQueue"/>		   			
                		<a:support event="onchange" action="#{catContractsHome.unltdPriceStatusChanged}" 
				 			ajaxSingle="true"
				 			eventsQueue="contEditQueue" oncomplete="enableSaveCancel();"/>
			</h:selectOneMenu>
    	</s:decorate>
    	
    	    <s:decorate id="catBksUnltdPercentage" template="../layout/edit.xhtml">
    		<ui:define name="label">Unlimited Multiuser Pricing Universal Percentage of Limited Price</ui:define>
    		<h:inputText
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catBksUnltdPercentage')}"
						name="catContractUnltdPercentage"
						value="#{catContractsHome.instance.catBksUnltdPercentage}">
						<a:support event="onfocus" action="#{catContractsHome.onFocusUnltdPercent()}" 
				 			ajaxSingle="true"
				 			eventsQueue="contEditQueue"/>		   			
                		<a:support event="onchange" action="#{catContractsHome.unltdPercentChanged}" 
				 			ajaxSingle="true"
				 			eventsQueue="contEditQueue" oncomplete="enableSaveCancel();"/>
			</h:inputText>
    	</s:decorate>
    	    	<s:decorate id="catBksDwnldPckPriceStat" template="../layout/edit.xhtml">
    		<ui:define name="label">30 Pack Download Pricing Status</ui:define>
    		<h:selectOneMenu
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catBksDwnldPckPriceStat')}" 
						name="catContractDwnldPckPriceStat"
						value="#{catContractsHome.instance.catBksDwnldPckPriceStat}">
						<s:selectItems itemValue="#{i}" label="#{i.label}"
							noSelectionLabel="Choose..." value="#{listsForEnums.catContracts_BksDwnldPckPriceStat}" var="i" />
						<a:support event="onfocus" action="#{catContractsHome.onFocusPackPriceStatus()}" 
				 			ajaxSingle="true"
				 			eventsQueue="contEditQueue"/>		   			
                		<a:support event="onchange" action="#{catContractsHome.packPriceStatusChanged}" 
				 			ajaxSingle="true"
				 			eventsQueue="contEditQueue" oncomplete="enableSaveCancel();"/>
			</h:selectOneMenu> 
    	</s:decorate>
    	
    	   <s:decorate id="catBksDownloadPackPrice" template="../layout/edit.xhtml">
    		<ui:define name="label">Percentage of Limited Price for 30 pack download</ui:define>
    		<h:inputText
						disabled="#{!s:hasPermission(catContractsHome.instance, 'modify catBksDownloadPackPrice')}"
						name="catContractDownloadPackPrice"
						value="#{catContractsHome.instance.catBksDownloadPackPrice}">
						<a:support event="onfocus" action="#{catContractsHome.onFocusPackPrice()}" 
				 			ajaxSingle="true"
				 			eventsQueue="contEditQueue"/>		   			
                		<a:support event="onchange" action="#{catContractsHome.packPriceChanged}" 
				 			ajaxSingle="true"
				 			eventsQueue="contEditQueue" oncomplete="enableSaveCancel();"/>
			</h:inputText>
    	</s:decorate>
	</rich:simpleTogglePanel> 
	
	<rich:simpleTogglePanel id="cConBkPdf" switchType="ajax"
		opened="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkPdf')}"
		headerClass="#{userPreferences.getIsFlapOpen(identity.credentials.username,'cConBkPdf') ? 'open':''}"
		action="#{userPreferences.updateUserFlapPreferences(identity.credentials.username,'cConBkPdf')}"
		reRender="cConBkPdf" ajaxSingle="true" limitToList="true"
		eventsQueue="contEditQueue" label="PDFs">
	
		<ui:include src="contractDocsTable.xhtml">
			  	<ui:param name="divId" value="pdfsBkTableDiv"/>	  		
			  	<ui:param name="tableId" value="pdfsBkTable"/>	  		
		</ui:include>
	</rich:simpleTogglePanel>
	
	<div class="push"/>	  
	 
</s:div>