<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib">

	<h2><h:outputText value="#{setsBulkOperations.bulkTitle}" /></h2>
	
	<div id="step1">
		<s:div>
			<ul class="steps">
				<li class="">1. Permissions</li>
				<li class="selected">2. Change</li>
				<li class="disabled">3. Additional</li>
				<li class="disabled">4. Results</li>
			</ul>
		</s:div>
		
		<div class="cluster">
			<s:fragment	rendered="#{setsBulkOperations.bulkRequiredProperties.contains('catSigningDeadlineDate')}">
				<p>Enter the new value to apply to all the eligible records you	selected.</p>
				<s:decorate id="catSigningDeadlineDateField" template="../layout/edit.xhtml">
                	<ui:define name="label">Signing Deadline</ui:define>
                	<rich:calendar enableManualInput="true"  id="catSigningDeadlineDate" datePattern="yyyy/MM/dd"  
                		inputClass="datestyle" value="#{setsBulkOperations.bulkInstance.catSigningDeadlineDate}"/>
        		</s:decorate>
			</s:fragment> 
			
			<s:fragment	rendered="#{setsBulkOperations.bulkRequiredProperties.contains('catThNegotiator')}">
				<p>Enter the new value to apply to all the eligible records you	selected.</p>
				<s:decorate id="catSigningDeadlineDateField1" template="../layout/edit.xhtml">
                	<ui:define name="label">Negotiator</ui:define>
                	<h:selectOneMenu name="catThNegotiatorField" 
						value="#{setsBulkOperations.bulkInstance.catThNegotiator}"
						required="true">
						<s:selectItems	value="#{roler.getUsersInRole('CD Negotiations')}" var="i"
							itemValue="#{i}" label="#{i}" noSelectionLabel="Choose..." />
					</h:selectOneMenu>
        		</s:decorate>
			</s:fragment>
			
			<s:fragment	rendered="#{setsBulkOperations.bulkRequiredProperties.contains('catThStatus')}">
				<p>Enter the new value to apply to all the eligible records you	selected.</p>
				<s:decorate id="catThStatusDeco1" template="../layout/edit.xhtml">
                	<ui:define name="label">Title History Status</ui:define>
                	<h:selectOneMenu name="catThStatusField" 
						value="#{setsBulkOperations.bulkInstance.catThStatus}"
						required="true">
						<s:selectItems	value="#{listsForEnums.catSets_ThStatus}" var="i"
							itemValue="#{i}" label="#{i.label}" noSelectionLabel="Choose..." />
					</h:selectOneMenu>
        		</s:decorate>
			</s:fragment>
			
			<s:fragment	rendered="#{setsBulkOperations.bulkRequiredProperties.contains('catOnHold')}">
				<p>Enter the new value to apply to all the eligible records you	selected.</p>
				<s:decorate id="catOnHoldDeco1" template="../layout/edit.xhtml">
                	<ui:define name="label">On Hold</ui:define>
                	<h:selectOneMenu name="catOnHoldField"
						value="#{setsBulkOperations.bulkInstance.catOnHold}"
						required="true">
						<s:selectItems value="#{listsForEnums.yesNo}" var="i"
							itemValue="#{i.value}" label="#{i.label}"
							noSelectionLabel="Choose..." />
					</h:selectOneMenu>
                </s:decorate>
			</s:fragment>
			
			<s:fragment	rendered="#{setsBulkOperations.bulkRequiredProperties.contains('catOnGoingDigi')}">
				<p>Enter the new value to apply to all the eligible records you	selected.</p>
				<s:decorate id="catOnGoinginDigiDeco1" template="../layout/edit.xhtml">
                	<ui:define name="label">Ongoing Digitization</ui:define>
                	<h:selectOneMenu name="catOnGoingDigiField"
						value="#{setsBulkOperations.bulkInstance.catOnGoingDigi}"
						required="true">
						<s:selectItems value="#{listsForEnums.yesNo}" var="i"
							itemValue="#{i.value}" label="#{i.label}"
							noSelectionLabel="Choose..." />
					</h:selectOneMenu>
                </s:decorate>
			</s:fragment>
			
			<s:fragment	rendered="#{setsBulkOperations.bulkRequiredProperties.contains('catSetsTags')}">
				<rich:listShuttle id="tagPickList" 
			  		targetValue="#{setsBulkOperations.relatedTags}" 
			  		sourceValue="#{setsBulkOperations.unrelatedTags}"
			  		targetCaptionLabel="Current Tags"
			  		sourceCaptionLabel="Available Tags"
			  		var="_tags"
			  		converter="#{org.jboss.seam.ui.EntityConverter}" orderControlsVisible="false" fastOrderControlsVisible="false"
			  		sourceListWidth="315" targetListWidth="315" listsHeight="350">
				    <rich:column>
			                <h:outputText value="#{_tags.catName}"></h:outputText>
			        </rich:column>
				</rich:listShuttle>
			</s:fragment>
			
			<s:fragment	rendered="#{setsBulkOperations.bulkRequiredProperties.contains('catSetsComponents')}">
				<s:label>
					<p>Select Components</p>
				</s:label>
				<s:div id="chooseCmptFragment" styleClass="smart">
					<h:outputText value="Search by name:"/>
					<h:inputText id="default_search_catCmptsList1"
					value="#{catCmptsList.catCmpts.catName}"
					onchange="return false;" size="60"/>
	
					<a:commandLink styleClass="button filter"
					value="Go"
					action="#{setsBulkOperations.narrowCmptsList(rich:findComponent('default_search_catCmptsList1').value)}"
					reRender="chooseCmptFragment" 
					status="globalWaitStatus"/>
					
				
				<div class="scroller">
				<rich:panel>
					<f:facet name="header">
						<h:outputText value="Components (#{catCmptsList.resultCount})" />
					</f:facet>
				</rich:panel>
				<rich:dataTable id="catCmptsOfSet"
					var="_catCmpts" value="#{catCmptsList.resultList}"
					rendered="#{not empty catCmptsList.resultList}">
		
					<rich:column styleClass="checkBoxes" headerClass="checkBoxes">
						<h:selectBooleanCheckbox styleClass="bulk_checkbox_addCmpt"
									value="#{setsBulkOperations.selectionsForAddCmpts[_catCmpts]}"/>
					</rich:column>
					
		
					<cats:wizardColumn
						entityList="#{catCmptsList}"
						propertyLabel="ID"
						propertyName="id"
						propertyPath="catCmpts.id"
						propertyValue="#{catCmptsList.catCmpts.id}"
						reRender="cmpts"
						value="#{_catCmpts.id}"/>
					<cats:wizardColumn
						entityList="#{catCmptsList}"
						propertyLabel="Name"
						propertyName="catName"
						propertyPath="catCmpts.catName"
						propertyValue="#{catCmptsList.catCmpts.catName}"
						reRender="cmpts"
						value="#{_catCmpts.catName}"/>
					<cats:wizardColumn
						entityList="#{catCmptsList}"
						propertyLabel="Lifecycle"
						propertyName="catLifecycle"
						propertyPath="catCmpts.catLifecycle"
						propertyValue="#{catCmptsList.catLifecycle}"
						reRender="cmpts"
						value="#{_catCmpts.catLifecycle}"/>
			
					<cats:wizardColumn
						entityList="#{catCmptsList}"
						propertyLabel="Sets Name"
						propertyName="setsValue"
						propertyPath="catCmpts.setsValue"
						propertyValue="#{catCmptsList.catCmpts.setsValue}"
						reRender="cmpts"
						value="#{_catCmpts.setsValue}"/>
					<cats:wizardColumn
						entityList="#{catCmptsList}"
						propertyLabel="Extent (Pub Units)"
						propertyName="catPublctnUnitRange"
						propertyPath="catCmpts.catPublctnUnitRange"
						propertyValue="#{catCmptsList.catCmpts.catPublctnUnitRange}"
						reRender="cmpts"
						value="#{_catCmpts.catPublctnUnitRange}"/>
					<cats:wizardColumn
						entityList="#{catCmptsList}"
						propertyLabel="Extent (Dates)"
						propertyName="catDateRange"
						propertyPath="catCmpts.catDateRange"
						propertyValue="#{catCmptsList.catCmpts.catDateRange}"
						reRender="cmpts"
						value="#{_catCmpts.catDateRange}"/>
					<cats:wizardColumn
						entityList="#{catCmptsList}"
						propertyLabel="Print ISSN"
						propertyName="catPrintIssn"
						propertyPath="catCmpts.catPrintIssn"
						propertyValue="#{catCmptsList.catCmpts.catPrintIssn}"
						reRender="cmpts"
						value="#{_catCmpts.catPrintIssn}"/>
					<cats:wizardColumn
						entityList="#{catCmptsList}"
						propertyLabel="On Hold"
						propertyName="catOnHold"
						propertyPath="catCmpts.catOnHold"
						propertyValue="#{catCmptsList.catCmpts.catOnHold}"
						reRender="cmpts"
						value="#{_catCmpts.catOnHold}"/>
		
				</rich:dataTable></div>
				</s:div>
				
			</s:fragment>
			
		</div>
		
		<div class="push"></div>
	
		<a:commandLink styleClass="button" value="Quit"
			oncomplete="#{rich:component('setsBulkUpdateQuit')}.show(); return false;"
			eventsQueue="bulkOps" status="globalWaitStatus" ajaxSingle="true"/>
			 
		<a:commandLink styleClass="button right" value="Continue"
			action="#{setsBulkOperations.bulkNext}" reRender="setsWizardForm"
			eventsQueue="bulkOps" status="globalWaitStatus"
			rendered="#{not setsBulkOperations.bulkType.equals('ADDCMPT')}"/>
		
		<a:commandLink styleClass="button right" value="Continue"
			action="#{setsBulkOperations.bulkNext}" reRender="setsWizardForm"
			eventsQueue="bulkOps" status="globalWaitStatus"
			rendered="#{setsBulkOperations.bulkType.equals('ADDCMPT')}"
			onclick="if(checkRadios('bulk_checkbox_addCmpt', 'Please select alteast one Component') == false) {return false};" />
		
	</div>
</ui:composition>