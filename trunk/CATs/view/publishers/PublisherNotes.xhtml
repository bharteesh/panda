<s:div id="notes" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">
	

    <h2>Notes</h2>    
	<a:form>
	    <a:commandLink 
			ignoreDupResponses="true"
	   		value="Add Note"
	   		action="#{createPublisherNoteWizard.prepareCreate()}"
			reRender="publisherNoteForm" 
			oncomplete="#{rich:component('publisherNoteWizardModal')}.show(); return false;"
			status="globalWaitStatus"
			eventsQueue="publisherEditQueue"
			ajaxSingle="true"
			disabled = "#{!s:hasPermission(catPublishersHome.instance, 'add_reln catPublisherNotes')}" 
			styleClass="button wizard #{s:hasPermission(catPublishersHome.instance, 'add_reln catPublisherNotes') ? '' : 'disabled'}" />
			<!--"disabled = #{!s:hasPermission(catPublishersHome.instance, 'add_reln catPublisherNotes')}" -->
			<!-- styleClass="button wizard #{s:hasPermission(catPublishersHome.instance, 'add_reln catPublisherNotes') ? '' : 'disabled'}"-->
    </a:form>	
    <div class="push"></div>
    <a:form>
	   	<s:div id="tadDivId">
	    <ul class="tab">
	      <li>
	      	<a:commandLink  styleClass="#{catPublishersHome.notesSortOrder=='desc' ? 'selected' : ''}" reRender="tadDivId,notesId"
	      	status="globalWaitStatus"  ajaxSingle="true" eventsQueue="publisherEditQueue">
	      		<f:param name="notesSortOrder" value="desc"/>
	      		<h:outputText value="Newest First" />
	    	</a:commandLink>
	      </li>
	      <li>
	      	<a:commandLink styleClass="#{catPublishersHome.notesSortOrder=='asc' ? 'selected' : ''}" reRender="tadDivId,notesId"
	      	status="globalWaitStatus"  ajaxSingle="true" eventsQueue="publisherEditQueue">
	      		<f:param name="notesSortOrder" value="asc"/>
	      		<h:outputText value="Oldest First" /> 
	    	</a:commandLink>
	      </li>
		</ul>
	    </s:div>	   	
	    <div id="newnote"></div>
	    <a:outputPanel id="notesId" styleClass="allnotes">
		    <rich:dataList var="_notes" value="#{catPublishersHome.allNotes}" rows="10" id="notesList1">
		    	<div class="note">
		        <p class="title museo">#{_notes.catTitlePart1}<i>#{_notes.catTitlePart2}</i>#{_notes.catTitlePart3}</p>
		        <pre>#{_notes.catNote}</pre>
		        <p class="sig">by #{_notes.catCreator} at #{_notes.catDateCreated}
		    <span class="editbutton"><a:commandLink ignoreDupResponses="true"
			   		value=""
			   		action="#{createPublisherNoteWizard.prepareEdit(_notes)}"
					reRender="publisherNoteWizardModal" 
					oncomplete="#{rich:component('publisherNoteWizardModal')}.show();"
					disabled="#{_notes.parentType ne 'Publisher' or !roler.haveOverlappingRoles(identity.credentials.username, _notes.catCreator)}"
		            styleClass="button wizard2 #{(_notes.parentType ne 'Publisher' or !roler.haveOverlappingRoles(identity.credentials.username, _notes.catCreator)) ? 'disabled' : ''}"
					status="globalWaitStatus"
					eventsQueue="publisherEditQueue"
					ajaxSingle="true"
					onclick="if ( ! checkForSave() ) { return false ; }"
		        /></span>
		        <!-- 
		        disabled="#{_notes.parentType ne 'Publisher Note' or !roler.haveOverlappingRoles(identity.credentials.username, _notes.catCreator)}"
		         styleClass="button wizard2 #{(_notes.parentType ne 'Publisher Note' or !roler.haveOverlappingRoles(identity.credentials.username, _notes.catCreator)) ? 'disabled' : ''}"
					-->
		        </p>
		
		      </div>
		    </rich:dataList>
		    <rich:datascroller for="notesList1" maxPages="4" renderIfSinglePage="false">
		          <f:facet name="first">
		                    <h:outputText value="First"/>
		          </f:facet>
		          <f:facet name="last">
		                    <h:outputText value="Last"/>
		          </f:facet>
			</rich:datascroller>
		</a:outputPanel>
		
    </a:form>
    
   <!-- </rich:simpleTogglePanel> -->
   
   
   
   
  </s:div>
