<?xml version="1.0"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="../layout/template.xhtml">
	<ui:param name="entityType" value="walldetails" />
	<ui:param name="moremenu" value="moremenu" />

	<ui:define name="badge">
		<ui:include src="WallDetailsBadge.xhtml" />
	</ui:define>
	<ui:define name="body">
		<h:form id="catWallDtlsEditForm">

			<div id="globalStatusDiv" style="display: none;">
				<img src="../img/loading.gif" alt="" />
			</div>
			<a:status id="globalWaitStatus" forceId="true" layout="none"
				onstart="jQuery('#globalStatusDiv').fadeIn('fast')"
				onstop="jQuery('#globalStatusDiv').fadeOut('slow')" />

			<rich:tabPanel id="maintab" switchType="ajax"
				selectedTab="#{catWallDtlsHome.selectedTab}" styleClass="tab"
				contentClass="tab_content">
				<rich:tab label="Wall Information" id="tab1" name="tab1"
					status="globalWaitStatus"
					oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
					reRender="infoLayout"
					action="#{catWallDtlsHome.updateUserTabPreferences('tab1')}">
					<ui:include src="WallDetailsWallInformationTab.xhtml" />
				</rich:tab>
				<rich:tab label="Audit" id="tab2" name="tab2"
					status="globalWaitStatus"
					oncomplete="addDisabledToDisabled(); addDisabledToReadonly();"
					reRender="infoLayout"
					action="#{catWallDtlsHome.updateUserTabPreferences('tab2')}">
					<ui:include src="WallDetailsAuditTab.xhtml" />
				</rich:tab>
			</rich:tabPanel>

			<div id="functions">
				<a:commandLink action="#{catWallDtlsHome.update}"
					onclick=" if ( jQuery(this).hasClass('disabled') ) { return false; } "
					status="globalWaitStatus" ignoreDupResponses="true"
					styleClass="button saveOrCancel disabled"
					reRender="catWallDtlsEditForm" value="Save" />
				<a:commandLink action="#{catWallDtlsHome.cancel}"
					onclick=" if ( jQuery(this).hasClass('disabled') ) { return false; } "
					status="globalWaitStatus" ignoreDupResponses="true"
					styleClass="button saveOrCancel disabled"
					reRender="catWallDtlsEditForm" value="Cancel" />
				<a:commandLink action="#{catWallDtlsHome.remove}"
					ignoreDupResponses="true" status="globalWaitStatus"
					disabled="#{!s:hasPermission(catWallDtlsHome.instance, 'delete WallDetails') or !catWallDtlsHome.wallDetailsDeletable}"
					styleClass="button delete #{!s:hasPermission(catWallDtlsHome.instance, 'delete WallDetails')  or !catWallDtlsHome.wallDetailsDeletable? 'disabled' : ''}"
					value="Delete" />

			</div>
		</h:form>


		<a:form>

			<a:outputPanel layout="none" id="infoLayout">
				<s:div id="InformationTables"
					rendered="#{empty catWallDtlsHome.selectedTab or catWallDtlsHome.selectedTab eq 'tab1'}">
					<!--  sibling wall details -->
					<ui:include src="WallDetailsSiblingsTable.xhtml">
						<ui:param name="divId" value="siblingsWallDetailsTableDiv" />
						<ui:param name="tableId" value="siblingsWallDetailsTable" />
						<ui:param name="flavour" value="DEFAULT" />
						<ui:param name="tableType" value="WallDetails" />
						<ui:param name="entityList"
							value="#{catWallDtlsHome.instance.siblingWallDetailsList}" />
						<ui:param name="other" value="Other" />
					</ui:include>


					<!--  all wall overrides of the parent set -->
					<ui:include src="/walloverrides/WallOverridesSiblingsTable.xhtml">
						<ui:param name="divId" value="siblingsWallOverridesTableDiv" />
						<ui:param name="tableId" value="siblingsWallOverridesTable" />
						<ui:param name="flavour" value="DEFAULT" />
						<ui:param name="tableType" value="CatWallOverrides" />
						<ui:param name="entityList"
							value="#{catWallDtlsHome.instance.siblingWallOverridesList}" />
					</ui:include>
				</s:div>
			</a:outputPanel>

		</a:form>

		<ui:include src="/walldetails/bulkm_WallDetails.xhtml">
			<ui:param name="pageURL" value="Yes" />
		</ui:include>
		<ui:include src="/walloverrides/bulkm_WallOverrides.xhtml">
			<ui:param name="reRender" value="catWallDtlsEditForm,infoLayout" />
			<ui:param name="pageURL" value="Yes" />
		</ui:include>
		<ui:include src="createm_WallNote.xhtml">
			<ui:param name="pageURL" value="Yes" />
		</ui:include>

	</ui:define>
	<ui:define name="notes">
		<ui:include src="WallDetailsNotes.xhtml" />
	</ui:define>
</ui:composition>
