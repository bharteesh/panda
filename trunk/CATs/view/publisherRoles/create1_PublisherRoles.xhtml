<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:dui="http://openorganize.com/platform/dui">

	<h2><h:outputText value="#{createPublisherRolesWizard.createTitle}" /></h2>

	<div id="step1">
	<ul class="steps">
		<li class="selected">1. Choose Pub</li>
		<li class="disabled">2. Add</li>
		<li class="disabled">3. Optional</li>
		<li class="disabled">4. Results</li>
	</ul>
			<!-- Shows hour glass when the table is loading -->
	<div class="cluster smart">

	<p>Choose one of the followings Publisher(s).</p>

	<s:fragment>

		<s:div id="choosePublishersFragment">
			<h:inputText id="default_search_catPublishersList"
				value="#{catPublishersList.catPublishers.catName}"
				onchange="return false;" />

			<a:commandLink styleClass="button small"
				status="globalWaitStatus" ignoreDupResponses="true" 
				value="Filter list on Publisher Name"
				action="#{createPublisherRolesWizard.narrowPublisherList(rich:findComponent('default_search_catPublishersList').value)}"
				reRender="choosePublishersFragment" />

			<h:outputText
				value="#{empty catPublishersList.resultList ? 0 : (catPublishersList.paginated ? catPublishersList.resultCount : catPublishersList.resultList.size)} Sets total" />



			<div class="scroller"><rich:dataTable id="publishers"
				value="#{catPublishersList.resultList}" var="_publisher">
				<rich:column styleClass="checkBoxes" headerClass="checkBoxes">
					<h:selectBooleanCheckbox styleClass="publisher_checkbox"
						value="#{createPublisherRolesWizard.selectionsForPublishers[_publisher]}"
						onclick="emulateRadios(this, 'publisher_checkbox');" />
				</rich:column>

				<cats:wizardColumn entityList="#{catPublishersList}"
					propertyLabel="ID" propertyName="id"
					propertyPath="catPublishers.id"
					propertyValue="#{catPublishersList.catPublishers.id}"
					reRender="publishers" value="#{_publisher.id}" />
				<cats:wizardColumn entityList="#{catPublishersList}"
					propertyLabel="Name" propertyName="catName"
					propertyPath="catPublishers.catName"
					propertyValue="#{catPublishersList.catPublishers.catName}"
					reRender="publishers" value="#{_publisher.catName}" />
				<cats:wizardColumn entityList="#{catPublishersList}"
					propertyLabel="Organization Type"
					propertyName="catOrganizationType"
					propertyPath="catPublishers.catOrganizationType"
					propertyValue="#{catPublishersList.catPublishers.catOrganizationType}"
					reRender="publishers" value="#{_publisher.catOrganizationType.label}" />
				<cats:wizardColumn entityList="#{catPublishersList}"
					propertyLabel="Country" propertyName="catCountry"
					propertyPath="catPublishers.catCountry"
					propertyValue="#{catPublishersList.catPublishers.catCountry}"
					reRender="publishers" value="#{_publisher.catCountry.label}" />
			</rich:dataTable></div>
		</s:div>
	</s:fragment> </div>

	<div class="push"></div>


	<a:commandLink styleClass="button" value="Quit"
		eventsQueue="#{divParam}eventsQueue"
		status="globalWaitStatus" ignoreDupResponses="true" 
		reRender="createPublisherRolesWizard"
		oncomplete="#{rich:component('createPublisherRolesQuit')}.show(); return false;">
	</a:commandLink> <a:commandLink styleClass="button right" value="Continue"
		eventsQueue="#{divParam}eventsQueue"
		status="globalWaitStatus" ignoreDupResponses="true" 
		onclick="if(checkRadios('publisher_checkbox', 'Please select a Publisher') == false) {return false}"
		action="#{createPublisherRolesWizard.createNext}"
		reRender="createPublisherRolesWizard" /></div>
</ui:composition>

