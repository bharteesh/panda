<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	template="../layout/list_template.xhtml">

	<ui:param name="entityType" value="bookVersions" />
	<ui:param name="moremenu" value="moremenu" />

	<ui:define name="body">

		<ui:include src="../layout/tablenav.xhtml">
			<ui:param name="viewPath" value="/lists/CatBookVersionsList.xhtml"></ui:param>
			<ui:param name="entityList" value="#{catBookVersionsList}"></ui:param>
			<ui:param name="divId" value="1" />
		</ui:include>

		<a:form>
			<s:div id="bsheader" styleclass="header">

				<div class="left">
					<span class="museo"> <h:outputText
							value="Book PDFs
(#{empty catBookVersionsList.resultList ? 0 : (catBookVersionsList.paginated ? catBookVersionsList.resultCount : catBookVersionsList.resultList.size)})"></h:outputText>
					</span>


					<h:selectOneMenu name="flavour"
						value="#{catBookVersionsList.flavour}">
						<s:selectItems value="#{catBookVersionsList.flavours}" var="i"
							itemValue="#{i}" label="#{catBookVersionsList.flavourLabel(i)}" />
						<a:support event="onchange"
							action="#{catBookVersionsList.updateUserSkinPreferences}"
							oncomplete="javascript: location.href='CatBookVersionsList.seam'" ignoreDupResponses="true"
							eventsQueue="bookVersionsListQueue" ajaxSingle="true" />
					</h:selectOneMenu>
					<s:link id="clearSearch" status="globalWaitStatus"
						ignoreDupResponses="true" styleClass="button wizard"
						action="#{catBookVersionsList.reset}" value="X" ajaxSingle="true"
						propagation="none"
						oncomplete="javascript: location.href='CatBookVersionsList.seam'">
						<f:param name="flavour" value="#{catBookVersionsList.flavour}" />
					</s:link>
				</div>
				<div class="right">
					<ui:include src="adhocReportSelect.xhtml">
						<ui:param name="entityQuery" value="#{catBookVersionsList}" />
					</ui:include>

				</div>
			</s:div>
			<!-- Shows hour glass when the table is loading -->
			<div id="globalStatusDiv" style="display: none;">
				<img src="../img/Animated-Hourglass.gif" />
			</div>
			<a:status id="globalWaitStatus" forceId="true" layout="none"
				onstart="jQuery('#globalStatusDiv').fadeIn('fast')"
				onstop="jQuery('#globalStatusDiv').fadeOut('slow')" />
				
			<div class="push" />

			<div id="mainlistscroller">
				<h:dataTable id="catBookVersionsList" var="_catBookVersions"
					value="#{catBookVersionsList.resultList}" rowClasses="odd,even"
					styleClass="mainListClass">
					
					<cats:column linkToId="#{_catBookVersions.id}"
						rendered="#{catBookVersionsList.listFlavour['id']}"
						entityList="#{catBookVersionsList}" propertyLabel="ID"
						propertyPath="catBookVersions.id"
						propertyValue="#{catBookVersionsList.catBookVersions.id}"
						propertyName="id" sortable="true" value="#{_catBookVersions.id}" />
				
						<cats:column linkToId="#{_catBookVersions.id}"
						rendered="#{catBookVersionsList.listFlavour['catSequenceNo']}"
						entityList="#{catBookVersionsList}" propertyLabel="Sequence"
						propertyPath="catBookVersions.catSequenceNo"
						propertyValue="#{catBookVersionsList.catBookVersions.catSequenceNo}"
						propertyName="catSequenceNo" sortable="true" value="#{_catBookVersions.catSequenceNo}" />
					
						<cats:column linkToId="#{_catBookVersions.id}" 
						rendered="#{catBookVersionsList.listFlavour['catBook.id']}"
						entityList="#{catBookVersionsList}" propertyLabel="Book ID"
						propertyPath="catBookVersions.catBook.id"
						propertyValue="#{catBookVersionsList.catBookVersions.catBook.id}"
						propertyName="catBook.id" sortable="true" value="#{_catBookVersions.catBook.id}" />
							
						<cats:column linkToId="#{_catBookVersions.id}"
						enumList="#{listsForEnums.catBookVersions_Lifecycle}"
						rendered="#{catBookVersionsList.listFlavour['catLifecycle']}"
						entityList="#{catBookVersionsList}" propertyLabel="Status"
						propertyPath="catBookVersions.catLifecycle"
						propertyValue="#{catBookVersionsList.catBookVersions.catLifecycle}"
						propertyName="catLifecycle" sortable="true"
						value="#{_catBookVersions.catLifecycle.label}" />
						
					<cats:column linkToId="#{_catBookVersions.id}" sortable="true"
						rendered="#{catBookVersionsList.listFlavour['catDateCreated']}"
						entityList="#{catBookVersionsList}"
						propertyLabel="Date Created"
						propertyPath="catBookVersions.catDateCreated"
						propertyValue="#{catBookVersionsList.catBookVersions.catDateCreated}"
						propertyName="catDateCreated"
						value="#{_catBookVersions.catDateCreated}">
						<s:convertDateTime type="both" pattern="yyyy/MM/dd"></s:convertDateTime>
					</cats:column>
					
					<cats:column linkToId="#{_catBookVersions.id}" sortable="true"
						rendered="#{catBookVersionsList.listFlavour['catDatePdfRcvd']}"
						entityList="#{catBookVersionsList}"
						propertyLabel="PDF Received"
						propertyPath="catBookVersions.catDatePdfRcvd"
						propertyValue="#{catBookVersionsList.catBookVersions.catDatePdfRcvd}"
						propertyName="catDatePdfRcvd"
						value="#{_catBookVersions.catDatePdfRcvd}">
						<s:convertDateTime type="both" pattern="yyyy/MM/dd"></s:convertDateTime>
					</cats:column>
					
					<cats:column linkToId="#{_catBookVersions.id}"
						enumList="#{listsForEnums.catBookVersions_ReasonExcluded}"
						rendered="#{catBookVersionsList.listFlavour['catReasonExcluded']}"
						entityList="#{catBookVersionsList}" propertyLabel="Reason Excluded"
						propertyPath="catBookVersions.catReasonExcluded"
						propertyValue="#{catBookVersionsList.catBookVersions.catReasonExcluded}"
						propertyName="catReasonExcluded" sortable="true"
						value="#{_catBookVersions.catReasonExcluded.label}" />
					
									
				
					<cats:column linkToId="#{_catBookVersions.id}"
						rendered="#{catBookVersionsList.listFlavour['catConprepBatch']}"
						entityList="#{catBookVersionsList}" propertyLabel="Conprep Batch"
						propertyPath="catBookVersions.catConprepBatch"
						propertyValue="#{catBookVersionsList.catBookVersions.catConprepBatch}"
						propertyName="catConprepBatch" sortable="true" value="#{_catBookVersions.catConprepBatch}" />
 						
					<cats:column linkToId="#{_catBookVersions.id}"
						rendered="#{catBookVersionsList.listFlavour['catConprepBatchId']}"
						entityList="#{catBookVersionsList}" propertyLabel="Conprep Batch ID"
						propertyPath="catBookVersions.catConprepBatchId"
						propertyValue="#{catBookVersionsList.catBookVersions.catConprepBatchId}"
						propertyName="catConprepBatchId" sortable="true" value="#{_catBookVersions.catConprepBatchId}" />
						
					<cats:column linkToId="#{_catBookVersions.id}"
						rendered="#{catBookVersionsList.listFlavour['catPdfFilename']}"
						entityList="#{catBookVersionsList}" propertyLabel="PDF Filepath"
						propertyPath="catBookVersions.catPdfFilename"
						propertyValue="#{catBookVersionsList.catBookVersions.catPdfFilename}"
						propertyName="catPdfFilename" sortable="true" value="#{_catBookVersions.catPdfFilename}" />
										
					<cats:column linkToId="#{_catBookVersions.id}"
						rendered="#{catBookVersionsList.listFlavour['catPdfChecksum']}"
						entityList="#{catBookVersionsList}" propertyLabel="PDF Checksum"
						propertyPath="catBookVersions.catPdfChecksum"
						propertyValue="#{catBookVersionsList.catBookVersions.catPdfChecksum}"
						propertyName="catPdfChecksum" sortable="true" value="#{_catBookVersions.catPdfChecksum}" />
	
					<cats:column linkToId="#{_catBookVersions.id}"
						rendered="#{catBookVersionsList.listFlavour['catCreator']}"
						entityList="#{catBookVersionsList}" propertyLabel="Creator"
						propertyPath="catBookVersions.catCreator"
						propertyValue="#{catBookVersionsList.catBookVersions.catCreator}"
						propertyName="catCreator" sortable="true" value="#{_catBookVersions.catCreator}" />
					
					<cats:column linkToId="#{_catBookVersions.id}"
						rendered="#{catBookVersionsList.listFlavour['catPdfFilesize']}"
						entityList="#{catBookVersionsList}" propertyLabel="PDF Filesize"
						propertyPath="catBookVersions.catPdfFilesize"
						propertyValue="#{catBookVersionsList.catBookVersions.catPdfFilesize}"
						propertyName="catPdfFilesize" sortable="true" value="#{_catBookVersions.catPdfFilesize}" />
				
					<cats:column linkToId="#{_catBookVersions.id}" sortable="true"
						rendered="#{catBookVersionsList.listFlavour['catDateModified']}"
						entityList="#{catBookVersionsList}"
						propertyLabel="Date Modified"
						propertyPath="catBookVersions.catDateModified"
						propertyValue="#{catBookVersionsList.catBookVersions.catDateModified}"
						propertyName="catDateModified"
						value="#{_catBookVersions.catDateModified}">
						<s:convertDateTime type="both" pattern="yyyy/MM/dd  HH:mm:ss"></s:convertDateTime>
					</cats:column>
			
				</h:dataTable>
			</div>
		</a:form>
				<!-- when used in conjunction with a BaseListFlavour, this will order the columns per the configuration order. -->
		<rich:jQuery timing="onload" name="orderColumns"
			selector="#mainlistscroller > .mainListClass > thead:first-child > tr:first-child, #mainlistscroller > .mainListClass > tbody > tr"
			query="#{catBookVersionsList.listFlavour.getColumnOrderingJQuery()}" id="orderJQuery"/>
	</ui:define>
</ui:composition>