<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	template="../layout/list_template.xhtml">

	<ui:param name="entityType" value="imprints" />

	<ui:define name="body">

		<ui:include src="../layout/tablenav.xhtml">
			<ui:param name="viewPath" value="/lists/CatImprintsList.xhtml"></ui:param>
			<ui:param name="entityList" value="#{catImprintsList}"></ui:param>
			<ui:param name="divId" value="1" />
		</ui:include>

		<a:form>

			<s:div id="header" styleclass="header">

				<div class="left">
					<span class="museo"> <h:outputText
							value="Imprints
(#{empty catImprintsList.resultList ? 0 : (catImprintsList.paginated ? catImprintsList.resultCount : catImprintsList.resultList.size)})"></h:outputText>
					</span>


					<h:selectOneMenu name="flavour"
						value="#{catImprintsList.flavour}">
						<s:selectItems value="#{catImprintsList.flavours}" var="i"
							itemValue="#{i}" label="#{catImprintsList.flavourLabel(i)}" />
						<a:support event="onchange"
							action="#{catImprintsList.updateUserSkinPreferences}"
							oncomplete="javascript: location.href='CatImprintsList.seam'" ignoreDupResponses="true"
							eventsQueue="imprintsListQueue" ajaxSingle="true" />
					</h:selectOneMenu>
					<s:link id="clearSearch" status="globalWaitStatus"
						ignoreDupResponses="true" styleClass="button wizard"
						action="#{catImprintsList.reset}" value="X" ajaxSingle="true"
						propagation="none"
						oncomplete="javascript: location.href='catImprintsList.seam'">
						<f:param name="flavour" value="#{catImprintsList.flavour}" />
					</s:link>
				</div>
				<div class="right">
					<ui:include src="adhocReportSelect.xhtml">
						<ui:param name="entityQuery" value="#{catImprintsList}" />
					</ui:include>
					<a:commandLink id="createImprintButton"
						status="globalWaitStatus" ignoreDupResponses="true"
					    action="#{createImprintWizard.prepCreateOperation()}"
						value="Add Imprint"
						reRender="createImprintPanels,catImprintsList"
						styleClass="button wizard #{!s:hasPermission(catImprintsHome.instance, 'create CatImprints') ? 'disabled' : ''}"
						disabled="#{!s:hasPermission(catImprintsHome.instance, 'create CatImprints')}"
						oncomplete="Richfaces.showModalPanel('createImprintPanel');"
						ajaxSingle="true"
						limitToList="true"/>
						
				</div>

			<!--styleClass="button wizard #{!s:hasPermission(catImprintsHome.instance, 'create CatImprints') ? 'disabled' : ''}"
				disabled="#{!s:hasPermission(catImprintsHome.instance, 'create CatImprints')}" -->
				
			</s:div>
			<!-- Shows hour glass when the table is loading -->
			<div id="globalStatusDiv" style="display: none;">
				<img src="../img/Animated-Hourglass.gif" />
			</div>
			<a:status id="globalWaitStatus" forceId="true" layout="none"
				onstart="jQuery('#globalStatusDiv').fadeIn('fast')"
				onstop="jQuery('#globalStatusDiv').fadeOut('slow')" />

			<div class="push" />

			<div id="mainlistscroller">

				<h:dataTable id="catImprintsList" var="_catImprints"
					value="#{catImprintsList.resultList}" rowClasses="odd,even"
					styleClass="mainListClass">

					
					<cats:column linkToId="#{_catImprints.id}" styleClass="id"
						rendered="#{catImprintsList.listFlavour['id']}"
						entityList="#{catImprintsList}" propertyLabel="ID"
						propertyPath="catImprints.id"
						propertyValue="#{catImprintsList.catImprints.id}"
						propertyName="id" sortable="true" value="#{_catImprints.id}" />
					<cats:column linkToId="#{_catImprints.id}" styleClass="mainName"
						rendered="#{catImprintsList.listFlavour['mainName']}"
						entityList="#{catImprintsList}" propertyLabel="Name"
						propertyPath="catImprints.mainName"
						propertyValue="#{catImprintsList.catImprints.mainName}"
						propertyName="mainName" sortable="true"
						value="#{_catImprints.mainName}" />
					<cats:column linkToId="#{_catImprints.id}" styleClass="publishersValue"
						rendered="#{catImprintsList.listFlavour['publishersValue']}"
						entityList="#{catImprintsList}" propertyLabel="Publishers"
						propertyPath="catImprints.publishersValue"
						propertyValue="#{catImprintsList.catImprints.publishersValue}"
						propertyName="publishersValue" sortable="true"
						value="#{_catImprints.publishersValue}" />
					<cats:column linkToId="#{_catImprints.id}" styleClass="catLtmIdPrefix"
						rendered="#{catImprintsList.listFlavour['catLtmIdPrefix']}"
						entityList="#{catImprintsList}" propertyLabel="LTM ID Prefix"
						propertyPath="catImprints.catLtmIdPrefix"
						propertyValue="#{catImprintsList.catImprints.catLtmIdPrefix}"
						propertyName="catLtmIdPrefix" sortable="true"
						value="#{_catImprints.catLtmIdPrefix}" />
					<cats:column linkToId="#{_catImprints.id}" styleClass="catLtmCode"
						rendered="#{catImprintsList.listFlavour['catLtmCode']}"
						entityList="#{catImprintsList}" propertyLabel="LTM Code"
						propertyPath="catImprints.catLtmCode"
						propertyValue="#{catImprintsList.catImprints.catLtmCode}"
						propertyName="catLtmCode" sortable="true"
						value="#{_catImprints.catLtmCode}" />
					<cats:column linkToId="#{_catImprints.id}" styleClass="catDisplayOnPlatform"
						rendered="#{catImprintsList.listFlavour['catDisplayOnPlatform']}"
						entityList="#{catImprintsList}" propertyLabel="Display on Platform"
						propertyPath="catImprints.catDisplayOnPlatform"
						propertyValue="#{catImprintsList.catImprints.catDisplayOnPlatform}"
						propertyName="catDisplayOnPlatform" sortable="true"
						enumList="#{listsForEnums.yesNo}"
						value="#{_catImprints.catDisplayOnPlatform ? 'Yes' : 'No'}" />
					
					
					<cats:column linkToId="#{_catImprints.id}" sortable="true"
						rendered="#{catImprintsList.listFlavour['catDateModified']}"
						entityList="#{catImprintsList}" propertyLabel="Date Modified"
						propertyPath="catImprints.catDateModified"
						propertyValue="#{catImprintsList.catImprints.catDateModified}"
						propertyName="catDateModified"
						value="#{_catImprints.catDateModified}">
						<s:convertDateTime type="both" pattern="yyyy/MM/dd HH:mm:ss"></s:convertDateTime>
					</cats:column>
				
				</h:dataTable>
			</div>
		</a:form>

		<ui:include src="../layout/tablenav.xhtml">
			<ui:param name="viewPath" value="/lists/CatImprintsList.xhtml"></ui:param>
			<ui:param name="entityList" value="#{catImprintsList}"></ui:param>
			<ui:param name="divId" value="2" />
		</ui:include>
		<ui:include src="../imprints/createImprint_modal.xhtml"></ui:include>

		<!-- when used in conjunction with a BaseListFlavour, this will order the columns per the configuration order. -->
		<rich:jQuery timing="onload" name="orderColumns"
			selector="#mainlistscroller > .mainListClass > thead:first-child > tr:first-child, #mainlistscroller > .mainListClass > tbody > tr"
			query="#{catImprintsList.listFlavour.getColumnOrderingJQuery()}" id="orderJQuery"/>
	</ui:define>
</ui:composition>
