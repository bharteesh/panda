<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	template="../layout/list_template.xhtml">

	<ui:param name="entityType" value="publishers" />

	<ui:define name="body">

		<ui:include src="../layout/tablenav.xhtml">
			<ui:param name="viewPath" value="/lists/CatPublishersList.xhtml"></ui:param>
			<ui:param name="entityList" value="#{catPublishersList}"></ui:param>
			<ui:param name="divId" value="1" />
		</ui:include>

		<a:form>

			<s:div id="header" styleclass="header">

				<div class="left">
					<span class="museo"> <h:outputText
							value="Publishers
(#{empty catPublishersList.resultList ? 0 : (catPublishersList.paginated ? catPublishersList.resultCount : catPublishersList.resultList.size)})"></h:outputText>
					</span>


					<h:selectOneMenu name="flavour"
						value="#{catPublishersList.flavour}">
						<s:selectItems value="#{catPublishersList.flavours}" var="i"
							itemValue="#{i}" label="#{catPublishersList.flavourLabel(i)}" />
						<a:support event="onchange"
							action="#{catPublishersList.updateUserSkinPreferences}"
							oncomplete="javascript: location.href='CatPublishersList.seam'" ignoreDupResponses="true"
							eventsQueue="pubsListQueue" ajaxSingle="true" />
					</h:selectOneMenu>
					<s:link id="clearSearch" status="globalWaitStatus"
						ignoreDupResponses="true" styleClass="button wizard"
						action="#{catPublishersList.reset}" value="X" ajaxSingle="true"
						propagation="none"
						oncomplete="javascript: location.href='CatPublishersList.seam'">
						<f:param name="flavour" value="#{catPublishersList.flavour}" />
					</s:link>
				</div>
				<!--  
			<div class="right"><h:selectOneMenu id="catPublishersListBulkOperationsSelect"
				rendered="#{not empty catPublishersBulkOperations.bulkOperationsNames}"
    				value="#{catPublishersBulkOperations.bulkOperationsType}">
				<a:support event="onchange"
					action="#{catPublishersBulkOperations.prepBulkOperations( 'catPublishersList', 'catPublishersListBulkOperationsSelect' )}"
					reRender="catPublishersListBulkOperationsPanels,catPublishersList"
					oncomplete="if ( #{rich:element('catPublishersListBulkOperationsSelect')}.options.selectedIndex != 0 ) { #{rich:component('catPublishersListBulkUpdatePanel')}.show(); } ; return false; " />
				<s:selectItems value="#{catPublishersBulkOperations.bulkOperationsNames}" var="b"
					label="#{catPublishersBulkOperations.bulkOperations[b]}" itemValue="#{b}"
					noSelectionLabel="Bulk Operations" />
			</h:selectOneMenu></div>
-->


				<div class="right">
					<ui:include src="adhocReportSelect.xhtml">
						<ui:param name="entityQuery" value="#{catPublishersList}" />
					</ui:include>
					<a:commandLink id="createPublishersEditButton"
						status="globalWaitStatus" ignoreDupResponses="true"
					    action="#{createPublishersWizard.prepCreateOperation('CREATEPUBLISHERS')}"
						value="Add Publisher"
						reRender="createPublishersOperationsPanels,catPublishersList" 
						oncomplete="Richfaces.showModalPanel('createPublishersPanel');"
						styleClass="button wizard #{!s:hasPermission(catPublishersHome.instance, 'create CatPublishers') ? 'disabled' : ''}"
						disabled="#{!s:hasPermission(catPublishersHome.instance, 'create CatPublishers')}"
						ajaxSingle="true"
						limitToList="true"/>
						
				</div>

			</s:div>
			<!-- Shows hour glass when the table is loading -->
			<div id="globalStatusDiv" style="display: none;">
				<img src="../img/Animated-Hourglass.gif" />
			</div>
			<a:status id="globalWaitStatus" forceId="true" layout="none"
				onstart="jQuery('#globalStatusDiv').fadeIn('fast')"
				onstop="jQuery('#globalStatusDiv').fadeOut('slow')" />

			<div class="push" />

			<div id="mainlistscroller">

				<h:dataTable id="catPublishersList" var="_catPublishers"
					value="#{catPublishersList.resultList}" rowClasses="odd,even"
					styleClass="mainListClass">

					<rich:column styleClass="checkBoxes" headerClass="checkBoxes"
						rendered="#{not empty catPublishersBulkOperations.bulkOperationsNames}">
						<f:facet name="header">
							<h:panelGrid columns="1">
								<h:outputText value=" " />
								<input type="checkbox" id="select_all_checkbox"
									name="select_all_checkbox"
									onclick="toggleCheckboxes(this.checked, 'bulk_checkbox');" />
							</h:panelGrid>
						</f:facet>
						<div onclick="cancelEventBubbling(event);">
							<h:selectBooleanCheckbox styleClass="bulk_checkbox checkBoxes"
								value="#{catPublishersBulkOperations.selections[_catPublishers]}" />
						</div>
					</rich:column>

					<cats:column linkToId="#{_catPublishers.id}" styleClass="id"
						rendered="#{catPublishersList.listFlavour['id']}"
						entityList="#{catPublishersList}" propertyLabel="ID"
						propertyPath="catPublishers.id"
						propertyValue="#{catPublishersList.catPublishers.id}"
						propertyName="id" sortable="true" value="#{_catPublishers.id}" />
					<cats:column linkToId="#{_catPublishers.id}" styleClass="catName"
						rendered="#{catPublishersList.listFlavour['catName']}"
						entityList="#{catPublishersList}" propertyLabel="Name"
						propertyPath="catPublishers.catName"
						propertyValue="#{catPublishersList.catPublishers.catName}"
						propertyName="catName" sortable="true"
						value="#{_catPublishers.catName}" />
					<cats:column linkToId="#{_catPublishers.id}"
						styleClass="rolesValue"
						rendered="#{catPublishersList.listFlavour['rolesValue']}"
						entityList="#{catPublishersList}" propertyLabel="Roles"
						propertyPath="catPublishers.rolesValue"
						propertyValue="#{catPublishersList.catPublishers.rolesValue}"
						propertyName="rolesValue" sortable="true"
						value="#{_catPublishers.rolesValue}" rollup="true" />
					<cats:column linkToId="#{_catPublishers.id}"
						styleClass="catOrganizationType"
						rendered="#{catPublishersList.listFlavour['catOrganizationType']}"
						entityList="#{catPublishersList}"
						propertyLabel="Organization Type"
						propertyPath="catPublishers.catOrganizationType"
						propertyValue="#{catPublishersList.catPublishers.catOrganizationType}"
						propertyName="catOrganizationType" sortable="true"
						enumList="#{listsForEnums.catPublishers_OrganizationType_forList}"
						value="#{_catPublishers.catOrganizationType.label}" />
					<cats:column linkToId="#{_catPublishers.id}"
						styleClass="catCountry"
						rendered="#{catPublishersList.listFlavour['catCountry']}"
						entityList="#{catPublishersList}" propertyLabel="Country"
						propertyPath="catPublishers.catCountry"
						propertyValue="#{catPublishersList.catPublishers.catCountry}"
						propertyName="catCountry" sortable="true"
						enumList="#{listsForEnums.catPublishers_Country_forList}"
						value="#{_catPublishers.catCountry.label}" />
					<cats:column linkToId="#{_catPublishers.id}"
						styleClass="catLastOutrchDate"
						rendered="#{catPublishersList.listFlavour['catLastOutrchDate']}"
						entityList="#{catPublishersList}"
						propertyLabel="Last Outreach Date"
						propertyPath="catPublishers.catLastOutrchDate"
						propertyValue="#{catPublishersList.catPublishers.catLastOutrchDate}"
						propertyName="catLastOutrchDate" sortable="true"
						value="#{_catPublishers.catLastOutrchDate}">
						<s:convertDateTime type="date" pattern="yyyy/MM/dd"></s:convertDateTime>
					</cats:column>
					<cats:column linkToId="#{_catPublishers.id}" styleClass="catLogo"
						enumList="#{listsForEnums.yesNo}"
						rendered="#{catPublishersList.listFlavour['catLogo']}"
						entityList="#{catPublishersList}" propertyLabel="Logo"
						propertyPath="catPublishers.catLogo"
						propertyValue="#{catPublishersList.catPublishers.catLogo}"
						propertyName="catLogo" sortable="true"
						value="#{_catPublishers.catLogo ? 'Yes' : 'No'}" />
					<cats:column linkToId="#{_catPublishers.id}"
						styleClass="catTaxFormStatus"
						rendered="#{catPublishersList.listFlavour['catTaxFormStatus']}"
						entityList="#{catPublishersList}" propertyLabel="Tax Form"
						propertyPath="catPublishers.catTaxFormStatus"
						propertyValue="#{catPublishersList.catPublishers.catTaxFormStatus}"
						propertyName="catTaxFormStatus" sortable="true"
						enumList="#{listsForEnums.catPublishers_TaxFormStatus}"
						value="#{_catPublishers.catTaxFormStatus.label}" />
					<cats:column linkToId="#{_catPublishers.id}"
						styleClass="catTaxWithholdingPercent"
						rendered="#{catPublishersList.listFlavour['catTaxWithholdingPercent']}"
						entityList="#{catPublishersList}" propertyLabel="Withholding"
						propertyPath="catPublishers.catTaxWithholdingPercent"
						propertyValue="#{catPublishersList.catPublishers.catTaxWithholdingPercent}"
						propertyName="catTaxWithholdingPercent" sortable="true">
						<h:outputText value="#{_catPublishers.catTaxWithholdingPercent}">
							<f:convertNumber></f:convertNumber>
						</h:outputText>
					</cats:column>
					<cats:column linkToId="#{_catPublishers.id}"
						styleClass="sigNewestCompletedDate"
						rendered="#{catPublishersList.listFlavour['sigNewestCompletedDate']}"
						entityList="#{catPublishersList}" propertyLabel="Newest SIG"
						propertyPath="catPublishers.sigNewestCompletedDate"
						propertyValue="#{catPublishersList.catPublishers.sigNewestCompletedDate}"
						propertyName="sigNewestCompletedDate" sortable="true"
						value="#{_catPublishers.sigNewestCompletedDate}">
						<s:convertDateTime type="date" pattern="yyyy/MM/dd" />
					</cats:column>
					<cats:column linkToId="#{_catPublishers.id}"
						styleClass="catCrossRefMember" enumList="#{listsForEnums.yesNo}"
						rendered="#{catPublishersList.listFlavour['catCrossRefMember']}"
						entityList="#{catPublishersList}" propertyLabel="CrossRef Member"
						propertyPath="catPublishers.catCrossRefMember"
						propertyValue="#{catPublishersList.catPublishers.catCrossRefMember}"
						propertyName="catCrossRefMember" sortable="true"
						value="#{_catPublishers.catCrossRefMember ? 'Yes' : 'No'}" />
					<cats:column linkToId="#{_catPublishers.id}"
						styleClass="catCspMetadataProd"
						rendered="#{catPublishersList.listFlavour['catCspMetadataProd']}"
						entityList="#{catPublishersList}"
						propertyLabel="CSP MD Production"
						propertyPath="catPublishers.catCspMetadataProd"
						propertyValue="#{catPublishersList.catPublishers.catCspMetadataProd}"
						propertyName="catCspMetadataProd" sortable="true"
						enumList="#{listsForEnums.catPublishers_CspMetadataProd}"
						value="#{_catPublishers.catCspMetadataProd.label}" />
					<cats:column linkToId="#{_catPublishers.id}"
						styleClass="catUseableEback" enumList="#{listsForEnums.yesNo}"
						rendered="#{catPublishersList.listFlavour['catUseableEback']}"
						entityList="#{catPublishersList}" propertyLabel="Useable Eback"
						propertyPath="catPublishers.catUseableEback"
						propertyValue="#{catPublishersList.catPublishers.catUseableEback}"
						propertyName="catUseableEback" sortable="true"
						value="#{_catPublishers.catUseableEback ? 'Yes' : 'No'}" />

					<cats:column linkToId="#{_catPublishers.id}" sortable="true"
						rendered="#{catPublishersList.listFlavour['catDateModified']}"
						entityList="#{catPublishersList}" propertyLabel="Date Modified"
						propertyPath="catPublishers.catDateModified"
						propertyValue="#{catPublishersList.catPublishers.catDateModified}"
						propertyName="catDateModified"
						value="#{_catPublishers.catDateModified}">
						<s:convertDateTime type="both" pattern="yyyy/MM/dd HH:mm:ss"></s:convertDateTime>
					</cats:column>
					
					<cats:enumColumn linkToId="#{_catPublishers.id}"
						entityList="#{catPublishersList}"
						enumList="#{listsForEnums.catContracts_CatType}"
						enumValueMap="#{catPublishersList.productEnumValueMap}" 
						rendered="#{catPublishersList.listFlavour['participatingProductsValue']}"
						propertyLabel="Products"
						propertyPath="catPublishers.participatingProductsValue"
						propertyValue="#{catPublishersList.catPublishers.participatingProductsValue}"
						propertyName="participatingProductsValue"
						value="#{_catPublishers.participatingProductsValue}"
						reRender="catPublishersList,tableNav,header"
						sortable="true"/>
				
				</h:dataTable>
			</div>
		</a:form>

		<ui:include src="../layout/tablenav.xhtml">
			<ui:param name="viewPath" value="/lists/CatPublishersList.xhtml"></ui:param>
			<ui:param name="entityList" value="#{catPublishersList}"></ui:param>
			<ui:param name="divId" value="2" />
		</ui:include>

		<ui:include src="../publishers/bulkm_Publishers.xhtml">
		</ui:include>

		<ui:include src="../publishers/createm_Publishers.xhtml">
			<ui:param name="reRenderMe" value="catPublishersList" />
			<ui:param name="divParam" value="publishersList" />
		</ui:include>

		<!-- when used in conjunction with a BaseListFlavour, this will order the columns per the configuration order. -->
		<rich:jQuery timing="onload" name="orderColumns"
			selector="#mainlistscroller > .mainListClass > thead:first-child > tr:first-child, #mainlistscroller > .mainListClass > tbody > tr"
			query="#{catPublishersList.listFlavour.getColumnOrderingJQuery()}" id="orderJQuery"/>
	</ui:define>
</ui:composition>
