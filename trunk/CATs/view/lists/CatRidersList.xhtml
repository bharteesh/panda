<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.com/products/seam/taglib" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:rich="http://richfaces.org/rich" xmlns:a="http://richfaces.org/a4j" xmlns:cats="http://www.ithaka.org/cats" template="../layout/list_template.xhtml">
<ui:param name="entityType" value="riders"/>
  <ui:param name="moremenu" value="moremenu"/>


  <ui:define name="body">
	<ui:include src="../layout/tablenav.xhtml">
		<ui:param name="viewPath" value="/lists/CatRidersList.xhtml"></ui:param>
		<ui:param name="entityList" value="#{catRidersList}"></ui:param>
		<ui:param name="divId" value="1"/>
	</ui:include>

    <a:form>      

			<s:div id="header"  styleclass="header">
			

<div class="left"><span class="museo"><h:outputText
value="Riders
(#{empty catRidersList.resultList ? 0 : (catRidersList.paginated ? catRidersList.resultCount : catRidersList.resultList.size)})"></h:outputText>
</span> 

			  
			  <h:selectOneMenu
				name="flavour" value="#{catRidersList.flavour}">
				<s:selectItems value="#{catRidersList.flavours}" var="i"
					itemValue="#{i}" label="#{catRidersList.flavourLabel(i)}" />
				<a:support event="onchange" action="#{catRidersList.updateUserSkinPreferences}"
								oncomplete="javascript: location.href='CatRidersList.seam'"
								ignoreDupResponses="true"
								eventsQueue="ridersListQueue"
								ajaxSingle="true"/>					
			</h:selectOneMenu>
			<s:link  id="clearSearch" 
				status="globalWaitStatus" ignoreDupResponses="true" 
				styleClass="button wizard" 
				action="#{catRidersList.reset}" 
				value="X" 
				ajaxSingle="true"  propagation="none"
				oncomplete="javascript: location.href='CatRidersList.seam'">
				<f:param name="flavour" value="#{catRidersList.flavour}"/>
			</s:link>
			</div>

			<div class="right"><h:selectOneMenu id="catRidersListBulkOperationsSelect"
				rendered="#{not empty catRidersBulkOperations.bulkOperationsNames}"
    				value="#{catRidersBulkOperations.bulkOperationsType}">
				<a:support event="onchange"
					status="globalWaitStatus" ignoreDupResponses="true" 
					action="#{catRidersBulkOperations.prepBulkOperations( 'catRidersList', 'catRidersListBulkOperationsSelect' )}"
					reRender="catRidersListBulkOperationsPanels,catRidersList"
					oncomplete="if ( #{rich:element('catRidersListBulkOperationsSelect')}.options.selectedIndex != 0 ) { #{rich:component('catRidersListBulkUpdatePanel')}.show(); } ; return false; " 
					/>
				<s:selectItems value="#{catRidersBulkOperations.bulkOperationsNames}" var="b"
					label="#{catRidersBulkOperations.bulkOperations[b]}" itemValue="#{b}"
					noSelectionLabel="Bulk Operations" />
			</h:selectOneMenu>

				<ui:include src="adhocReportSelect.xhtml"><ui:param name="entityQuery" value="#{catRidersList}"/></ui:include>
				<a:commandLink id="createRidersEditButton"
				status="globalWaitStatus" ignoreDupResponses="true"
			    action="#{createRidersWizard.prepCreateOperation('CREATERIDERS')}"
				value="Add Rider"
				reRender="createRidersOperationsPanels,catRidersList" 
				oncomplete="Richfaces.showModalPanel('createRidersPanel');"
				styleClass="button wizard"
				ajaxSingle="true"/>

</div>
			
			</s:div>
			<!-- Shows hour glass when the table is loading -->
			<div id="globalStatusDiv" style="display: none;"><img
				src="../img/Animated-Hourglass.gif" /></div>
			<a:status id="globalWaitStatus" forceId="true" layout="none"
				onstart="jQuery('#globalStatusDiv').fadeIn('fast')"
				onstop="jQuery('#globalStatusDiv').fadeOut('slow')" />

			<div class="push" />

			<div id="mainlistscroller">


<h:dataTable id="catRidersList" var="_catRiders" value="#{catRidersList.resultList}" 
rendered="#{not empty catRidersList.resultList}" rowClasses="odd,even" 
styleClass="mainListClass">

<rich:column styleClass="checkBoxes" headerClass="checkBoxes" rendered="#{not empty catRidersBulkOperations.bulkOperationsNames}"><f:facet name="header"><h:panelGrid columns="1"><h:outputText value=" " /><input type="checkbox" id="select_all_checkbox" name="select_all_checkbox" onclick="toggleCheckboxes(this.checked, 'bulk_checkbox');" /></h:panelGrid></f:facet><div onclick="cancelEventBubbling(event);"><h:selectBooleanCheckbox styleClass="bulk_checkbox checkBoxes" value="#{catRidersBulkOperations.selections[_catRiders]}" /></div></rich:column>
        
        <cats:column styleClass="id" rendered="#{catRidersList.listFlavour['id']}"
          linkToId="#{_catRiders.id}" 
            
              entityList="#{catRidersList}" 
              propertyLabel="ID" 
              propertyPath="catRiders.id" 
              propertyValue="#{catRidersList.catRiders.id}" 
              propertyName="id" 
              sortable="true"
            
          
          value="#{_catRiders.id}" 
        ></cats:column>
        <cats:column styleClass="catName" rendered="#{catRidersList.listFlavour['catName']}"
          linkToId="#{_catRiders.id}" 
            
              entityList="#{catRidersList}" 
              propertyLabel="Name" 
              propertyPath="catRiders.catName" 
              propertyValue="#{catRidersList.catRiders.catName}" 
              propertyName="catName" 
              sortable="true"
            
          
          value="#{_catRiders.catName}" 
        ></cats:column>
        
        
        <cats:column linkToId="#{_catRiders.id}" sortable="true"
					rendered="#{catRidersList.listFlavour['catDateModified']}"
					entityList="#{catRidersList}"
					propertyLabel="Date Modified"
					propertyPath="catRiders.catDateModified"
					propertyValue="#{catRidersList.catRiders.catDateModified}"
					propertyName="catDateModified"
					value="#{_catRiders.catDateModified}">
					<s:convertDateTime type="both" pattern="yyyy/MM/dd HH:mm:ss"></s:convertDateTime>
				</cats:column>
        
        </h:dataTable></div>
    </a:form>

<ui:include src="../layout/tablenav.xhtml">
<ui:param name="viewPath" value="/lists/CatRidersList.xhtml"></ui:param>
<ui:param name="entityList" value="#{catRidersList}"></ui:param>
<ui:param name="divId" value="2"/>
</ui:include>

	<ui:include src="../riders/createm_Riders.xhtml">
		   <ui:param name="reRenderMe" value="catRidersList"/>
		   <ui:param name="divParam" value="ridersList"/>
	</ui:include>

 <rich:jQuery timing="onload" name="orderColumns"
			selector="#mainlistscroller > .mainListClass > thead:first-child > tr:first-child, #mainlistscroller > .mainListClass > tbody > tr"
			query="#{catRidersList.listFlavour.getColumnOrderingJQuery()}" id="orderJQuery"/>
</ui:define>
</ui:composition>
