<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:dui="http://openorganize.com/platform/dui">

	<h2><h:outputText value="#{createWallDetailsWizard.createTitle}" /></h2>

	<div id="step1">
	<ul class="steps">
		<li class="">1. Select</li>
		<li class="disabled">2. Main</li>
		<li class="disabled">3. Additional</li>
		<li class="disabled">4. Results</li>
	</ul>
	<div class="cluster smart">
	<p>
	Conversation ID:<h:outputText value="#{conversation.id}"/><br />
Is long running?:<h:outputText value="#{conversation.longRunning}"/><br />
	</p>
	<s:fragment
		rendered="#{empty createWallDetailsWizard.setsToAddTo}">
		<p>Choose one of the followings Sets:</p>


<s:div id="chooseSetsFragment">
		  <h:inputText id="default_search_catSetsList" value="#{catSetsList.catSets.catCurrentTitle.catName}" onchange="return false;"/>

		  <a:commandLink 
		  		 styleClass="button small"
				 value="Filter list on Set Name"
				 action="#{createWallDetailsWizard.narrowList(rich:findComponent('default_search_catSetsList').value)}"
				 reRender="chooseSetsFragment"
				 status="globalWaitStatus"
				 />

		  <h:outputText value="#{empty catSetsList.resultList ? 0 : (catSetsList.paginated ? catSetsList.resultCount : catSetsList.resultList.size)} Sets total"/>

		

			<div class="scroller">


			  <rich:dataTable id="sets"
				value="#{catSetsList.resultList}" var="_setsRollup">
				<rich:column styleClass="checkBoxes" headerClass="checkBoxes">
					<h:selectBooleanCheckbox styleClass="sets_checkbox"
						value="#{createWallDetailsWizard.selectionsForSets[_setsRollup]}"
						onclick="emulateRadios(this, 'sets_checkbox');" />
				</rich:column>

		<cats:wizardColumn
			entityList="#{catSetsList}"
			propertyLabel="ID"
			propertyName="id"
			propertyPath="catSets.id"
			propertyValue="#{catSetsList.catSets.id}"
			reRender="sets"
			value="#{_setsRollup.id}"
		/>
		<cats:wizardColumn
			entityList="#{catSetsList}"
			propertyLabel="Name"
			propertyName="catName"
			propertyPath="catSets.catCurrentTitle.catName"
			propertyValue="#{catSetsList.catSets.catCurrentTitle.catName}"
			reRender="sets"
			value="#{_setsRollup.catCurrentTitle.catName}"
		/>
		<cats:wizardColumn
			entityList="#{catSetsList}"
			propertyLabel="Lifecycle"
			propertyName="catLifecycle"
			propertyPath="catSets.catLifecycle"
			propertyValue="#{catSetsList.catLifecycle}"
			reRender="sets"
			value="#{_setsRollup.catLifecycle}"
		/>
		<cats:wizardColumn
			entityList="#{catSetsList}"
			propertyLabel="Extent (Dates)"
			propertyName="catThDateRange"
			propertyPath="catSets.catThDateRange"
			propertyValue="#{catSetsList.catSets.catThDateRange}"
			reRender="sets"
			value="#{_setsRollup.catThDateRange}"
		/>
		<cats:wizardColumn
			entityList="#{catSetsList}"
			propertyLabel="On Hold"
			propertyName="catOnHold"
			propertyPath="catSets.catOnHold"
			propertyValue="#{catSetsList.catSets.catOnHold}"
			reRender="sets"
			value="#{_setsRollup.catOnHold}"
		/>
			</rich:dataTable>
			</div>
	</s:div>
	</s:fragment>
	
	
	<s:fragment rendered="#{not empty createWallDetailsWizard.setsToAddTo}">
		<p><h:outputText value="You have chosen to make a Wall Details for the Set "/><em><h:outputText value="#{createWallDetailsWizard.setsToAddTo.catCurrentTitle.catName}"/></em>.</p>
	</s:fragment>
	
	
	</div>

	<div class="push"></div>

	<a:commandLink styleClass="button" value="Quit"
		reRender="createWallDetailswizard,#{reRenderMe}"
		action="#{createWallDetailsWizard.createReset}"
		oncomplete="#{rich:component('createWallDetailsPanel')}.hide();"
		rendered="#{not createWallDetailsWizard.isPubStatusSubWizard}"
		eventsQueue="createWallDetails" status="globalWaitStatus">
	</a:commandLink> 
	
	<a:commandLink styleClass="button" value="Quit"
			reRender="createWallDetailswizard"
			oncomplete="#{rich:component('createWallDetailsQuit')}.show(); return false;"
			rendered="#{createWallDetailsWizard.isPubStatusSubWizard}"
			eventsQueue="createWallDetails" status="globalWaitStatus">
		</a:commandLink> 
	
	<s:fragment rendered="#{not empty createWallDetailsWizard.setsToAddTo}">
		<a:commandLink styleClass="button right" value="Continue"
			action="#{createWallDetailsWizard.createNext}"
			reRender="createWallDetailswizard" 
			eventsQueue="createWallDetails" status="globalWaitStatus"/>
	</s:fragment>
	
	<s:fragment rendered="#{empty createWallDetailsWizard.setsToAddTo}">
		<a:commandLink styleClass="button right" value="Continue"
			onclick="if(checkRadios('sets_checkbox', 'Please select a Set') == false) {return false}"
			action="#{createWallDetailsWizard.createNext}"
			reRender="createWallDetailswizard" 
			eventsQueue="createWallDetails" status="globalWaitStatus">
			</a:commandLink>
	</s:fragment>
			</div>
</ui:composition>

