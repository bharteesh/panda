<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:z="http://www.qualcomm.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:cats="http://www.ithaka.org/cats"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:dui="http://openorganize.com/platform/dui">

	<h2><h:outputText value="#{createInvitationsWizard.createTitle}" /></h2>

	<div id="step1">
	<ul class="steps">
		<li class="selected">1. Set</li>
		<li class="disabled">2. Publisher</li>
		<li class="disabled">3. Additional</li>
		<li class="disabled">4. Results</li>
	</ul>

	<div class="cluster smart">

	<p>Choose one of the followings Set(s).</p>

	<s:div id="chooseSetsFragment">
		<h:inputText id="default_search_catSetsList"
			value="#{catSetsList.catSets.catCurrentTitle.catName}"
			onchange="return false;"  size="60"/>

		<a:commandLink styleClass="button filter" value="Go"
			action="#{createInvitationsWizard.narrowSetsList(rich:findComponent('default_search_catSetsList').value)}"
			reRender="chooseSetsFragment" status="globalWaitStatus"
			ignoreDupResponses="true" />


		<div class="scroller">
		
		<rich:panel>
				<f:facet name="header">
					<h:outputText value="Sets (#{catSetsList.resultCount})" />
				</f:facet>
			</rich:panel> 
		<rich:dataTable id="sets"
			value="#{catSetsList.resultList}" var="_setsRollup">
			<rich:column styleClass="checkBoxes" headerClass="checkBoxes">
				<h:selectBooleanCheckbox styleClass="sets_checkbox"
					value="#{createInvitationsWizard.selectionsForSets[_setsRollup]}"
					onclick="emulateRadios(this, 'sets_checkbox');" />
			</rich:column>

			<cats:wizardColumn entityList="#{catSetsList}" propertyLabel="ID"
				propertyName="id" propertyPath="catSets.id"
				propertyValue="#{catSetsList.catSets.id}" reRender="sets"
				value="#{_setsRollup.id}" />
			<cats:wizardColumn entityList="#{catSetsList}" propertyLabel="Name"
				propertyName="catName"
				propertyPath="catSets.catCurrentTitle.catName"
				propertyValue="#{catSetsList.catSets.catCurrentTitle.catName}"
				reRender="sets" value="#{_setsRollup.catCurrentTitle.catName}" />
			<cats:wizardColumn entityList="#{catSetsList}"
				propertyLabel="Lifecycle" propertyName="catLifecycle"
				propertyPath="catSets.catLifecycle"
				propertyValue="#{catSetsList.catLifecycle}" reRender="sets"
				value="#{_setsRollup.catLifecycle.label}" />
			<cats:wizardColumn entityList="#{catSetsList}"
				propertyLabel="Extent (Dates)" propertyName="catThDateRange"
				propertyPath="catSets.catThDateRange"
				propertyValue="#{catSetsList.catSets.catThDateRange}"
				reRender="sets" value="#{_setsRollup.catThDateRange}" />
			<cats:wizardColumn entityList="#{catSetsList}"
				propertyLabel="On Hold" propertyName="catOnHold"
				propertyPath="catSets.catOnHold"
				propertyValue="#{catSetsList.catSets.catOnHold}" reRender="sets"
				value="#{_setsRollup.catOnHold ? 'Yes' : 'No'}" />
		</rich:dataTable></div>
	</s:div></div>

	<div class="push"></div>

	<a:commandLink styleClass="button" value="Quit"
		eventsQueue="#{divParam}eventsQueue" status="globalWaitStatus" ignoreDupResponses="true"
		reRender="createInvitationswizard"
		oncomplete="#{rich:component('createInvitationsQuit')}.show(); return false;">
	</a:commandLink> <a:commandLink styleClass="button right" value="Continue"
		eventsQueue="#{divParam}eventsQueue" status="globalWaitStatus" ignoreDupResponses="true"
		onclick="if(checkRadios('sets_checkbox', 'Please select a Set') == false) {return false}"
		action="#{createInvitationsWizard.createNext}"
		reRender="createInvitationswizard" /></div>

</ui:composition>

